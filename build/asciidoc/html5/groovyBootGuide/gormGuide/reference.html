<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<title>Reference</title>

<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="sect1">
<h2 id="reference">Reference</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="ref-domain-classes">Domain Classes</h3>
<div class="sect3">
<h4 id="ref-domain-classes-addTo">addTo</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_addto_方法">addTo* 方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的">目的</h3>
<div class="paragraph">
<p>为一对多或多对多关系添加域类关系，其中以该方法的后缀的属性名称表示关系的映射属性</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def fictBook = new Book(title: "IT")
def nonFictBook = new Book(title: "On Writing: A Memoir of the Craft")
def a = new Author(name: "Stephen King")
             .addToFiction(fictBook)
             .addToNonFiction(nonFictBook)
             .save()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述">描述</h3>
<div class="paragraph">
<p>`addTo*`方法是一种动态的方法，使用一个会自动添加实例的关联。它还自动配置双向关系，使双方都设置。</p>
</div>
<div class="paragraph">
<p>考虑上面例子中使用的这些domain类:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">@Entity
class Author implements GormEntity&lt;Author&gt;{
    String name
    static hasMany = [fiction: Book, nonFiction: Book]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">@Entity
class Book implements GormEntity&lt;Book&gt;{
    String title
    static belongsTo = [author: Author]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>这个例子创造了一本新的小说类书籍和一本新的非小说类书籍，归属于一个作者。
<code>addToFiction`是一个动态方法,因为 `Fiction</code> 部分表示的`fiction`集合定义在domain类的`hasMany`属性中,同样的关系也表现在 `NonFiction`和`nonFiction`上.
通过调用 `Author`对象的`save()`方法,关联的 `Book`示例也保存入库, 尽管我们没有显示的调用它们的`save()`方法.</p>
</div>
<div class="paragraph">
<p>此外，调用addTo*方法会初始化关联的集合，并且会设置`Book`的`author`的引用关系。</p>
</div>
<div class="paragraph">
<p>还有一种更紧凑的方法，该方法接受一个“map”而不是一个域类实例，如下调用，则自动初始化`Book`对象:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def a = new Author(name: "Stephen King")
             .addToFiction(title: "IT")
             .addToNonFiction(title: "On Writing: A Memoir of the Craft")
             .save()</code></pre>
</div>
</div>
<div class="paragraph">
<p>以上代码可以运行，是因为GORM知道addTo被添加类型，可以使用标准的`Map`构造函数来创建实例.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-attach">attach</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_attach方法">attach方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_2">目的</h3>
<div class="paragraph">
<p>将“detached”状态的domain类实例与当前Hibernate会话关联在一起</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_2">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.get(1)
b.title = "Blah"
b.save(flush:true)

b.discard()

...
if (!b.isAttached()) {
    b.attach()
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_2">描述</h3>
<div class="paragraph">
<p>Hibernate在持久会话session中管理持久实例。每个请求创建新会话，并在请求结束时关闭。如果一个对象是从会话中获取并放置到一个Web范围如HttpSession，状态将变为“detached”，一旦Hibernate会话session关闭和废弃。你可以使用` attach() `方法重新附加现有的持久化实例对当前请求的Hibernate session。</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-belongsTo">belongsTo</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_belongsto_静态属性">belongsTo 静态属性</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_3">目的</h3>
<div class="paragraph">
<p>Defines a "belongs to" relationship where the class specified by <code>belongsTo</code> assumes ownership of the relationship. This has the effect of controlling how saves and deletes cascade. The exact behaviour depends on the type of relationship:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Many-to-one/one-to-one: saves and deletes cascade from the owner to the dependant (the class with the <code>belongsTo</code>).</p>
</li>
<li>
<p>One-to-many: saves always cascade from the one side to the many side, but if the many side has <code>belongsTo</code>, then deletes also cascade in that direction.</p>
</li>
<li>
<p>Many-to-many: only saves cascade from the "owner" to the "dependant", not deletes.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_示例_3">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
   String title

   static belongsTo = [author: Author]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the <code>Book</code> class specifies that it belongs to the <code>Author</code> class, hence when an <code>Author</code> instance is deleted so are all its associated <code>Book</code> instances.</p>
</div>
</div>
<div class="sect2">
<h3 id="_描述_3">描述</h3>
<div class="paragraph">
<p>The <code>belongsTo</code> property abstracts the nature of the cascading behaviour in Hibernate. If you want one class to belong to another but not have a back reference, then you can specify a class or a list of classes as the value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    static belongsTo = Author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    static belongsTo = [Author, Library]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Back references, i.e. properties linking back to the owner, can be added in one of two ways:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    Author author

    static belongsTo = Author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    static belongsTo = [author: Author]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In these examples, both techniques create an <code>Author</code> property named <code>author</code>. Also, the Map property can specify multiple properties and types if the class belongs to more than one owner.</p>
</div>
<div class="paragraph">
<p>The <code>belongsTo</code> property is simple and means you don&#8217;t have to worry about the Hibernate cascading strategies, but if you need more control over cascading you can use the <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#ormdsl">ORM DSL</a>. This allows fine grained control of cascading updates and deletes.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-clearErrors">clearErrors</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_clearerrors方法">clearErrors方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_4">目的</h3>
<div class="paragraph">
<p>重装domain类的errors列表 . 如果domain类包含绑定或验证的错误时，将非常有用。这些错误可以通过程序纠正。如果不清除错误，验证将继续失败。</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_4">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = new Book(title: "The Shining")
b.validate()
if (b.hasErrors()) {

    // clear the list of errors
    b.clearErrors()

    // fix the validation issues
    b.author = "Stephen King"

    // re-validate
    b.validate()
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-constraints">constraints</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_constraints">constraints</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose">Purpose</h3>
<div class="paragraph">
<p>Allows the definition of declarative validation constraints. See <a href="{guidePath}/validation.html">validation</a> in the user guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

    String title
    Author author

    static constraints = {
        title blank: false, size: 5..150
        author nullable: true
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description">Description</h3>
<div class="paragraph">
<p>Constraints are defined using the declarative constraints DSL as described in the <a href="{guidePath}/validation.html">validation</a> section of the user guide. Once evaluated, validation can be applied through the use of the <a href="../Domain%20Classes/validate.html">validate</a> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = new Book()
assert !b.validate()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The static <code>constrainedProperties</code> property is a Map such that the keys in the Map are property names and the values associated with the keys are instances of {apiDocs}grails/validation/ConstrainedProperty.html[ConstrainedProperty]:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def constraintsMap = Book.constrainedProperties
for(entry in constraintsMap) {
    // propertyName is a String
    def propertyName = entry.key

    // constrainedProperty is a ConstrainedProperty
    def constrainedProperty = entry.value

    // ...
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-count">count</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_count方法">count方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_5">目的</h3>
<div class="paragraph">
<p>返回domain类对应的表的记录总数</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_5">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">int bookCount = Book.count()</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-countBy">countBy</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_countby_方法">countBy*方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_6">目的</h3>
<div class="paragraph">
<p>使用domain类中的属性来查询相应记录的数目的动态方法</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_6">示例</h3>
<div class="paragraph">
<p>这是`Book`的domain类:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    String title
    Date releaseDate
    String author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>下面的用法都是可以的:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def c = Book.countByTitle("The Shining")
c = Book.countByTitleAndAuthor("The Sum of All Fears", "Tom Clancy")
c = Book.countByReleaseDateBetween(firstDate, new Date())
c = Book.countByReleaseDateGreaterThanEquals(firstDate)
c = Book.countByTitleLike("%Hobbit%")
c = Book.countByTitleNotEqual("Harry Potter")
c = Book.countByReleaseDateIsNull()
c = Book.countByReleaseDateIsNotNull()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_4">描述</h3>
<div class="paragraph">
<p>GORM 支持 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">Dynamic Finders</a> 的概念. `countBy*`方法对符合给定的表达的记录进行计数</p>
</div>
<div class="paragraph">
<p>下面的操作名称可以被用在各自的动态方法中:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LessThan</code></p>
</li>
<li>
<p><code>LessThanEquals</code></p>
</li>
<li>
<p><code>GreaterThan</code></p>
</li>
<li>
<p><code>GreaterThanEquals</code></p>
</li>
<li>
<p><code>Between</code></p>
</li>
<li>
<p><code>Like</code></p>
</li>
<li>
<p><code>Ilike</code> (i.e. ignorecase like)</p>
</li>
<li>
<p><code>IsNotNull</code></p>
</li>
<li>
<p><code>IsNull</code></p>
</li>
<li>
<p><code>Not</code></p>
</li>
<li>
<p><code>Equal</code></p>
</li>
<li>
<p><code>NotEqual</code></p>
</li>
<li>
<p><code>And</code></p>
</li>
<li>
<p><code>Or</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>这些操作名称可以被看作关键字, 当您使用这些操作名称作为属性对domain类进行查询时可能会产生困惑. 更多信息请查看 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">dynamic finders</a> 的用户向导.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-createCriteria">createCriteria</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_createcriteria方法">createCriteria方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_7">目的</h3>
<div class="paragraph">
<p>创建并返回一个 Grails' <a href="http://grails.github.io/grails-data-mapping/latest/api/grails/orm/HibernateCriteriaBuilder.html">HibernateCriteriaBuilder</a> 的实例, 用作构建标准化查询.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
单元测试时在内存中实现的并不是GORM Hibernate, 如`createCriteria()` 返回的是 <a href="http://grails.github.io/grails-data-mapping/latest/api/grails/gorm/CriteriaBuilder.html">CriteriaBuilder</a> 的实例，而不是HibernateCriteriaBuilder的实例.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_示例_7">示例</h3>
<div class="paragraph">
<p>用作构建criteria的方法 (like, and, or, between 等) 可以从HibernateCriteriaBuilder静态导入 (就像这篇文档下面的例子), 或者写为 "c.like(&#8230;&#8203;)", "c.between(&#8230;&#8203;)" 等.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def c = Account.createCriteria()
def results = c.list {
    like("holderFirstName", "Fred%")
    and {
        between("balance", 500, 1000)
        eq("branch", "London")
    }
    maxResults(10)
    order("holderLastName", "desc")
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>要想使用分页, 你还需使用另一个查询来检索匹配结果的总数. 一个较好的方法是将分页值作为criteria方法的参数, 就像下面:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def c = Account.createCriteria()
def results = c.list (max: 10, offset: 10) {
    like("holderFirstName", "Fred%")
    and {
        between("balance", 500, 1000)
        eq("branch", "London")
    }
    order("holderLastName", "desc")
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>因为这个查询包括了分页参数 (max and offset), 它会返回一个含有`getTotalCount()`方法、可以得到分页数据总数的 <a href="http://grails.github.io/grails-data-mapping/latest/api/grails/orm/PagedResultList.html">PagedResultList</a>. 两个查询依然执行，但执行得到的结果集和总数组合在`PagedResultList`中.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">println "Rendering ${results.size()} Accounts of ${results.totalCount}"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_5">描述</h3>
<div class="paragraph">
<p>Criteria queries are a type-safe, advanced way to query that uses a Groovy builder to construct potentially complex queries. It is a much better alternative to using a StringBuilder to dynamically construct an HQL query. Refer to the user guide section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#criteria">Criteria</a> for usage instructions.</p>
</div>
<div class="paragraph">
<p>方法相关:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">方法</th>
<th class="tableblock halign-left valign-top">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>list</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default method; returns all matching rows.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>get</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a unique result, i.e. just one row. The criteria has to be formed that way, that it only queries one row. This method is not to be confused with a limit to just the first row.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>scroll</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a scrollable result set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>listDistinct</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If subqueries or associations are used, one may end up with the same row multiple times in the result set. In Hibernate one would do a "CriteriaSpecification.DISTINCT_ROOT_ENTITY". In Grails one can do it by just using this method.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The <code>listDistinct()</code> method does not work well with the pagination options <code>maxResult</code> and <code>firstResult</code>. If you need distinct results with pagination, we currently recommend that you use HQL. You can find out more information from <a href="http://floledermann.blogspot.com/2007/10/solving-hibernate-criterias-distinct.html">this blog post</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you invoke the builder with no method name</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">c { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>the <code>list()</code> method will be invoked automatically. In other words, it&#8217;s the equivalent of</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">c.list { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Below is a node reference for each criterion method:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>between</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where the property value is between two distinct values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>between("balance", 500, 1000)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eq</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property equals a particular value.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eq("branch", "London")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eq</strong> (case-insensitive)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A version of <strong>eq</strong> that supports an optional 3rd Map parameter to specify that the query be case-insensitive.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eq("branch", "london", [ignoreCase: true])</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eqProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property must equal another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eqProperty("lastTx", "firstTx")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>gt</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is greater than a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gt("balance",1000)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>gtProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property must be greater than another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gtProperty("balance", "overdraft")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ge</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is greater than or equal to a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ge("balance", 1000)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>geProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property must be greater than or equal to another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geProperty("balance", "overdraft")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>idEq</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where an objects id equals the specified value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idEq(1)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ilike</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A case-insensitive <em>like</em> expression</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ilike("holderFirstName", "Steph%")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>in</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is contained within the specified list of values. Can also be chained with the <code>not</code> method where a property is not contained within the specified list of values. Note: <em>in</em> is a Groovy reserve word, so it must be escaped by quotes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'in'("age",[18..65]) or not {'in'("age",[18..65])}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>isEmpty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property is empty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isEmpty("transactions")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>isNotEmpty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property is not empty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isNotEmpty("transactions")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>isNull</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is <code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isNull("holderGender")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>isNotNull</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is not <code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isNotNull("holderGender")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lt</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is less than a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lt("balance", 1000)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ltProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property must be less than another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ltProperty("balance", "overdraft")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>le</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is less than or equal to a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>le("balance", 1000)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>leProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property must be less than or equal to another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>leProperty("balance", "overdraft")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>like</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equivalent to SQL like expression</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>like("holderFirstName", "Steph%")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ne</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property does not equal a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ne("branch", "London")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>neProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property does not equal another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>neProperty("lastTx", "firstTx")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>order</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order the results by a particular property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>order("holderLastName", "desc")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rlike</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similar to like, but uses a regex. Only supported on Oracle and MySQL.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rlike("holderFirstName", /Steph.+/)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeEq</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size equals a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeEq("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeGt</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size is greater than a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeGt("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeGe</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size is greater than or equal to a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeGe("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeLt</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size is less than a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeLt("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeLe</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size is less than or equal to a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeLe("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeNe</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size is not equal to a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeNe("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sqlRestriction</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use arbitrary SQL to modify the resultset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sqlRestriction "char_length(first_name) = 4"</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>With dynamic finders, you have access to options such as <code>max</code>, <code>sort</code>, etc. These are available to criteria queries as well, but they have different names:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>order</strong>(String, String)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies both the sort column (the first argument) and the sort order (either <em>asc</em> or <em>desc</em>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>order "age", "desc"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>firstResult</strong>(int)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the offset for the results. A value of 0 will return all records up to the maximum specified.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>firstResult 20</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>maxResults</strong>(int)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the maximum number of records to return.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxResults 10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>cache</strong>(boolean)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates if the query should be cached (if the query cache is enabled).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cache 'true'</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Criteria also support the notion of projections. A projection is used to change the nature of the results. For example the following query uses a projection to count the number of distinct <code>branch</code> names that exist for each <code>Account</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def c = Account.createCriteria()
def branchCount = c.get {
    projections {
        countDistinct "branch"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table summarizes the different projections and what they do:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the given property in the returned results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property("firstName")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>distinct</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns results using a single or collection of distinct property names</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>distinct("fn") or distinct(['fn', 'ln'])</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>avg</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the average value of the given property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>avg("age")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>count</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the count of the given property name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>count("branch")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>countDistinct</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the count of the given property name for distinct rows</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>countDistinct("branch")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>groupProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Groups the results by the given property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupProperty("lastName")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>max</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the maximum value of the given property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max("age")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>min</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the minimum value of the given property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min("age")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sum</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the sum of the given property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sum("balance")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rowCount</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns count of the number of rows returned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rowCount()</code></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="ref-domain-classes-delete">delete</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_delete">delete</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_2">Purpose</h3>
<div class="paragraph">
<p>Deletes a persistent instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_2">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def book = Book.get(1)
book.delete()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_2">Description</h3>
<div class="paragraph">
<p>The <code>delete</code> method informs the persistence context that a persistent instance should be deleted. Equivalent to the Hibernate <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#delete(java/lang/Object).html">delete</a> method.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Calling <code>delete</code> on a transient instance will result in an error
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>flush</code> - If set to <code>true</code> the persistent context will be flushed resulting in the instance being deleted immediately. For example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def book = Book.get(1)
book.delete(flush: true)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-discard">discard</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_discard">discard</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_3">Purpose</h3>
<div class="paragraph">
<p>Discards any changes that have been made to a persistent instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_3">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.get(1)
b.title = "Blah"
b.discard() // changes won't be applied now</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_3">Description</h3>
<div class="paragraph">
<p>The <code>discard</code> method informs the persistence context that the instance should not be saved. The <code>discard</code> method is equivalent to using Hibernate&#8217;s <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#evict(java/lang/Object).html">evict</a> method.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that this method will not clean or reset the object with the original values; it will just prevent it from being automatically saved by Grails.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-embedded">embedded</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_embedded">embedded</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_4">Purpose</h3>
<div class="paragraph">
<p>Supports embedding domain components into domain classes - otherwise known as <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#gormComposition">composition</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_4">Examples</h3>
<div class="paragraph">
<p>Given these domain classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Person {

    String name
    Country bornInCountry
    Country livesInCountry

    static embedded = ['bornInCountry', 'livesInCountry']
}

// If you don't want an associated table created for this class, either
// define it in the same file as Person or put Country.groovy under the
// src/main/groovy directory.
class Country {
    String iso3
    String name
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Grails will generate a <code>person</code> database table that looks like:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Column</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR(255)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BORN_IN_COUNTRY_ISO3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR(255)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BORN_IN_COUNTRY_NAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR(255)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LIVES_IN_COUNTRY_ISO3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR(255)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LIVES_IN_COUNTRY_NAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR(255)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_description_4">Description</h3>
<div class="paragraph">
<p>An embedded component does not store its data in its own table as a regular domain class relationship does. Instead, the data is included in the owner&#8217;s table. So in the above example, the <code>Country</code> fields appear in the <code>person</code> table. This means that queries are faster because there is no join required, but you may end up with duplicate data across tables.</p>
</div>
<div class="paragraph">
<p>The embedded component class is typically declared in the same source file as the owning class or in its own file under <code>src/main/groovy</code>. You <em>can</em> put the component class under <code>grails-app/domain</code>, but if you do so Grails will automatically create a dedicated table for it. Putting the class under <code>src/main/groovy</code> is usually the best option because you can then share the component across multiple domain classes.</p>
</div>
<div class="paragraph">
<p>Querying on embedded properties is no different from querying on regular relationships, so you can for example still do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Person.findAllByBornInCountry(brazil)
Person.findAllByLivesInCountry(france)</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>brazil</code> and <code>france</code> are instances of <code>Country</code>.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-errors">errors</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_errors">errors</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_5">Purpose</h3>
<div class="paragraph">
<p>An instance of the Spring {springapi}org/springframework/validation/Errors.html[Errors] interface containing data binding and/or validation errors.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_5">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def user = new User(params)

if (user.validate()) {
    // do something with user
}
else {
    user.errors.allErrors.each {
        println it
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_5">Description</h3>
<div class="paragraph">
<p>The <code>errors</code> property is used by Grails during <a href="{guidePath}/theWebLayer.html#dataBinding">data binding</a> to store type conversion errors and during <a href="{guidePath}validation.html">validation</a> when calling the <a href="validate.html">validate</a> or <a href="save.html">save</a> methods.</p>
</div>
<div class="paragraph">
<p>You can also add your own errors using the {springapi}org/springframework/validation/Errors#reject(java/lang/String).html[reject] and {springapi}org/springframework/validation/Errors#rejectValue(java/lang/String,%20java/lang/String).html[rejectValue] methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">if (params.password != params.confirm_password) {

    user.errors.reject(
        'user.password.doesnotmatch',
        ['password', 'class User'] as Object[],
        '[Property [{0}] of class [{1}] does not match confirmation]')

    // The following helps with field highlighting in your view
    user.errors.rejectValue(
        'password',
        'user.password.doesnotmatch')

    render(view: 'signup', model: [user: user])
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example of <code>reject</code> above, <code>'user.password.doesnotmatch'</code>, is the error code corresponding to a value in <code>grails-app/i18n/message.properties</code>, <code>\['password', 'class User'\] as Object\[\]</code> is a Groovy cast from a <code>List</code> to an <code>Object</code> array to match the expected signature, and <code>'\[Property \[{0}\] of class \[{1}\] does not match confirmation\]'</code> is the default mapping string.</p>
</div>
<div class="paragraph">
<p>In the <code>rejectValue</code> example, <code>'password'</code> is the field in the view to highlight using a <code>&lt;g:hasErrors&gt;</code> tag and <code>'user.password.doesnotmatch'</code> is the i18n error code.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-executeQuery">executeQuery</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_executequery">executeQuery</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_6">Purpose</h3>
<div class="paragraph">
<p>Executes <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#hql">HQL queries</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_6">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// simple query
Account.executeQuery("select distinct a.number from Account a")

// using with list of parameters
Account.executeQuery("select distinct a.number from Account a " +
                     "where a.branch = ? and a.created &gt; ?",
                     ['London', lastMonth])

// using with a single parameter and pagination params
Account.executeQuery("select distinct a.number from Account a " +
                     "where a.branch = ?", ['London'],
                     [max: 10, offset: 5])

// using with Map of named parameters
Account.executeQuery("select distinct a.number from Account a " +
                     "where a.branch = :branch",
                     [branch: 'London'])

// using with Map of named parameters and pagination params
Account.executeQuery("select distinct a.number from Account a " +
                     "where a.branch = :branch",
                     [branch: 'London', max: 10, offset: 5])

// same as previous
Account.executeQuery("select distinct a.number from Account a " +
                     "where a.branch = :branch",
                     [branch: 'London'], [max: 10, offset: 5])

// tell underlying Hibernate Query object to not attach newly retrieved
// objects to the session, will only save with explicit `save`
Account.executeQuery("select distinct a.number from Account a",
                     null, [readOnly: true])

// time request out after 18 seconds
Account.executeQuery("select distinct a.number from Account a",
                     null, [timeout: 18])

// have Hibernate Query object return 30 rows at a time
Account.executeQuery("select distinct a.number from Account a",
                     null, [fetchSize: 30])

// modify the FlushMode of the Query (default is `FlushMode.AUTO`)
Account.executeQuery("select distinct a.number from Account a",
                     null, [flushMode: FlushMode.MANUAL])</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_6">Description</h3>
<div class="paragraph">
<p>The <code>executeQuery</code> method allows the execution of arbitrary HQL queries. HQL queries can return domain class instances, or `Array`s of specified data when the query selects individual fields or calculated values. The basic syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.executeQuery(String query)
Book.executeQuery(String query, List positionalParams)
Book.executeQuery(String query, List positionalParams, Map metaParams)
Book.executeQuery(String query, Map namedParams)
Book.executeQuery(String query, Map namedParams, Map metaParams)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query</code> - An HQL query</p>
</li>
<li>
<p><code>positionalParams</code> - A <code>List</code> of parameters for a positional parameterized query</p>
</li>
<li>
<p><code>namedParams</code> - A <code>Map</code> of named parameters for a named parameterized query</p>
</li>
<li>
<p><code>metaParams</code> - A <code>Map</code> of pagination parameters <code>max</code> or/and <code>offset</code>, as well as Hibernate query parameters <code>readOnly</code>, <code>fetchSize</code>, <code>timeout</code>, and <code>flushMode</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-executeUpdate">executeUpdate</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_executeupdate">executeUpdate</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_7">Purpose</h3>
<div class="paragraph">
<p>Updates the database with <a href="http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/batch.html#batch-direct">DML-style operations</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_7">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Account.executeUpdate("delete Book b where b.pages &gt; 100")

Account.executeUpdate("delete Book b where b.title like ?",
                      ['Groovy In Action'])

Account.executeUpdate("delete Book b where b.author=?",
                      [Author.load(1)])

Account.executeUpdate("update Book b set b.title='Groovy In Action'" +
                      "where b.title='GINA'")

Account.executeUpdate("update Book b set b.title=:newTitle " +
                      "where b.title=:oldTitle",
                      [newTitle: 'Groovy In Action', oldTitle: 'GINA'])</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_7">Description</h3>
<div class="paragraph">
<p><a href="GORM.html">GORM</a> does not provide a <code>deleteAll</code> method as deleting data must be done with caution. To delete data you can use <code>executeUpdate</code>. The basic syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.executeUpdate(String query)
Book.executeUpdate(String query, List positionalParams)
Book.executeUpdate(String query, Map namedParams)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query</code> - An HQL query with DML-style operations</p>
</li>
<li>
<p><code>positionalParams</code> - A <code>List</code> of parameters for a positional parameterized HQL query</p>
</li>
<li>
<p><code>namedParams</code> - A <code>Map</code> of parameters for a named parameterized HQL query</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-exists">exists</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exists">exists</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_8">Purpose</h3>
<div class="paragraph">
<p>Checks whether an instance exists for the specified id</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_8">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def accountId = ...
if (Account.exists(accountId)) {
    // do something
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_8">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code> - The id of the object</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-fetchMode">fetchMode</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fetchmode">fetchMode</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_9">Purpose</h3>
<div class="paragraph">
<p>Allows the configuration of an associations fetch strategy (<em>eager</em> or <em>lazy</em>)</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_9">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {

    String name

    static hasMany = [books: Book]

    static fetchMode = [books: 'eager']
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the <code>fetchMode</code> static property specifies that the <code>book</code> association should be fetching eagerly</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_9">Description</h3>
<div class="paragraph">
<p>By default associations in Grails are fetched lazily (each record is read from the database only when it is first accessed from the collection). This makes sense for most cases, however in the case where you have a small number of records to fetch and/or are repeatedly required to load lazy associations (resulting in N+1 queries) it makes sense to use eager fetching.</p>
</div>
<div class="paragraph">
<p>In the case of eager fetching and a one-to-many association, the instance as well as the association will be initialized when they are loaded (eagerly). However, caution should be observed when using eager fetching, since being too eager can result in your entire database being loaded into memory!</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-find">find</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_find">find</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_10">Purpose</h3>
<div class="paragraph">
<p>Finds the first matching result for the given query or <code>null</code> if no instance is found</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_10">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// Dan brown's first book
Book.find("from Book as b where b.author='Dan Brown'")

// with a positional parameter
Book.find("from Book as b where b.author=?", ['Dan Brown'])

// with a named parameter
Book.find("from Book as b where b.author=:author", [author: 'Dan Brown'])

// use the query cache
Book.find("from Book as b where b.author='Dan Brown'", [cache: true])
Book.find("from Book as b where b.author=:author",
          [author: 'Dan Brown'],
          [cache: true])

// query by example
def example = new Book(author: "Dan Brown")
Book.find(example)

// Using where criteria (since Grails 2.0)
Person p = Person.find { firstName == "Bart" }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_10">Description</h3>
<div class="paragraph">
<p>The <code>find</code> method allows querying with Hibernate&#8217;s query language <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#hql">HQL</a> and querying by example. The basic syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.find(String query)
Book.find(String query, Collection positionalParams)
Book.find(String query, Collection positionalParams, Map queryParams)
Book.find(String query, Map namedParams)
Book.find(String query, Map namedParams, Map queryParams)
Book.find(Book example)
Book.find(Closure whereCriteria)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query</code> - An HQL query</p>
</li>
<li>
<p><code>positionalParams</code> - A <code>List</code> of parameters for a positional parametrized HQL query</p>
</li>
<li>
<p><code>namedParams</code> - A <code>Map</code> of named parameters a HQL query</p>
</li>
<li>
<p><code>queryParams</code> - A <code>Map</code> of query parameters. Currently, only <code>cache</code> is supported</p>
</li>
<li>
<p><code>example</code> - An instance of the domain class for query by example</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findAll">findAll</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findall">findAll</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_11">Purpose</h3>
<div class="paragraph">
<p>Finds all of domain class instances matching the specified query</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_11">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// everything
Book.findAll()

// with a positional parameter
Book.findAll("from Book as b where b.author=?", ['Dan Brown'])

// 10 books from Dan Brown staring from 5th book ordered by release date
Book.findAll("from Book as b where b.author=? order by b.releaseDate",
             ['Dan Brown'], [max: 10, offset: 5])

// examples with max/offset usage
def query = "from Book as b where b.author='Dan Brown' order by b.releaseDate"

// first 10 books
Book.findAll(query, [max: 10])

// 10 books starting from 5th
Book.findAll(query, [max: 10, offset: 5])

// examples with named parameters
Book.findAll("from Book as b where b.author=:author",
             [author: 'Dan Brown'])
Book.findAll("from Book as b where b.author=:author",
             [author: 'Dan Brown'], [max: 10, offset: 5])
Book.findAll("from Book as b where b.author in (:authors)",
             [authors: ['Dan Brown', 'Jack London']])

// examples with tables join
Book.findAll("from Book as b where not exists " +
                "(from Borrow as br where br.book = b)")

// query by example
def example = new Book(author: "Dan Brown")
Book.findAll(example)

// Use where criteria (since Grails 2.0)
def results = Person.findAll {
     lastName == "Simpson"
}
def results = Person.findAll(sort:"firstName") {
     lastName == "Simpson"
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_11">Description</h3>
<div class="paragraph">
<p>The <code>findAll</code> method allows querying with Hibernate&#8217;s query language <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#hql">HQL</a> and querying by example, returning all matching instances. Pagination can be controlled using the <code>max</code> and <code>offset</code> parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.findAll("from Book as b where b.author=:author",
             [author: 'Dan Brown'], [max: 10, offset: 5])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>findAll</code> method supports the 2nd level cache:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.findAll("from Book as b where b.author=:author",
             [author:'Dan Brown'], [max: 10, offset: 5, cache: true])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The basic syntax for the method is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.findAll()
Book.findAll(String query)
Book.findAll(String query, Collection positionalParams)
Book.findAll(String query, Collection positionalParams, Map queryParams)
Book.findAll(String query, Map namedParams)
Book.findAll(String query, Map namedParams, Map queryParams)
Book.findAll(Book example)
Book.findAll(Closure whereCriteria)
Book.findAll(Map queryParams, Closure whereCriteria)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have a join in your HQL, the method will return a <code>List</code> of `Array`s containing domain class instances. You may wish to use <a href="executeQuery.html">executeQuery</a> in this case so you have more flexibility in specifying what gets returned.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query</code> - An HQL query</p>
</li>
<li>
<p><code>positionalParams</code> - A <code>List</code> of parameters for a positional parametrized HQL query</p>
</li>
<li>
<p><code>namedParams</code> - A <code>Map</code> of named parameters a HQL query</p>
</li>
<li>
<p><code>queryParams</code> - A <code>Map</code> containing parameters <em>max</em>, and/or <em>offset</em> and/or <em>cache</em></p>
</li>
<li>
<p><code>example</code> - An instance of the domain class for query by example</p>
</li>
<li>
<p><code>readOnly</code> - <code>true</code> if returned objects should not be automatically dirty-checked (simlar to <code>read()</code>)</p>
</li>
<li>
<p><code>fetchSize</code> - number of rows fetched by the underlying JDBC driver per round trip</p>
</li>
<li>
<p><code>flushMode</code> - Hibernate <code>FlushMode</code> override, defaults to <code>FlushMode.AUTO</code></p>
</li>
<li>
<p><code>timeout</code> - query timeout in seconds</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findAllBy">findAllBy</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findallby">findAllBy*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_12">Purpose</h3>
<div class="paragraph">
<p>Dynamic method that uses the properties of the domain class to create query method expressions that return all matching instances of the domain class</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_12">Examples</h3>
<div class="paragraph">
<p>Given this domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    String title
    Date releaseDate
    String author
    Boolean paperback
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are all possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def results = Book.findAllByTitle("The Shining",
                  [max: 10, sort: "title", order: "desc", offset: 100])

results = Book.findAllByTitleAndAuthor("The Sum of All Fears", "Tom Clancy")

results = Book.findAllByReleaseDateBetween(firstDate, new Date())

results = Book.findAllByReleaseDateGreaterThanEquals(firstDate)

results = Book.findAllByTitleLike("%Hobbit%")

results = Book.findAllByTitleIlike("%Hobbit%") // ignore case

results = Book.findAllByTitleNotEqual("Harry Potter")

results = Book.findAllByReleaseDateIsNull()

results = Book.findAllByReleaseDateIsNotNull()

results = Book.findAllPaperbackByAuthor("Douglas Adams")

results = Book.findAllNotPaperbackByAuthor("Douglas Adams")

results = Book.findAllByAuthorInList(["Douglas Adams", "Hunter S. Thompson"])</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_12">Description</h3>
<div class="paragraph">
<p>GORM supports the notion of <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">Dynamic Finders</a>. The <code>findAllBy*</code> method finds all the results for the given method expression.</p>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>metaParams</code> - A <code>M`ap containing pagination parameters `max</code>, <code>order</code>, <code>offset</code> and <code>sort</code> and metaParameters <code>readOnly</code>, <code>timeout</code>, <code>fetchSize</code>, and <code>flushMode</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pagination and sorting parameters can be used as the last argument to a dynamic method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def results = Book.findAllByTitle("The Shining",
                 [max: 10, sort: "title", order: "desc", offset: 100])</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no items meet the supplied criteria an empty list is returned.</p>
</div>
<div class="paragraph">
<p>The following operator names can be used within the respective dynamic methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LessThan</code></p>
</li>
<li>
<p><code>LessThanEquals</code></p>
</li>
<li>
<p><code>GreaterThan</code></p>
</li>
<li>
<p><code>GreaterThanEquals</code></p>
</li>
<li>
<p><code>Between</code></p>
</li>
<li>
<p><code>Like</code></p>
</li>
<li>
<p><code>Ilike</code> (i.e. ignorecase like)</p>
</li>
<li>
<p><code>IsNotNull</code></p>
</li>
<li>
<p><code>IsNull</code></p>
</li>
<li>
<p><code>Not</code></p>
</li>
<li>
<p><code>NotEqual</code></p>
</li>
<li>
<p><code>And</code></p>
</li>
<li>
<p><code>Or</code></p>
</li>
<li>
<p><code>InList</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These operator names can be considered keywords, and you will run into problems when querying domain classes that have one of these names as property names. For more information on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">dynamic finders</a> refer to the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findAllWhere">findAllWhere</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findallwhere">findAllWhere</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_13">Purpose</h3>
<div class="paragraph">
<p>Uses named arguments corresponding to property names of the domain class to execute a query returning all matching results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_13">Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

   String title
   Date releaseDate
   String author

   static constraints = {
      releaseDate nullable: true
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can query in the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def books = Book.findAllWhere(author: "Stephen King", title: "The Stand")

def unreleasedBooks = Book.findAllWhere(releaseDate: null)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_13">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queryParams</code> - A Map of key/value pairs to be used in the query</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findBy">findBy</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findby">findBy*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_14">Purpose</h3>
<div class="paragraph">
<p>Dynamic method that uses the properties of the domain class to execute a query returning the first matching result.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_14">Examples</h3>
<div class="paragraph">
<p>Given the domain class <code>Book</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    String title
    Date releaseDate
    String author
    Boolean paperback
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are all possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.findByTitle("The Shining")
b = Book.findByTitleAndAuthor("The Sum of All Fears", "Tom Clancy")
b = Book.findByReleaseDateBetween(firstDate, new Date())
b = Book.findByReleaseDateGreaterThanEquals(firstDate)
b = Book.findByReleaseDateLessThanEquals(firstDate)
b = Book.findByTitleLike("%Hobbit%")
b = Book.findByTitleIlike("%Hobbit%") // ignores case
b = Book.findByTitleNotEqual("Harry Potter")
b = Book.findByReleaseDateIsNull()
b = Book.findByReleaseDateIsNotNull()
b = Book.findPaperbackByAuthor("Douglas Adams")
b = Book.findNotPaperbackByAuthor("Douglas Adams")
b = Book.findByAuthorInList(["Douglas Adams", "Hunter S. Thompson"])</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_14">Description</h3>
<div class="paragraph">
<p>GORM supports the notion of <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">Dynamic Finders</a>. The <code>findBy*</code> method finds the first result for the given method expression.</p>
</div>
<div class="paragraph">
<p>The following operator names can be used within the respective dynamic methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LessThan</code></p>
</li>
<li>
<p><code>LessThanEquals</code></p>
</li>
<li>
<p><code>GreaterThan</code></p>
</li>
<li>
<p><code>GreaterThanEquals</code></p>
</li>
<li>
<p><code>Between</code></p>
</li>
<li>
<p><code>Like</code></p>
</li>
<li>
<p><code>Ilike</code> (i.e. ignorecase like)</p>
</li>
<li>
<p><code>IsNotNull</code></p>
</li>
<li>
<p><code>IsNull</code></p>
</li>
<li>
<p><code>Not</code></p>
</li>
<li>
<p><code>NotEqual</code></p>
</li>
<li>
<p><code>And</code></p>
</li>
<li>
<p><code>Or</code></p>
</li>
<li>
<p><code>InList</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The above operator names can be considered keywords, and you will run into problems when querying domain classes that have one of these names used as property names. For more information on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">dynamic finders</a> refer to the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findOrCreateBy">findOrCreateBy</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findorcreateby">findOrCreateBy*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_15">Purpose</h3>
<div class="paragraph">
<p>Dynamic method that uses the properties of the domain class to create query method expressions that return the first result of the query. This method behaves like <a href="../Domain%20Classes/findBy.html">findBy</a> except that it will never return <code>null</code>.  If a matching instance cannot be found then a new instance will be created and returned, populated with values represented in the query parameters. The difference between this method and <a href="../Domain%20Classes/findOrSaveBy.html">findOrSaveBy</a> is that this method will not save a newly created instance where <a href="../Domain%20Classes/findOrSaveBy.html">findOrSaveBy</a> does.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_15">Examples</h3>
<div class="paragraph">
<p>Given the domain class <code>Book</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
   String title
   String author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are all possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.findOrCreateByTitle("The Shining")
b = Book.findOrCreateByTitleAndAuthor("The Sum of All Fears", "Tom Clancy")
b = Book.findByAuthorInList(["Douglas Adams", "Hunter S. Thompson"])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are roughly equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.findOrCreateByTitle("The Shining")</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.findByTitle("The Shining")
if (!b) {
    b = new Book(title: "The Shining")
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_15">Description</h3>
<div class="paragraph">
<p>GORM supports the notion of <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">Dynamic Finders</a>. The <code>findOrCreateBy*</code> method finds the first result for the given method expression.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because this method potentially creates a new instance and populates properties on that instance, only exact match criteria are allowed.  For example, <code>Book.findOrCreateByDate(dateValue)</code> is valid but <code>Book.findOrCreateByDateGreaterThan(dateValue)</code> is not.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findOrCreateWhere">findOrCreateWhere</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findorcreatewhere">findOrCreateWhere</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_16">Purpose</h3>
<div class="paragraph">
<p>Uses named arguments that match the property names of the domain class to produce a query that returns the first result.  This method behaves just like <a href="../Domain%20Classes/findWhere.html">findWhere</a> except that it will never return <code>null</code>.  If a matching instance cannot be found then a new instance will be created, populated with values from the query parameters and returned.  The difference between this method and <a href="../Domain%20Classes/findOrSaveWhere.html">findOrSaveWhere</a> is that this method will not save a newly created instance where <a href="../Domain%20Classes/findOrSaveWhere.html">findOrSaveWhere</a> does.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_16">Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

   String title
   Date releaseDate
   String author

   static constraints = {
      releaseDate nullable: true
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can query in the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def book = Book.findOrCreateWhere(author: "Stephen King", title: "The Stand")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_16">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queryParams</code> - A <code>Map</code> of key/value pairs to be used in the query. If no matching instance is found then this data is used to initialize a new instance.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findOrSaveBy">findOrSaveBy</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findorsaveby">findOrSaveBy*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_17">Purpose</h3>
<div class="paragraph">
<p>Dynamic method that uses the properties of the domain class to create query method expressions that return the first result of the query. This method behaves like <a href="../Domain%20Classes/findBy.html">findBy</a> except that it will never return <code>null</code>.  If a matching instance cannot be found then a new instance will be created, populated with values represented in the query parameters, saved and returned. The difference between this method and <a href="../Domain%20Classes/findOrCreateBy.html">findOrCreateBy</a> is that this method will save any newly created instance where <a href="../Domain%20Classes/findOrCreateBy.html">findOrCreateBy</a> does not.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_17">Examples</h3>
<div class="paragraph">
<p>Given the domain class <code>Book</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
   String title
   String author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are all possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.findOrSaveByTitleAndAuthor("The Sum of All Fears", "Tom Clancy")</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are roughly equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.findOrSaveByTitleAndAuthor("The Sum of All Fears", "Tom Clancy")</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.findByTitleAndAuthor("The Sum of All Fears", "Tom Clancy")
if (!b) {
    b = new Book(title: "The Sum of All Fears", author: "Tom Clancy")
    b.save()
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_17">Description</h3>
<div class="paragraph">
<p>GORM supports the notion of <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">Dynamic Finders</a>. The <code>findOrSaveBy*</code> method finds the first result for the given method expression.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because this method potentially creates a new instance and populates properties on that instance, only exact match criteria are allowed.  For example, <code>Book.findOrSaveByTitle(authorValue)</code> is valid but <code>Book.findOrSaveByAuthorInList(listOfNames)</code> is not.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findOrSaveWhere">findOrSaveWhere</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findorsavewhere">findOrSaveWhere</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_18">Purpose</h3>
<div class="paragraph">
<p>Uses named arguments corresponding to property names of the domain class to execute a query returning the first matching result. This method behaves just like <a href="../Domain%20Classes/findWhere.html">findWhere</a> except that it will never return <code>null</code>. If a matching instance cannot be found in the database then a new instance is created, populated with values from the query parameters, saved and returned.  The difference between this method and <a href="../Domain%20Classes/findOrCreateWhere.html">findOrCreateWhere</a> is that this method will save a newly created instance where <a href="../Domain%20Classes/findOrCreateWhere.html">findOrCreateWhere</a> does not.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_18">Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

   String title
   Date releaseDate
   String author

   static constraints = {
      releaseDate nullable: true
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can query in the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def book = Book.findOrSaveWhere(author: "Stephen King", title: "The Stand")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_18">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queryParams</code> - A Map of key/value pairs to be used in the query. If no matching instance is found then this data is used to initialize a new instance.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findWhere">findWhere</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findwhere">findWhere</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_19">Purpose</h3>
<div class="paragraph">
<p>Uses named arguments corresponding to domain class property names to execute a query returning the first matching result.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_19">Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

   String title
   Date releaseDate
   String author

   static constraints = {
      releaseDate nullable: true
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can query in the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def book = Book.findWhere(author: "Stephen King", title: "The Stand")

boolean isReleased = Book.findWhere(author: "Stephen King",
                                    title: "The Stand",
                                    releaseDate: null) != null</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_19">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queryParams</code> - A <code>Map</code> of key/value pairs to be used in the query</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-first">first</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_first">first</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_20">Purpose</h3>
<div class="paragraph">
<p>Retrieves the first instance of the domain class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_20">Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String firstName
    String lastName
    Integer age
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// retrieve the first person ordered by the identifier
def p = Person.first()

// retrieve the first person ordered by the lastName property
p = Person.first(sort: 'lastName')

// retrieve the first person ordered by the lastName property
p = Person.first('lastName')</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sort</code> (optional) - The name of the property to sort by</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See also:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="last.html">last</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the first() and last() methods are not supported on domain classes which use a composite primary key.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-get">get</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_get">get</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_21">Purpose</h3>
<div class="paragraph">
<p>Retrieves an instance of the domain class for the specified id. <code>null</code> is returned if the row with the specified id doesn&#8217;t exist.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_21">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.get(1)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_20">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code> - The id of the object to retrieve</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-getAll">getAll</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getall">getAll</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_22">Purpose</h3>
<div class="paragraph">
<p>Retrieves a <code>List</code> of instances of the domain class for the specified ids, ordered by the original ids list. If some of the provided ids are <code>null</code> or there are no instances with these ids, the resulting <code>List</code> will have <code>null</code> values in those positions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_22">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// get a list which contains Book instances with ids 2, 1, 3 respectively
def bookList = Book.getAll(2, 1, 3)

// can take a list of ids as only argument, very
// useful when the ids list is calculated in code
def bookList = Book.getAll([1, 2, 3])

// when called without arguments returns list of all objects
def bookList = Book.getAll()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_21">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>varargs</code>* - A variable argument list of ids</p>
</li>
<li>
<p><code>ids</code>* - A list of ids</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-getDirtyPropertyNames">getDirtyPropertyNames</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getdirtypropertynames">getDirtyPropertyNames</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_23">Purpose</h3>
<div class="paragraph">
<p>Retrieve the names of modified fields in a domain class instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_23">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.get(1)
someMethodThatMightModifyTheInstance(b)

def names = b.dirtyPropertyNames
for (name in names) {
    def originalValue = b.getPersistentValue(name)
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_22">Description</h3>
<div class="paragraph">
<p>This method is useful mostly for audit logging or other work done in a <strong>beforeUpdate</strong> event callback. Hibernate caches the original state of all loaded instances for dirty checking during a flush and this method exposes the names of modified fields so you can compare them with the current state.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-getPersistentValue">getPersistentValue</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getpersistentvalue">getPersistentValue</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_24">Purpose</h3>
<div class="paragraph">
<p>Retrieve the original value of a field for a domain class instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_24">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.get(1)
someMethodThatMightModifyTheInstance(b)

if (b.isDirty('name')) {
    def currentName = b.name
    def originalName = b.getPersistentValue('name')
    if (currentName != originalName) {
        ...
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_23">Description</h3>
<div class="paragraph">
<p>This method is useful mostly for audit logging or other work done in a <strong>beforeUpdate</strong> event callback. Hibernate caches the original state of all loaded instances for dirty checking during a flush and this method exposes that data so you can compare it with the current state.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-hasErrors">hasErrors</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_haserrors">hasErrors</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_25">Purpose</h3>
<div class="paragraph">
<p>Check if a domain class instance has validation errors following a call to <a href="validate.html">validate</a> or <a href=".save.html">save</a>, or following <a href="{guidePath}/theWebLayer.html#dataBinding">data binding</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_25">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = new Book(title: "The Shining")
b.validate()
if (b.hasErrors()) {
    b.errors.allErrors.each {
        println it
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-hasMany">hasMany</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hasmany">hasMany</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_26">Purpose</h3>
<div class="paragraph">
<p>Defines a one-to-many association between two classes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_26">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {

    String name

    static hasMany = [books: Book]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example we define a one-to-many relationship between the <code>Author</code> and <code>Book</code> classes (one <code>Author</code> has many `Book`s)</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_24">Description</h3>
<div class="paragraph">
<p>By default GORM will create a property of type <code>java.util.Set</code> using the key inside the definition of the <code>hasMany</code> map. For example consider this definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static hasMany = [books: Book]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here a property of type <code>java.util.Set</code> called <code>books</code> will be created within the defining class. These can then be iterated over and manipulated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def a = Author.get(1)
for (book in a.books) { println book.title }</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-hasOne">hasOne</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hasone">hasOne</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_27">Purpose</h3>
<div class="paragraph">
<p>Defines a bidirectional one-to-one association between two classes where the foreign key is in the child.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_27">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Face {
    ..
    static hasOne = [nose: Nose]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Nose {
    Face face
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example we define a one-to-one relationship between the <code>Face</code> class and the <code>Nose</code> class</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_25">Description</h3>
<div class="paragraph">
<p>Use a <code>hasOne</code> association to store the foreign key reference in child table instead of the parent in a bidirectional one-to-one. The example presented above will generate the following table structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">create table face (id bigint generated by default as identity (start with 1),
                   version bigint not null,
                   primary key (id))
create table nose (id bigint generated by default as identity (start with 1),
                   version bigint not null,
                   face_id bigint not null,
                   primary key (id))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the foreign key <code>face_id</code> is stored in the <code>nose</code> table instead of the <code>face</code> table as with a normal one-to-one definition without <code>belongsTo</code>.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-ident">ident</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ident">ident</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_28">Purpose</h3>
<div class="paragraph">
<p>Returns the value of the identity property of the domain class regardless of the name of the identity property itself</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_28">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = new Book(title: "The Shining")
b.save()

println b.ident()</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-instanceOf">instanceOf</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instanceof">instanceOf</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_29">Purpose</h3>
<div class="paragraph">
<p>Determines if a domain class instance is an instance of the specified class, resolving the actual class if the instance is a proxy.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_29">Examples</h3>
<div class="paragraph">
<p>Given the domain classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Container {
   static hasMany = [children: Child]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Child {
   String name
   static belongsTo = [container: Container]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Thing extends Child {}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Other extends Child {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can determine the type of the elements in a <code>Container</code>'s <code>children</code> collection using</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def container = Container.get(id)
for (child in container.children) {
   if (child.instanceOf(Thing)) {
      // process Thing
   }
   else if (child.instanceOf(Other)) {
      // process Other
   }
   else {
      // handle unexpected type
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_26">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>clazz</code> - the type to check</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-isAttached">isAttached</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_isattached">isAttached</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_30">Purpose</h3>
<div class="paragraph">
<p>Returns whether the domain instance is attached to a currently active Hibernate session. This method is often used on conjunction with the <a href="merge.html">merge</a> or <a href="attach.html">attach</a> methods.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_30">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book b = session.book
...
if (!b.isAttached()) {
    b.attach()
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_27">Description</h3>
<div class="paragraph">
<p>Persistent instances are associated with a persistence Session. A new Session is created for each request and is closed at the end of the request. If an object is read from the session and placed into a web scope such as the HttpSession it is seen as detached, since the persistence session has been closed. You can use the <a href="attach.html">attach</a> method to re-attach an existing persistent instance to the persistence session of the current request.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-isDirty">isDirty</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_isdirty">isDirty</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_31">Purpose</h3>
<div class="paragraph">
<p>Checks to see if a domain class instance has been modified.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_31">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.get(1)
someMethodThatMightModifyTheInstance(b)

// when called without arguments returns true if any field was changed
if (b.isDirty()) {
    // can also check if one field has changed
    if (b.isDirty('title')) {
        ...
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_28">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fieldName</code> - The name of a field to check</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-last">last</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_last">last</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_32">Purpose</h3>
<div class="paragraph">
<p>Retrieves the last instance of the domain class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_32">Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String firstName
    String lastName
    Integer age
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// retrieve the last person ordered by the identifier
def p = Person.last()

// retrieve the last person ordered by the lastName property
p = Person.last(sort: 'lastName')

// retrieve the last person ordered by the lastName property
p = Person.last('lastName')</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sort</code> (optional) - The name of the property to sort by</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See also:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="first.html">first</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the first() and last() methods are not supported on domain classes which use a composite primary key.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-list">list</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_list">list</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_33">Purpose</h3>
<div class="paragraph">
<p>Lists instances of the domain class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_33">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// list everything
def results = Book.list()

// list 10 results
def results = Book.list(max: 10)

// list 10 results, offset by 100
def results = Book.list(max: 10, offset: 100)

// list 10 results, offset by 100, orderd by title in descending order
def results = Book.list(max: 10, offset: 100, sort: "title", order: "desc")

// list all books, eagerly fetching the authors association
def results = Book.list(fetch: [authors: "eager"])</code></pre>
</div>
</div>
<div class="paragraph">
<p>When <code>max</code> is specified as a named argument this will return a <a href="http://grails.github.io/grails-data-mapping/latest/api/grails/orm/PagedResultList.html">PagedResultList</a> which has a getTotalCount() method to return the total number of matching records for pagination. Two queries are still run, but they&#8217;re run for you and the results and total count are combined in the <code>PagedResultList</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_29">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>max</code> - The maximum number to list</p>
</li>
<li>
<p><code>offset</code> - The offset from the first result to list from</p>
</li>
<li>
<p><code>order</code> - How to order the list, either <code>"desc"</code> or <code>"asc"</code></p>
</li>
<li>
<p><code>sort</code> - The property name to sort by</p>
</li>
<li>
<p><code>ignoreCase</code> - Whether to ignore the case when sorting. Default is <code>true</code>.</p>
</li>
<li>
<p><code>fetch</code> - The fetch policy for the object&#8217;s associations as a <code>Map</code></p>
</li>
<li>
<p><code>readOnly</code> - true if returned objects should not be automatically dirty-checked (simlar to <code>read()</code>)</p>
</li>
<li>
<p><code>fetchSize</code> - number of rows fetched by the underlying JDBC driver per round trip</p>
</li>
<li>
<p><code>flushMode</code> - Hibernate <code>FlushMode</code> override, defaults to <code>FlushMode.AUTO</code></p>
</li>
<li>
<p><code>timeout</code> - query timeout in seconds</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-listOrderBy">listOrderBy</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_listorderby">listOrderBy*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_34">Purpose</h3>
<div class="paragraph">
<p>Lists all of the instances of the domain class ordered by the property in the method expression</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_34">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// everything
def results = Book.listOrderByAuthor()

// 10 results
def results = Book.listOrderByTitle(max: 10)

// 10 results, offset from 100
def results = Book.listOrderByTitle(max: 10, offset: 100, order: "desc")</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_30">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>max</code> - The maximum number to list</p>
</li>
<li>
<p><code>offset</code> - The offset from the first result to list from</p>
</li>
<li>
<p><code>order</code> - The order to list by, either <code>"desc"</code> or <code>"asc"</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-load">load</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_load">load</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_35">Purpose</h3>
<div class="paragraph">
<p>Returns a proxy instance of the domain class for the given identifier.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_35">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// load a single instance
def b = Book.load(1)
String title = b.title
...

// delete an instance without retrieving it
Book.load(1).delete()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_31">Description</h3>
<div class="paragraph">
<p><code>load</code> usually returns a proxy for the instance which is initialized on-demand, when a method other than <code>getId()</code> is invoked. <code>load()</code> only returns <code>null</code> if the provided id is <code>null</code>, so you cannot use it to test for existence. If you provide an id for an instance that doesn&#8217;t exist, a proxy will be returned and an exception will be thrown only when you call any instance method other than <code>getId()</code>.</p>
</div>
<div class="paragraph">
<p>If there is an existing instance with the same id in the Hibernate session or 2nd-level cache, load() will return that non-proxy instance instead of a proxy.</p>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code> - The id of the object to retrieve</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-lock">lock</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lock">lock</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_36">Purpose</h3>
<div class="paragraph">
<p>The <code>lock</code> method obtains a pessimistic lock using an SQL <code>select ... for update</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_36">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def book = Book.get(1)
book.lock()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_32">Description</h3>
<div class="paragraph">
<p>The <code>lock</code> method obtains a pessimistic lock on an instance, locking the row in the database with <code>select ... for update</code>. The <code>lock</code> method is equivalent to using Hibernate&#8217;s <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/LockMode#UPGRADE.html">LockMode.UPGRADE</a> in combination with the <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#lock(java/lang/Object" class="bare">http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#lock(java/lang/Object</a>, org/hibernate/LockMode).html[lock] method.</p>
</div>
<div class="paragraph">
<p>The lock is automatically released when the transaction commits. In Grails this is typically after an action has finished executing.</p>
</div>
<div class="paragraph">
<p>Refer to the section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#locking">Optimistic and Pessimistic locking</a> in the user guide for info.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-mappedBy">mappedBy</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mappedby">mappedBy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_37">Purpose</h3>
<div class="paragraph">
<p>The <code>mappedBy</code> static property allows you to control whether an association is mapped as unidirectional or bidirectional, and which properties form the reverse direction in the case of bidirectional associations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_37">Examples</h3>
<div class="paragraph">
<p>In this example the <code>Airport</code> class defines two bidirectional one-to-many associations. Without defining <code>mappedBy</code> this is impossible as GORM cannot differentiate which of the two properties on the other end of the association (either <code>departureAirport</code> or <code>destinationAirport</code> in the <code>Route</code> class) each one-to-many should be associated with.</p>
</div>
<div class="paragraph">
<p>The solution is to define <code>mappedBy</code> which tells the <code>Airport</code> class how each association relates to the other side.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Airport {

    static mappedBy = [outgoingFlights: 'departureAirport',
                       incomingFlights: 'destinationAirport']

    static hasMany = [outgoingFlights: Route,
                      incomingFlights: Route]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Route {
    Airport departureAirport
    Airport destinationAirport
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Separate example for many-to-one relationships:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Person {
    String name
    Person parent

    static belongsTo = [ supervisor: Person ]

    static mappedBy = [ supervisor: "none", parent: "none" ]

    static constraints = { supervisor nullable: true }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_33">Description</h3>
<div class="paragraph">
<p>Grails needs to know whether associations are unidirectional or bidirectional, and in the case of the latter, which properties are involved from both sides. Normally it can infer this information, but when there are multiple properties with the same type its guess can sometimes be wrong. The <code>mappedBy</code> property is a simple map of property name pairs, where the key is the name of an association property in the current domain class and the value is the name of an association property in the domain class on the other side of the association (which may be itself). The examples above should clarify this.</p>
</div>
<div class="paragraph">
<p>You can also specify a value of "none" in the map, which indicates that the association is unidirectional. However, this won&#8217;t work if you actually have a domain property called "none" in the target class!</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-mapping">mapping</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mapping">mapping</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_38">Purpose</h3>
<div class="paragraph">
<p>The <code>mapping</code> static property configures how GORM maps the domain class to the database. See the section on the <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#ormdsl">ORM DSL</a> in the user guide for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_38">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Person {

    String firstName

    static hasMany = [addresses: Address]

    static mapping = {
        table 'people'
        version false
        id column: 'person_id'
        firstName column: 'First_Name'
        addresses lazy: false
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example uses the <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#ormdsl">ORM DSL</a> to map the <code>Person</code> class onto a table called <code>people</code></p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-mapWith">mapWith</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mapwith">mapWith</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_39">Purpose</h3>
<div class="paragraph">
<p>The <code>mapWith</code> static property adds the ability to control if a domain class is being persisted.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_39">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Airport {

    static mapWith = "none"

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the <code>Airport</code> class will not be persisted to the database.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-merge">merge</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_merge">merge</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_40">Purpose</h3>
<div class="paragraph">
<p>Merges a domain class instance back into the current persistence context and returns a new merged instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_40">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = new Book(title: "The Shining")
b = b.merge()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_34">Description</h3>
<div class="paragraph">
<p>The <code>merge</code> method is similar in function to the <a href="save.html">save</a> method, but not in behaviour. <code>merge</code> allows the merging of "detached" instances such as those stored in the HTTP <a href="../Controllers/session.html">session</a>. Each persistent instance is associated with a persistence context. A new persistence context is created for each <a href="../Controllers/request.html">request</a>. The result is that objects stored in the HTTP session lose their persistence context on subsequent requests. In this case you can&#8217;t simply call <a href="save.html">save</a> as the domain class is not associated with a current context.</p>
</div>
<div class="paragraph">
<p>The <code>merge</code> method on the other hand lets you merge a detached object&#8217;s state back into the current Hibernate session. Unlike the <code>save</code> method this method returns a new instance of the class representing the re-attached object. In other words you <strong>must</strong> write code like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">book = book.merge()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t use the return value of the <code>merge</code> method then you still have access to the original unmodified detached instance and you will get errors such as lazy initialization exceptions.</p>
</div>
<div class="paragraph">
<p>The <code>merge</code> method is defined in the Hibernate documentation as follows:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Copy the state of the given object onto the persistent object with the same identifier. If there is no persistent instance currently associated with the session, it will be loaded. If the given instance is unsaved, save a copy of and return it as a newly persistent instance.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The <code>merge</code> method is equivalent to the Hibernate <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#merge(java/lang/Object).html">merge</a> method.</p>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>validate</code> (optional) - Set to <code>false</code> if validation should be skipped</p>
</li>
<li>
<p><code>flush</code> (optional) - When set to <code>true</code> flushes the persistence context, hence persisting the object immediately</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-namedQueries">namedQueries</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_namedqueries">namedQueries</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_41">Purpose</h3>
<div class="paragraph">
<p>The <code>namedQueries</code> static property defines named queries.  Named queries support the criteria builder syntax.  See the section on the <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#criteria">Criteria Builder</a> in the user guide for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_41">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Publication {

   String title
   String author
   Date datePublished
   Integer numberOfPages

   static namedQueries = {
       recentPublications {
           def now = new Date()
           gt 'datePublished', now - 365
       }

       oldPublicationsLargerThan { pageCount -&gt;
           def now = new Date()
           lt 'datePublished', now - 365
           gt 'numberOfPages', pageCount
       }

       publicationsWithBookInTitle {
           like 'title', '%Book%'
       }

       recentPublicationsWithBookInTitle {
           // calls to other named queries...
           recentPublications()
           publicationsWithBookInTitle()
      }
   }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// get all recent publications...
def recentPubs = Publication.recentPublications.list()

// get up to 10 recent publications, skip the first 5...
def recentPubs = Publication.recentPublications.list(max: 10, offset: 5)

// get a single recent publication
def recentPub = Publication.recentPublications.get()

// get the number of recent publications...
def numberOfRecentPubs = Publication.recentPublications.count()

// get a recent publication with a specific id...
def pub = Publication.recentPublications.get(42)

// get all recent publications where title = 'Some Title'
def pubs = Publication.recentPublications.findAllWhere(title: 'Some Title')

// get a recent publication where title = 'Some Title'
def pub = Publication.recentPublications.findWhere(title: 'Some Title')

// dynamic finders are supported
def pubs = Publication.recentPublications.findAllByTitle('Some Title')

// get all old publications with more than 350 pages
def pubs = Publication.oldPublicationsLargerThan(350).list()

// get all old publications with more than 350 pages
// and the word 'Grails' in the title
def pubs = Publication.oldPublicationsLargerThan(350).findAllByTitleLike('%Grails%')

// get all recent publications with 'Book' in their title
def pubs = Publication.recentPublicationsWithBookInTitle().list()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>list</code> method on named queries supports the same attributes as the static <code>list</code> method added to domain classes (sort, order, ignoreCase, fetch etc&#8230;&#8203;).  See the <a href="list.html">list</a> docs for details.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that calling something like <code>Publication.recentPublications.get(42)</code> is not the same as calling something like <code>Publication.get(42)</code>.  The former will only return a <code>Publication</code> if the <code>Publication</code> with id 42 meets all the criteria defined in the <code>recentPublications</code> named query.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Named criteria support <code>listDistinct()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class PlantCategory {

    Set plants
    String name

    static hasMany = [plants: Plant]

    static namedQueries = {
        withPlantsInPatch {
            plants {
                eq 'goesInPatch', true
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Plant {
    boolean goesInPatch
    String name
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">PlantCategory.withPlantsInPatch.listDistinct()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Named criteria support additional criteria being supplied at invocation time in the form of a criteria closure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// get all recent publications with author names beginning with Tony or Phil...
def books = Publication.recentPublications {
    or {
        like 'author', 'Tony%'
        like 'author', 'Phil%'
    }
}

// get the number of recent publications with
// author names beginning with Tony or Phil...
def numberOfBooks = Publication.recentPublications.count {
    or {
        like 'author', 'Tony%'
        like 'author', 'Phil%'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Named criteria may be chained together.  When criteria are chained together, the query will be generated as if all of the chained criteria had been combined in a single criteria closure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">// recent publications with 'Book' in the title
def books = Publication.recentPublications.publicationsWithBookInTitle.list()

// old publications with more than 500 pages and with 'Book' in the title
def books = Publication.oldPublicationsLargerThan(500)
                       .publicationsWithBookInTitle
                       .list()</code></pre>
</div>
</div>
<div class="paragraph">
<p>When a named query involves a domain class relationship and the relationship class defines a named query, that named query may be accessed directly as a method call.  An example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {

    static hasMany = [publications: Publication]

    static namedQueries = {
         authorsWithRecentPublications {
             publications {
                 // invoking a named query defined in the Publication class...
                 recentPublications()
             }
         }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Publication {

    Author author

    static namedQueries = {
        recentPublications {
            def now = new Date()
            gt 'datePublished', now - 10
        }
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-properties">properties</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_properties">properties</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_42">Purpose</h3>
<div class="paragraph">
<p>Allows access to the domain class properties as a Map and is typically used for <a href="{guidePath}/theWebLayer.html#dataBinding">data binding</a> to perform type conversions allowing properties to be set from request parameters or other Maps.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_42">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = new Book(title: "The Shining")
b.properties = params
b.save()</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-read">read</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_read">read</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_43">Purpose</h3>
<div class="paragraph">
<p>Retrieves an instance of the domain class for the specified id in a read-only state. <code>null</code> is returned if the row with the specified id doesn&#8217;t exist.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_43">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.read(1)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_35">Description</h3>
<div class="paragraph">
<p>The <code>read</code> method is similar to the <a href="get.html">get</a> method except that automatic dirty detection is disabled. The instance isn&#8217;t truly read-only - you can modify it - but if it isn&#8217;t explicitly saved but has been modified, it won&#8217;t be updated in the database during a flush. But you can explicitly call <code>save()</code> and it will be updated. There is one exception to this though - any associated collections, for example an <code>Author</code>'s <code>books</code> collection, will participate in automatic flushing and dirty detection. This is because mapped collections are treated differently than regular properties and they manage their own dirty checking indepenent of the containing domain class.</p>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code> - The id of the object to retrieve</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-refresh">refresh</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_refresh">refresh</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_44">Purpose</h3>
<div class="paragraph">
<p>Refreshes a domain classes state from the database</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_44">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = Book.get(1)
...
b.refresh()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_36">Description</h3>
<div class="paragraph">
<p>Equivalent to the Hibernate <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#refresh(java/lang/Object).html">refresh</a> method.</p>
</div>
<div class="paragraph">
<p>Re-reads the state of the given instance from the underlying database. It is inadvisable to use this to implement long-running sessions that span many business tasks. However this method is useful in certain special circumstances. For example</p>
</div>
<div class="ulist">
<ul>
<li>
<p>where a database trigger alters the object state upon insert or update</p>
</li>
<li>
<p>after executing direct SQL (e.g. a bulk update) in the same Session</p>
</li>
<li>
<p>after inserting a Blob or Clob</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-removeFrom">removeFrom</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_removefrom">removeFrom*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_45">Purpose</h3>
<div class="paragraph">
<p>Opposite of the <a href="addTo.html">addTo</a> method in that it removes instances from an association.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_45">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def author = Author.findByName("Stephen King")

def book = author.books.find { it.title == 'The Stand' }

author.removeFromBooks(book)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-save">save</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_save">save</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_46">Purpose</h3>
<div class="paragraph">
<p>Saves a new domain class instance or updates a modified persistent instance in the database, cascading updates to child instances if required.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_46">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = new Book(title: "The Shining")
b.save()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_37">Description</h3>
<div class="paragraph">
<p>The <code>save</code> method informs the persistence context that an instance should be saved or updated. The object will not be persisted immediately unless the <code>flush</code> argument is used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">b.save(flush: true)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>save</code> method returns <code>null</code> if <a href="{guidePath}/validation.html">validation</a> failed and the instance was not persisted, or the instance itself if successful. This lets you use "Groovy truth" (<code>null</code> is considered <code>false</code>) to write code like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">if (!b.save()) {
    b.errors.allErrors.each {
        println it
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>validate</code> (optional) - Set to <code>false</code> if validation should be skipped</p>
</li>
<li>
<p><code>flush</code> (optional) - When set to <code>true</code> flushes the persistence context, persisting the object immediately and updating the <code>version</code> column for <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#locking">optimistic locking</a></p>
</li>
<li>
<p><code>insert</code> (optional) - When set to <code>true</code> will force Hibernate to do a SQL INSERT; this is useful in certain situations (for example when using assigned ids) and Hibernate cannot detect whether to do an INSERT or an UPDATE</p>
</li>
<li>
<p><code>failOnError</code> (optional) - When set to <code>true</code> the <code>save</code> method with throw a <code>grails.validation.ValidationException</code> if <a href="{guidePath}/validation.html">validation</a> fails. This behavior may also be triggered by setting the <code>grails.gorm.failOnError</code> property in <code>grails-app/conf/application.groovy</code>. If the Config property is set and the argument is passed to the method, the method argument will always take precedence.  For more details about the config property and other GORM config options, see the <a href="{guidePath}/conf.html#configGORM">GORM Configuration Options</a> section of The User Guide.</p>
</li>
<li>
<p><code>deepValidate</code> (optional) - Determines whether associations of the domain instance should also be validated, i.e. whether validation cascades. This is <code>true</code> by default - set to <code>false</code> to disable cascading validation.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default GORM classes are configured for <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#locking">optimistic locking</a>, which is a feature of Hibernate that involves storing an incrementing version in the table. This value is only updated in the database when the Hibernate session is flushed.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-transients">transients</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transients">transients</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_47">Purpose</h3>
<div class="paragraph">
<p>Defines a list of property names that should not be persisted to the database. This is often useful if you have read-only accessor methods ("getters") that are helper methods but get confused as being persistence-related.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_47">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {
   String name
   String getUpperCaseName() { name.toUpperCase() }

   static transients = ['upperCaseName']
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we have an accessor that takes the <code>name</code> and converts it to uppercase. It doesn&#8217;t make sense to persist this derived value, so we mark it as transient adding its JavaBean property name to the <code>transients</code> list.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As of Grails 2.0 if there is only a getter or only a setter method, you don&#8217;t need to declare the property name of the method in the transients list. Only typed fields and get/set pairs that form a property but shouldn&#8217;t be persisted need to go in the transients list.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-validate">validate</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validate">validate</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_48">Purpose</h3>
<div class="paragraph">
<p>Validates a domain class against the applied constraints (see <a href="{guidePath}/validation.html">validation</a>)</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_38">Description</h3>
<div class="paragraph">
<p>The <code>validate</code> method validates a domain class based on its defined <a href="{guidePath}/validation.html#constraints">Constraints</a>. The errors are stored in the <a href="errors.html">errors</a> property of the domain class instance.</p>
</div>
<div class="paragraph">
<p>The <code>validate</code> method accepts an optional <code>List</code> argument which contains the names of the properties to be validated. When a <code>List</code> of names is specified, only those properties will be validated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_48">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def b = new Book(title: "The Shining")
if (!b.validate()) {
    b.errors.allErrors.each {
        println it
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def a = new Album(artist: "Genesis", title: "Nursery Cryme", releaseDate: 1971)

// only validate title and releaseDate
if (!a.validate(["title", "releaseDate"])) {
    a.errors.allErrors.each {
        println it
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>deepValidate</code> (optional) - Whether associations of the domain instance should also be validated, i.e. whether validation cascades. This is <code>true</code> by default; set it to <code>false</code> to disable cascading validation.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-where">where</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_where">where</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_49">Purpose</h3>
<div class="paragraph">
<p>Defines a new <code>grails.gorm.DetachedCriteria</code> instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_49">Examples</h3>
<div class="paragraph">
<p>Basic query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def query = Person.where {
   firstName == "Bart"
}
Person bart = query.find()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Conjunctions/Disjunctions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def query = Person.where {
    (lastName != "Simpson" &amp;&amp; firstName != "Fred") || (firstName == "Bart" &amp;&amp; age &gt; 9)
}
def results = query.list(sort:"firstName")</code></pre>
</div>
</div>
<div class="paragraph">
<p>Property comparison:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def query = Person.where {
   firstName == lastName
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Querying Associations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def query = Pet.where {
    owner.firstName == "Joe" || owner.firstName == "Fred"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Subqueries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">final query = Person.where {
  age &gt; avg(age)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_39">Description</h3>
<div class="paragraph">
<p>The <code>where</code> method is a powerful new type-safe querying option introduced in Grails 2.0. For more information on using the <code>where</code> method see the dedicated section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#whereQueries">Where Queries</a> and <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#detachedCriteria">Detached Criteria</a> in the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-whereAny">whereAny</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_where_2">where</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_50">Purpose</h3>
<div class="paragraph">
<p>Defines a new <code>grails.gorm.DetachedCriteria</code> instance that uses a disjunction (logical OR).</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_50">Examples</h3>
<div class="paragraph">
<p>Basic query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def query = Person.whereAny {
   firstName == "Bart"
   firstName == "Lisa"
}
Person bart = query.find()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_40">Description</h3>
<div class="paragraph">
<p>The <code>where</code> method defaults to a conjunction (logical AND) for the created query. The <code>whereAny</code> compliments the <code>where</code> method by allowing the creation of <code>DetachedCriteria</code> using a disjunction (logical OR).</p>
</div>
<div class="paragraph">
<p>The <code>where</code> method is a powerful new type-safe querying option introduced in Grails 2.0. For more information on using the <code>where</code> method see the dedicated section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#whereQueries">Where Queries</a> and <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#detachedCriteria">Detached Criteria</a> in the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-withCriteria">withCriteria</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_withcriteria">withCriteria</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_51">Purpose</h3>
<div class="paragraph">
<p>Allows inline execution of Criteria queries. See the <a href="createCriteria.html">createCriteria</a> method for reference.</p>
</div>
</div>
<div class="sect2">
<h3 id="_return_value">Return value</h3>
<div class="paragraph">
<p>If no matching records are found, an empty List is returned.</p>
</div>
<div class="paragraph">
<p>If a projection is specified:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>returns a single value if it only contains one field</p>
</li>
<li>
<p>a List in case there are multiple fields in the projection</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Otherwise, it will return a List of matched instances of the class calling withCriteria.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_51">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def results = Book.withCriteria {
    def now = new Date()
    between('releaseDate', now-7, now)
    like('title', '%Groovy%')
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_41">Description</h3>
<div class="paragraph">
<p>The <code>withCriteria</code> method allows the inline definition of <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#criteria">Criteria</a>. Arguments to the [<a href="http://grails.github.io/grails-data-mapping/latest/api/grails/orm/HibernateCriteriaBuilder.html" class="bare">http://grails.github.io/grails-data-mapping/latest/api/grails/orm/HibernateCriteriaBuilder.html</a>] can be passed as the first parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def book = Book.withCriteria(uniqueResult: true) {
    def now = new Date()
    between('releaseDate', now-7, now)
    like('title', '%Groovy%')
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>arguments</code> (optional) - A map of named arguments to be set on the Criteria instance</p>
</li>
<li>
<p><code>closure</code> - A closure that defines the criteria</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-withNewSession">withNewSession</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_withnewsession">withNewSession</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_52">Purpose</h3>
<div class="paragraph">
<p>Provides a way to execute code within the context of a new Hibernate session which shares the same transactional (JDBC Connection) resource as the currently bound session.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_52">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.withNewSession { session -&gt;
    // do work
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_42">Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>closure</code> - A closure which accepts a <code>Session</code> argument</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-withSession">withSession</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_withsession方法">withSession方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_8">目的</h3>
<div class="paragraph">
<p>提供 Hibernate <code>Session</code> 对象的底层权限</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_8">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Book.withSession { session -&gt;
    session.clear()
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_6">描述</h3>
<div class="paragraph">
<p>参数:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>closure</code> - 接受 <code>Session</code> 参数的闭包</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-withTransaction">withTransaction</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_withtransaction方法">withTransaction方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_9">目的</h3>
<div class="paragraph">
<p>允许编程式事务使用Spring的事务抽象。</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_9">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">Account.withTransaction { status -&gt;

    def source = Account.get(params.from)
    def dest = Account.get(params.to)

    int amount = params.amount.toInteger()
    if (source.active) {
        source.balance -= amount

        if (dest.active) {
            dest.amount += amount
        }
        else {
            status.setRollbackOnly()
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>命名参数可以根据需要作为参数传递，以控制事务的属性。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">//Map的key必须与 org.springframework.transaction.support.DefaultTransactionDefinition 中的属性一致。

Account.withTransaction([propagationBehavior: TransactionDefinition.PROPAGATION_REQUIRES_NEW,
                         isolationLevel: TransactionDefinition.ISOLATION_REPEATABLE_READ]) {
    // ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_7">描述</h3>
<div class="paragraph">
<p><code>withTransaction</code> 方法接受一个含有 <a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/TransactionStatus.html">TransactionStatus</a> 参数的闭包。</p>
</div>
<div class="paragraph">
<p><code>TransactionStatus</code> 对象可以被用来以编程方式控制事务回滚。</p>
</div>
<div class="paragraph">
<p>详情请参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#programmaticTransactions">Programmatic Transactions</a> 。</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-constraints">Constraints</h3>
<div class="sect3">
<h4 id="ref-constraints-attributes">attributes</h4>
<div class="paragraph">
<p>Unresolved directive in reference.adoc - include::ref/Constraints/attributes.adoc[]</p>
</div>
</div>
<div class="sect3">
<h4 id="ref-constraints-bindable">bindable</h4>
<div class="paragraph">
<p>Unresolved directive in reference.adoc - include::ref/Constraints/bindable.adoc[]</p>
</div>
</div>
<div class="sect3">
<h4 id="ref-constraints-blank">blank</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_blank_约束">blank 约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_10">目的</h3>
<div class="paragraph">
<p>验证字符串值是否为空白字符串值''.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_10">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">login blank: false</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_8">描述</h3>
<div class="paragraph">
<p>如果字符串值不能为空字符串值''，则设置为“false”.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.blank</code></p>
</div>
<div class="paragraph">
<p>注意：如果字符串为“null”，它将不能通过验证“blank: true”。在这种情况下，设置 <a href="nullable.html">nullable</a>约束为`true`。</p>
</div>
<div class="sect3">
<h4 id="ref-constraints-creditCard">creditCard</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creditcard约束">creditCard约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_11">目的</h3>
<div class="paragraph">
<p>验证字符串值是有效的信用卡号</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_11">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">cardNumber creditCard: true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_9">描述</h3>
<div class="paragraph">
<p>如果字符串必须是信用卡号码，则设置为“true”。内部使用`org.apache.commons.validator.CreditCardValidator`类。</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.creditCard.invalid</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-email">email</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_email约束">email约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_12">目的</h3>
<div class="paragraph">
<p>验证字符串值是有效的电子邮件地址.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_12">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">homeEmail email: true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_10">描述</h3>
<div class="paragraph">
<p>如果字符串值必须是电子邮件地址，则设置为“true”。内部使用`org.apache.commons.validator.EmailValidator`类。</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.email.invalid</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-inList">inList</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_inlist约束">inList约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_13">目的</h3>
<div class="paragraph">
<p>验证值是否在约束值的范围或集合中.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_13">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">name inList: ["Joe", "Fred", "Bob"]</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_11">描述</h3>
<div class="paragraph">
<p>约束一个值，使其必须包含在给定的列表中.</p>
</div>
<div class="paragraph">
<p>这种约束的影响参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#constraints">schema generation</a>.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.not.inList</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-matches">matches</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_matches约束">matches约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_14">目的</h3>
<div class="paragraph">
<p>验证字符串值是否与给定的正则表达式匹配.</p>
</div>
</div>
<div class="sect2">
<h3 id="_例子">例子</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">login matches: "[a-zA-Z]+"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_例子_2">例子</h3>
<div class="paragraph">
<p>对字符串值应用正则表达式.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.matches.invalid</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-max">max</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_max约束">max约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_15">目的</h3>
<div class="paragraph">
<p>确保值不超过最大值.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_14">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">age max: new Date()
price max: 999F</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_12">描述</h3>
<div class="paragraph">
<p>可以设置最大值为任意实现接口implements `java.lang.Comparable`的类对象.值的类型必须和属性的类型相同。</p>
</div>
<div class="paragraph">
<p>注意: 如果值为`java.util.Date`类型，约束的值只在评估执行时创建一次。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class User {
    ...

    static constraints = {
        //此日期对象在评估约束执行时创建，而不是每次验证用户类的实例时创建
        birthDate max: new Date()
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>这种约束的影响参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#constraints">schema generation</a>.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.max.exceeded</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-maxSize">maxSize</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_maxsize约束">maxSize约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_16">目的</h3>
<div class="paragraph">
<p>确保值的大小不超过最大值.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_15">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">children maxSize: 25</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_13">描述</h3>
<div class="paragraph">
<p>这种约束的影响参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#constraints">schema generation</a>.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.maxSize.exceeded</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-min">min</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_min约束">min约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_17">目的</h3>
<div class="paragraph">
<p>确保值不低于最小值</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_16">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">age min: new Date()
price min: 0F</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_14">描述</h3>
<div class="paragraph">
<p>可以设置最小值为任意实现接口implements `java.lang.Comparable`的类对象.值的类型必须和属性的类型相同。</p>
</div>
<div class="paragraph">
<p>注意: 如果值为`java.util.Date`类型，约束的值只在评估执行时创建一次。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class User {
    ...

    static constraints = {
        //此日期对象在评估约束执行时创建，而不是每次验证用户类的实例时创建
        age min: new Date()
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>这种约束的影响参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#constraints">schema generation</a>.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.min.notmet</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-minSize">minSize</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_minsize约束">minSize约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_18">目的</h3>
<div class="paragraph">
<p>确保值的大小不低于最小值.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_17">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">children minSize: 25</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_15">描述</h3>
<div class="paragraph">
<p>设置集合或数字属性的最小大小.</p>
</div>
<div class="paragraph">
<p>这种约束的影响参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#constraints">schema generation</a>.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.minSize.notmet</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-notEqual">notEqual</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_notequal约束">notEqual约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_19">目的</h3>
<div class="paragraph">
<p>确保属性不等于指定值</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_18">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">username notEqual: "Bob"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_16">描述</h3>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.notEqual</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-nullable">nullable</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_nullable约束">nullable约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_20">目的</h3>
<div class="paragraph">
<p>允许属性设置为“null”,默认设置为`false`</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_19">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">age nullable: true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_17">描述</h3>
<div class="paragraph">
<p>如果属性允许设置为`null`值，设置为`true`.对应数据库会设置为allow null.</p>
</div>
<div class="paragraph">
<p>这种约束的影响参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#constraints">schema generation</a>.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.nullable</code></p>
</div>
<div class="paragraph">
<p>注意：web请求表单提交，对于没有输入值的输入框, 属性的值为空白字符串，不是`null`.</p>
</div>
<div class="sect3">
<h4 id="ref-constraints-range">range</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_range约束">range约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_21">目的</h3>
<div class="paragraph">
<p>使用Groovy的Range类型以确保属性值在指定范围内</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_20">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">age range: 18..65</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_18">描述</h3>
<div class="paragraph">
<p>Groovy的Range类型可以包含数字类型`IntRange`或日期类型，或者任意类型（实现了implements <code>Comparable</code> ，并且提供`next` 和 <code>previous</code> 两个方法）</p>
</div>
<div class="paragraph">
<p>这种约束的影响参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#constraints">schema generation</a>.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.range.toosmall</code> 或者 <code>className.propertyName.range.toobig</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-scale">scale</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scale约束">scale约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_22">目的</h3>
<div class="paragraph">
<p>设置为浮点数字所需的尺度（即小数点右边的位数）</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_21">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">salary scale: 2</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_19">描述</h3>
<div class="paragraph">
<p>设置为浮点数字所需的尺度（即小数点右边的位数）。这个限制适用于以下类型的属性： <code>java.lang.Float</code>, <code>java.lang.Double</code>, and <code>java.math.BigDecimal</code> （及其子类）。当验证被调用时，此约束确定该数字是否包含比刻度允许更多的非零小数位置。如果是这样，它将数字循环到由刻度允许的最大小数位数。此约束不会生成验证错误消息。</p>
</div>
<div class="paragraph">
<p>这种约束的影响参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#constraints">schema generation</a>.</p>
</div>
<div class="paragraph">
<p>无错误代码 Code: N/A</p>
</div>
<div class="sect3">
<h4 id="ref-constraints-size">size</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_size约束">size约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_23">目的</h3>
<div class="paragraph">
<p>使用Groovy的Range类型限制集合、数字或字符串长度的大小</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_22">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">children size: 5..15</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_20">描述</h3>
<div class="paragraph">
<p>设置集合的大小、数字属性或字符串长度.</p>
</div>
<div class="paragraph">
<p>注意: 目前这个约束不能用于 <a href="blank.html">blank</a> 或者 <a href="nullable.html">nullable</a>.可以使用自定义验证这些组合.</p>
</div>
<div class="paragraph">
<p>这种约束的影响参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#constraints">schema generation</a>.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.size.toosmall</code> 或 <code>className.propertyName.size.toobig</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-unique">unique</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_unique约束">unique约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_24">目的</h3>
<div class="paragraph">
<p>在数据库级别将属性限制为唯一,会在数据库表上建立唯一性约束</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_23">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">username unique: true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_21">描述</h3>
<div class="paragraph">
<p>如果属性必须是唯一的，则设置为`true`。这是一个持久的调用，将查询数据库。</p>
</div>
<div class="paragraph">
<p>警告：有可能会发生（虽然不可能在实践中出现）唯一性验证通过，但随后的保存失败。场景为：如果同时有其他的进程修改数据库在GORM检查的同时，那么相关调用将失败。为了防止这一点的唯一方法就是使用`SERIALIZABLE`隔离级别的事务，但对性能影响很大。
还可以通过定义将字段包含为参数值来定义多列的“唯一”约束。如果有另一个字段，请指定它的名称，但如果有多于一个字段，请使用列表List，例如:</p>
</div>
<div class="paragraph">
<p>示例:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">group unique: 'department'</code></pre>
</div>
</div>
<div class="paragraph">
<p>这个例子中，每个`department`部门内`group`名是唯一的，不同的部门可以存在重名的组。组名本身不是唯一的.</p>
</div>
<div class="paragraph">
<p>示例2:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">username(unique: ['group', 'department'])</code></pre>
</div>
</div>
<div class="paragraph">
<p>这个例子要求在一个部门和组内的 `username`用户名是唯一的。不同的部门或不同的组内可以存在重名的情况</p>
</div>
<div class="paragraph">
<p>这种约束的影响参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#constraints">schema generation</a>.</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.unique</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-url">url</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_url约束">url约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_53">Purpose</h3>
<div class="paragraph">
<p>验证字符串值是有效URL.</p>
</div>
</div>
<div class="sect2">
<h3 id="_例子_3">例子</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">homePage url: true</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_22">描述</h3>
<div class="paragraph">
<p>如果一个字符串是 URL设置为 <code>true</code> .</p>
</div>
<div class="paragraph">
<p>错误代码 Code: <code>className.propertyName.url.invalid</code></p>
</div>
<div class="sect3">
<h4 id="ref-constraints-validator">validator</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validator约束">validator约束</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_25">目的</h3>
<div class="paragraph">
<p>为字段添加自定义约束.</p>
</div>
</div>
<div class="sect2">
<h3 id="_例子_4">例子</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">even validator: {
    return (it % 2) == 0
}

// is equivalent to
even validator: { val -&gt;
    return (val % 2) == 0
}

// 闭包的两个参数,第一个是属性值，第二个是实例对象
password1 validator: { val, obj -&gt;
    obj.password2 == val
}

//闭包的三个参数,第一个是属性值，第二个是实例对象 ，第三个是errors错误对象
password1 validator: { val, obj, errors -&gt;
    if (!(obj.password2 == val)) errors.rejectValue('password1', 'noMatch')
}

// Examples 传递参数到i18n的消息中 message.properties
// Example 1: 使用隐式的参数 0 (属性名称)

class Person {

    String name

    static constraints = {
        name validator: {
	  if (!it) return ['entryMissing']
       }
}

// 上述例子将调用如下消息:
// person.name.entryMissing=Please enter a name in the field {0}

// Example 2: 使用隐式的参数 0 (属性名称) and 参数2 (属性值)

class Person {

    Integer yearOfBirth

    static constraints = {
        yearOfBirth validator: {
	  if (yearOfBirth&gt;2013) return ['yearTooBig']
       }
}

// 上述例子将调用如下消息:
// person.yearOfBirth.yearTooBig=The value {2} entered in the field {0} is not valid because it lies in the future.

// Example 3: 复杂

class Astronaut {

    Integer yearOfBirth
    Integer yearOfFirstSpaceTravel

        yearOfFirstSpaceTravel validator: { val, obj -&gt;
                if (val &lt; obj.yearOfBirth) ['datePriorTo', val.toString(), obj.yearOfBirth]
                else if (val &lt; (obj.yearOfBirth+18)) ['maybeABitTooYoung', val-obj.yearOfBirth]
        }
}

// 各自的消息
// 注意，参数3是属性值转换toString方法，以避免不必要的格式，如前所述.
astronaut.yearOfFirstSpaceTravel.datePriorTo=The value {3} entered for the year of the first space travel is prior to the year of birth ({4}). Please correct the value.
astronaut.yearOfFirstSpaceTravel.maybeABitTooYoung={3} years seems a bit young for travelling to space, dude!</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_23">描述</h3>
<div class="paragraph">
<p>自定义验证通过闭包来实现，并接受3个参数。
如果闭包接受0个或1个参数,参数值将被验证("it" 是闭包的第0个参数).
如果接受2个参数，第一个是值，第二个是domain类的实例.
如果接受3个参数，第一个是值，第二个是domain类的实例，第3个是Spring <code>Errors</code> 对象。</p>
</div>
<div class="paragraph">
<p>闭包可以返回:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>null</code> 或者 <code>true</code> (或者没有返回值) 说明值是有效的。</p>
</li>
<li>
<p><code>false</code> 说明值是无效的并使用默认的消息代码</p>
</li>
<li>
<p>string 指明错误代码增加到 "classname.propertyName."字符串后，从而获取错误消息.如果无法解决特定字段消息，错误代码本身将使用全局错误消息.</p>
</li>
<li>
<p>一个包含字符串的list列表，后面是参数.
将使用 i18n/message.properties 中的定义组织消息。
参数的映射如下：参数0到2将自动映射到0：属性名称，1：类名，2：属性值。在参数3开始映射附加参数。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>请注意，在最后的错误信息，该属性的标签将使用在message.properties文件中的定义。否则，将使用类中定义的属性名称。</p>
</div>
<div class="paragraph">
<p>当显式传递的错误代码，通常不需要使用"return"关键词返回的错误代码，因为如果从闭包返回时，它将检查错误是否已连接到错误的对象。</p>
</div>
<div class="paragraph">
<p>这可以看作特例，闭包中传递了第3个参数，预计错误的对象`Errors`将直接更新。</p>
</div>
<div class="sect3">
<h4 id="ref-constraints-widget">widget</h4>
<div class="paragraph">
<p>Unresolved directive in reference.adoc - include::ref/Constraints/widget.adoc[]</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="ref-database-mapping">Database Mapping</h3>
<div class="sect3">
<h4 id="ref-database-mapping-autoImport">autoImport</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_autoimport映射">autoImport映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_26">目的</h3>
<div class="paragraph">
<p>在当前domain类的 HQL 查询中 Enable/disable auto import .</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_24">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    ...
    static mapping = {
        autoImport false
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_24">描述</h3>
<div class="paragraph">
<p>Usage: <code>autoImport(boolean)</code></p>
</div>
<div class="paragraph">
<p>默认情况下，domain类在HQL查询是auto-imported，因此，您不需要指定整个类名（包括包），但是，如果在不同的包中有重复的domain类名，则名称不再是唯一的，会造成`org.hibernate.DuplicateMappingException`错误。禁用其中一个或两个domain类的自动导入来修复此错误，设置`autoImport` 为 <code>false</code>。记住，你需要在HQL的查询中使用完全的domain类名引用。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    autoImport false
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-autoTimestamp">autoTimestamp</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_autotimestamp映射">autoTimestamp映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_27">目的</h3>
<div class="paragraph">
<p>设置为false时，关闭自动时间戳功能</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_25">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    ...
    static mapping = {
        autoTimestamp false
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_25">描述</h3>
<div class="paragraph">
<p>Usage: <code>autoTimestamp(boolean)</code></p>
</div>
<div class="paragraph">
<p>缺省当domain类中的属性名为 <code>dateCreated</code> 和 <code>lastUpdated</code> , GORM会在数据库自定维护这两个字段。可以通过设置为false关闭此功能:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    autoTimestamp false
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-batchSize">batchSize</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_batchsize映射">batchSize映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_28">目的</h3>
<div class="paragraph">
<p>定制多少结果获取在懒加载执行时.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_26">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    ...
    static mapping = {
        batchSize 10
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_26">描述</h3>
<div class="paragraph">
<p>Usage: <code>batchSize(integer)</code></p>
</div>
<div class="paragraph">
<p>针对`Author` 类拥有多个 <code>Book`实例的延迟加载关联。GORM将执行一条查询`Author`和附加查询多条关联`Book`实例。
这就是著名的N+1问题，通常使用表连接处理，然而，关联表会消耗性能。
批量加载是针对延迟加载的一个优化方案，例如设置`batchSize`为10，并且当前作者拥有30本书.
系统将执行四次获取（一次`Author</code>，3次批量10对象的获取），替换之前的31此获取:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    batchSize 10
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>也可以在关联端设置 <code>batchSize</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {

    static hasMany = [books: Book]

    static mapping = {
        books batchSize: 10
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-cache">cache</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cache映射">cache映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_29">目的</h3>
<div class="paragraph">
<p>配置domain类支持Hibernate二级缓存.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_27">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    ...
    static mapping = {
        cache true
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_示例_28">示例</h3>
<div class="paragraph">
<p>Usage: <code>cache(boolean/string/map)</code></p>
</div>
<div class="paragraph">
<p>参数:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cache</code> - 缓存使用. 可被设置为 <code>read-only</code>, <code>read-write</code>, <code>nonstrict-read-write</code> 或 <code>transactional</code></p>
</li>
<li>
<p><code>include</code> (optional) - 是否包含非延迟加载关联项。可被设置为 <code>all</code> 或 <code>non-lazy</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>示例:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    cache true
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>这将配置domain类使用&#8217;read-write' 缓存，需要提前确认配置的缓存政策被允许使用（缓存引擎提供支持）:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    cache 'transactional'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    cache usage: 'read-only', include: 'non-lazy'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>也可以在关联端设置缓存:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {

    static hasMany = [books: Book]

    static mapping = {
        books cache: true // or 'read-write' etc.
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>参照文档获取更多信息 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#caching">Caching</a> .</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-cascade">cascade</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cascade映射">cascade映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_30">目的</h3>
<div class="paragraph">
<p>配置关联项的级联操作</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_29">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {

    static hasMany = [books: Book]

    static mapping = {
        books cascade: 'all-delete-orphan'
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_27">描述</h3>
<div class="paragraph">
<p>Usage: <code>association_name(cascade:string)</code></p>
</div>
<div class="paragraph">
<p>参数:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cascade</code> - 定义级联行为. 可被设置为一个或多个 (comma-separated逗号分隔) of <code>all</code>, <code>merge</code>, <code>save-update</code>, <code>delete</code>, <code>lock</code>, <code>refresh</code>, <code>evict</code>, <code>replicate</code> or <code>all-delete-orphan</code> (one-to-many只支持一对多关系).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>默认GORM会配置"belongs to"属性对象的级联操作为"all"，示例如下:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    static belongsTo = [author: Author]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {
    static hasMany = [books: Book]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>所以的持久化操作都会从`Author` 类传递到 <code>Book</code> 类。作者对象删除将导致关联的图书全部删除。</p>
</div>
<div class="paragraph">
<p>如果关联没有设置所有者("belongs to" 关联关系):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {
    static hasMany = [books: Book]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>GORM默认使用"save-update"级联策略. 作者对象删除时，不会级联删除关联的图书。
使用`cascade`参数自定义级联行为:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {

    static hasMany = [books: Book]

    static mapping = {
        books cascade: 'all-delete-orphan'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>以上配置，`Book`当成为孤儿(orphaned) 时会被删除。.</p>
</div>
<div class="paragraph">
<p>参看文档获取更多信息 <a href="http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/objectstate.html#objectstate-transitive">transitive persistence</a> .</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-column">column</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_column映射">column映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_31">目的</h3>
<div class="paragraph">
<p>自定义数据列的设置</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_30">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
        currency column: "currency", sqlType: "char", length: 3
    }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_28">描述</h3>
<div class="paragraph">
<p>Usage: <code>property_name(map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>column</code> - The name of the column as a String</p>
</li>
<li>
<p><code>sqlType</code> (optional) - The underlying SQL type</p>
</li>
<li>
<p><code>enumType</code> (optional) - The enum type in for type-safe Enum properties. Either <code>ordinal</code> or <code>string</code>.</p>
</li>
<li>
<p><code>index</code> (optional) - The index name</p>
</li>
<li>
<p><code>unique</code> (optional) - Whether it is unique</p>
</li>
<li>
<p><code>length</code> (optional) - The length of the column</p>
</li>
<li>
<p><code>precision</code> (optional) - The precision of the column</p>
</li>
<li>
<p><code>scale</code> (optional) - The scale of the column</p>
</li>
<li>
<p><code>comment</code> (optional) - The comment for the column (used to create the table DDL)</p>
</li>
<li>
<p><code>defaultValue</code> (optional) - The database default value</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default GORM uses the property name and type to determine how to map a property in the database. For example a <code>String</code> property is typically mapped as a <code>varchar(255)</code> column. You can customize these with column configuration arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    currency column: "currency", sqlType: "char", length: 3
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use a Hibernate <a href="type.html">type</a> that requires multiple column definitions you can use the <code>column</code> method to define each column:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    amount type: MonetaryUserType, {
        column name: "value"
        column name: "currency", sqlType: "char", length: 3
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that if you have a static method that is the same name as one of your properties you are trying to configure or you use the same property name as one of the static GORM methods this can lead to conflicts. To avoid this scenario scope the mapping configuration using the <code>delegate</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    delegate.currency column: "currency", sqlType: "char", length: 3
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-comment">comment</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comment映射">comment映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_32">目的</h3>
<div class="paragraph">
<p>设置生成表创建sql(DDL)时使用的注释.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_31">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
   static mapping = {
      comment "your comment here"
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_29">描述</h3>
<div class="paragraph">
<p>Usage: <code>comment(string)</code></p>
</div>
<div class="paragraph">
<p>参数:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>comment</code> - 具体注释</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-discriminator">discriminator</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_discriminator">discriminator</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_54">Purpose</h3>
<div class="paragraph">
<p>Customizes the discriminator column used in table-per-hierarchy inheritance mapping. Has no effect when using table-per-subclass inheritance mapping.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_53">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Content {
    ...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class PodCast extends Content {
    ...
    static mapping = {
        discriminator "audio"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_43">Description</h3>
<div class="paragraph">
<p>Usage: <code>discriminator(string/map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>column</code> (optional) - The column name to store the discriminator</p>
</li>
<li>
<p><code>value</code> - The value to use for the discriminator</p>
</li>
<li>
<p><code>formula</code> (optional) - an SQL expression that is executed to evaluate the type of class. Use this or <code>column</code> but not both</p>
</li>
<li>
<p><code>type</code> (optional defaults to string) - the Hibernate type, used for the where clause condition to know if it needs to wrap it with '</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default when mapping inheritance Grails uses a single-table model where all classes share the same table. A discriminator column is used to determine the type for each row, by default the full class name. You can use the <code>discriminator</code> method to customize what&#8217;s stored:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Content {
    ...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class PodCast extends Content {
    ...
    static mapping = {
        discriminator "audio"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also customize the discriminator column name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Content {
    ...
    static mapping = {
        discriminator column: "content_type"
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class PodCast extends Content {
    ...
    static mapping = {
        discriminator value: "audio"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or you can use a formula:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Content {
    ...
    static mapping = {
        discriminator value: "1", type: "integer",
            formula: "case when CLASS_TYPE in ('a', 'b', 'c') then 0 else 1 end",
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class PodCast extends Content {
    ...
    static mapping = {
        discriminator value: "0"
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-dynamicInsert">dynamicInsert</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dynamicinsert">dynamicInsert</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_55">Purpose</h3>
<div class="paragraph">
<p>Whether to dynamically build <code>INSERT</code> queries</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_54">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

    ...
    static mapping = {
        dynamicInsert true
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_44">Description</h3>
<div class="paragraph">
<p>Usage: <code>dynamicInsert(boolean)</code></p>
</div>
<div class="paragraph">
<p>By default Hibernate generates all queries at startup and caches them. This helps performance since insert, update, and delete queries don&#8217;t have to be dynamically generated at runtime. However, there are certain circumstances where dynamic queries are useful.</p>
</div>
<div class="paragraph">
<p>For example if you were using custom <code>UserType</code> to hash passwords, every time an UPDATE occurred, the password would get re-hashed. The <code>dynamicInsert</code> method lets you turn off the dynamic creation of queries that uses only the properties that are needed to perform the insert.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-dynamicUpdate">dynamicUpdate</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dynamicupdate">dynamicUpdate</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_56">Purpose</h3>
<div class="paragraph">
<p>Whether to dynamically build <code>UPDATE</code> queries</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_55">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

    ...

    static mapping = {
        dynamicUpdate true
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_45">Description</h3>
<div class="paragraph">
<p>Usage: <code>dynamicUpdate(boolean)</code></p>
</div>
<div class="paragraph">
<p>By default Hibernate generates all queries at startup and caches them. This helps performance since insert, update, and delete queries don&#8217;t have to be dynamically generated at runtime. However, there are certain circumstances where dynamic queries are useful.</p>
</div>
<div class="paragraph">
<p>For example if you were using custom <code>UserType</code> to hash passwords, every time an UPDATE occurred, the password would get re-hashed. The <code>dynamicUpdate</code> method lets you turn off the dynamic creation of queries that uses only the properties that are needed to perform the update.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-fetch">fetch</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fetch">fetch</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_57">Purpose</h3>
<div class="paragraph">
<p>Configures the fetching behavior of an association.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_56">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {

    static hasMany = [books: Book]

    static mapping = {
        books fetch: 'join'
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_46">Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(fetch:string)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fetchStrategy</code> - The fetching strategy to use. Either <code>join</code> or <code>select</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default GORM assumes fetching of associations is done using a <code>SELECT</code> when the association is accessed. If you prefer that the association be fetched eagerly at the same time then you can override the behavior:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {

    static hasMany = [books: Book]

    static mapping = {
        books fetch: 'join'
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here the <code>books</code> association will be fetched using a join at the same time the author is retrieved, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def author = Author.get(1)
// the books collection is pre-initialized - no risk of lazy loading exceptions</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that excessive use of joins can be a performance bottleneck. See the section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#fetching">Eager vs Lazing Fetching</a> in the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-id">id</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_id">id</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_58">Purpose</h3>
<div class="paragraph">
<p>Customizes the way the identifier for a domain class is generated</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_57">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    static mapping = {
        id generator: 'hilo',
           params: [table: 'hi_value', column: 'next_value', max_lo: 100]
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_47">Description</h3>
<div class="paragraph">
<p>Usage: <code>id(map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>generator</code> (optional) - The name of the generator to use. Can be <code>increment</code>, <code>identity</code>, <code>sequence</code>, <code>hilo</code>, <code>seqhilo</code>, <code>uuid</code>, <code>guid</code>, <code>native</code>, <code>assigned</code>, <code>select</code>, <code>foreign</code> or <code>sequence-identity</code>. See <a href="http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#mapping-declaration-id-generator">Hibernate reference documentation</a> for more information.</p>
</li>
<li>
<p><code>composite</code> (optional) - Takes a list of property names to use that form the composite identifier</p>
</li>
<li>
<p><code>name</code> (optional) - The property name to use as the identifier</p>
</li>
<li>
<p><code>params</code> (optional) - Any parameters to pass to the defined identity generator</p>
</li>
<li>
<p><code>column</code> (optional) - The column name to map the identifier to. The remaining <a href="column.html">column</a> definition properties are also available.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default GORM uses the native strategy to generate a database identifier for each entity (typically an auto-incrementing column or a sequence). You can alter this with the <code>id</code> methods <code>generator</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    id generator: 'hilo',
       params: [table: 'hi_value', column: 'next_value', max_lo: 100]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the method to define a composite identifier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    id composite: ['title', 'author']
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or change the name of the property that defines the identifier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    id name: 'title'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also alter the column definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    id column: 'book_id', type: 'integer'
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#identity">Custom Database Identity</a> in the user guide for more information.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-ignoreNotFound">ignoreNotFound</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ignorenotfound">ignoreNotFound</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_59">Purpose</h3>
<div class="paragraph">
<p>Specifies how foreign keys that reference missing rows are handled in many-to-one relationships.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_58">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class LegacyCdDomain {

    String title
    Thumbnail thumbnail

    static mapping = {
        thumbnail ignoreNotFound: true
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Thumbnail {
    byte[] data
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_48">Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(ignoreNotFound: boolean)</code></p>
</div>
<div class="paragraph">
<p>When the data in the database is corrupt and a foreign key references a non existent record, Hibernate will complain with a "No row with the given identifier exists" message. For example, a <code>LegacyCdDomain</code> record may have a reference to a <code>Thumbnail</code> record with an ID of 1234, but the database may no longer contain a <code>Thumbnail</code> with that ID.</p>
</div>
<div class="paragraph">
<p>One possible way to load such corrupt data is to use the <code>ignoreNotFound</code> mapping option. If you set it to <code>true</code>, Hibernate will treat a missing row as a <code>null</code> association. So in the above example, our <code>LegacyCdDomain</code> instance would load but its <code>thumbnail</code> property would be <code>null</code>. Specifying a value of <code>false</code> for <code>ignoreNotFound</code> will result in Hibernate throwing an <code>org.hibernate.ObjectNotFoundException</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
A dataset loaded with <code>ignoreNotFound: true</code> may throw an exception during <code>save()</code> because of the missing reference!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The default value for this setting is <code>false</code>. It maps to Hibernate&#8217;s <code>not-found</code> property.</p>
</div>
<div class="paragraph">
<p>This settings can be useful if you have a legacy database with unusual behaviour when it comes to referential integrity.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-indexColumn">indexColumn</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_indexcolumn">indexColumn</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_60">Purpose</h3>
<div class="paragraph">
<p>Customizes the index column definition of an indexed collection such as a <code>List</code> or <code>Map</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_59">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Neo {

    static hasMany = [matrix: Integer]

    static mapping = {
        matrix indexColumn: [name: "the_matrix", type: Integer]
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def neo = new Neo()
neo.matrix = [(1): 30, (2): 42, (3): 23]
neo.save(flush: true)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_49">Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(indexColumn:map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name</code> - The name of the column as a String</p>
</li>
<li>
<p><code>type</code> (optional) - The Hibernate <a href="type.html">type</a>.</p>
</li>
<li>
<p><code>sqlType</code> (optional) - The underlying SQL type</p>
</li>
<li>
<p><code>enumType</code> (optional) - The enum type in for type-safe Enum properties. Either <code>ordinal</code> or <code>string</code>.</p>
</li>
<li>
<p><code>index</code> (optional) - The index name</p>
</li>
<li>
<p><code>unique</code> (optional) - Whether it is unique</p>
</li>
<li>
<p><code>length</code> (optional) - The length of the column</p>
</li>
<li>
<p><code>precision</code> (optional) - The precision of the column</p>
</li>
<li>
<p><code>scale</code> (optional) - The scale of the column</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default when mapping an indexed collection such as a <code>Map</code> or <code>List</code> the index is stored in a column called <code>association_name_idx</code> which is an <code>integer</code> type in the case of lists and a String in the case of maps. You can alter how the index column is mapped using the <code>indexColumn</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    matrix indexColumn: [name: "the_matrix", type: Integer]
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-insertable">insertable</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_insertable">insertable</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_61">Purpose</h3>
<div class="paragraph">
<p>Determines whether a property&#8217;s database column is set when a new instance is persisted.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_60">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

    String title

    static belongsTo = [author: Author]

    static mapping = {
        author insertable: false
        author updateable: false
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_50">Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(insertable: boolean)</code></p>
</div>
<div class="paragraph">
<p>Useful in general where you don&#8217;t want to set an initial value (or include the column in the generated SQL) during an initial <code>save()</code>.</p>
</div>
<div class="paragraph">
<p>In particular this is useful for one-to-many relationships. For example when you store the foreign key in the <em>child</em> table, it&#8217;s often efficient to save the child using only the foreign key of the parent. You do this by setting the parent object (and the parent foreign key) in the <em>child</em> entity. Setting the attributes insertable:false and updateable:false for the <em>belongsTo</em> parent object lets you insert and update using only the foreign key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    author insertable: false
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-joinTable">joinTable</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jointable">joinTable</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_62">Purpose</h3>
<div class="paragraph">
<p>Customizes the join table used for undirectional one-to-many, many-to-many and primitive collection types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_61">Examples</h3>
<div class="paragraph">
<p>Basic collection type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

    static hasMany = [chapterPageCounts: Integer]

    static mapping = {
        chapterPageCounts indexColumn: [name: "chapter_number", type: Integer],
                          joinTable: [column: "page_count"]

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enum collection types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">enum VehicleStatus { OFF, IDLING, ACCELERATING, DECELERATING }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Truck {

    static hasMany = [states: VehicleStatus]

    static mapping = {
        states joinTable: [name: 'VEHICLE_STATUS_LOG',
                           key: 'TRUCK_ID', column: 'STATUS']
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Many-to-many:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

    String title

    static belongsTo = Author

    static hasMany = [authors: Author]

    static mapping = {
        authors joinTable: [name: "mm_author_books", key: 'mm_book_id' ]
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Author {

    String name

    static hasMany = [books: Book]

    static mapping = {
        books joinTable: [name: "mm_author_books", key: 'mm_author_id']
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unidirectional One-to-many:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Employee {

    static hasMany = [projects: Project]

    static mapping = {
        projects joinTable: [name: 'EMP_PROJ',
                             column: 'PROJECT_ID',
                             key: 'EMPLOYEE_ID']
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Project {  }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_51">Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(joinTable:map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name</code> - The table name</p>
</li>
<li>
<p><code>key</code> (optional) - The foreign key</p>
</li>
<li>
<p><code>column</code> (optional) - The inverse column</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>GORM has various strategies for mapping association types. Some of them, such as basic collection types and many-to-many associations, use a join table. You can customize how this join table is created using the <code>joinTable</code> argument.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-lazy">lazy</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lazy">lazy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_63">Purpose</h3>
<div class="paragraph">
<p>Configures whether to use proxies and lazy loading for one-to-one and many-to-one associations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_62">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

    static belongsTo = [author: Author]

    static mapping = {
        author lazy: false
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_52">Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(lazy: boolean)</code></p>
</div>
<div class="paragraph">
<p>By default GORM single-ended associations are lazy in that when you load a domain instance, an associated domain is not loaded until accessed. Hibernate creates a dynamic proxy by subclassing the domain class and proxying all methods and property access.</p>
</div>
<div class="paragraph">
<p>This can have some strange side effects (see <a href="http://www.hibernate.org/280.html">this page</a> on proxies at the Hibernate site) particularly in relation to inheritance. You can tell Hibernate not use proxies for single-ended associations by using the <code>lazy</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    author lazy: false
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#fetching">Eager vs Lazing Fetching</a> in the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-order">order</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_order">order</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_64">Purpose</h3>
<div class="paragraph">
<p>Customizes the default sort order of query results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_63">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    ...
    static mapping = {
        order "desc"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_53">Description</h3>
<div class="paragraph">
<p>Usage: <code>order(string)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>direction</code> - Either "desc" or "asc" for descending and ascending respectively.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By defaults results are sorted in ascending order. With the <code>order</code> method you can alter results to be sorted in descending order. See also the <a href="sort.html">sort</a> method.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-sort">sort</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sort">sort</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_65">Purpose</h3>
<div class="paragraph">
<p>Customizes the default property to sort by for query results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_64">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    ...
    static mapping = {
        sort "releaseDate"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_54">Description</h3>
<div class="paragraph">
<p>Usage: <code>sort(string/map)</code></p>
</div>
<div class="paragraph">
<p>By default results are sorted by creation date, and you can specify the column to order by in a query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">def results = Book.list(sort:"title")</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, you can also configure the default sort property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    sort "title"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>in which case the <code>sort</code> argument is no longer needed. You can also control the sort order:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    sort title: "desc" // or "asc"
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-table">table</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_table映射">table映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_33">目的</h3>
<div class="paragraph">
<p>自定义的domain类关联的数据库表的名称</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_32">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    static mapping = {
        table "book_catalog"
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_30">描述</h3>
<div class="paragraph">
<p>Usage: <code>table(string/map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name</code> - 表的名称</p>
</li>
<li>
<p><code>schema</code> (可选) - 表的schema</p>
</li>
<li>
<p><code>catalog</code> (可选) - 表的catalog</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>默认情况下，domain类的表的映射名字是基于类的名字。GORM将类名的java风格驼峰格式映射为表名时，使用下划线隔离。例如` productreview <code>成为</code> product_review `。你可以用`table`方法重写表名:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    table "book_catalog"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>也可以指定 schema 和 catalog名称:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    table name: "book_catalog", schema: "dbo", catalog: "CRM"
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-type">type</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_type">type</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_66">Purpose</h3>
<div class="paragraph">
<p>Configures the Hibernate type for a particular property.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_65">Examples</h3>
<div class="paragraph">
<p>Changing to a text type (CLOB or TEXT depending on database dialect):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

    String title

    static mapping = {
        title type: "text"
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>User types with multiple columns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    ...
    MonetaryAmount amount

    static mapping = {
        amount type: MonetaryUserType, {
            column name: "value"
            column name: "currency", sqlType: "char", length: 3
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_55">Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(type:string/class)</code></p>
</div>
<div class="paragraph">
<p>Hibernate will attempt to automatically select the appropriate database type from the field typed based on configuration in the <code>Dialect</code> class that is being used. But you can override the defaults if necessary. For example <code>String</code> values are mapped by default to <code>varchar(255)</code> columns. To store larger <code>String</code> values you can use a <code>text</code> type instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    title type: "text"
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hibernate also has the concept of custom <code>UserType</code> implementations. In this case you specify the <code>UserType</code> class. If the <code>UserType</code> maps to multiple columns you may need to specify a mapping for each column:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    amount type: MonetaryUserType, {
        column name: "value"
        column name: "currency", sqlType: "char", length: 3
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-updateable">updateable</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_updateable映射">updateable映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_67">Purpose</h3>
<div class="paragraph">
<p>Determines whether a property&#8217;s database column is updated when persistent instances are updated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_66">Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {

    String title

    static belongsTo = [author: Author]

    static mapping = {
        author insertable: false
        author updateable: false
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_56">Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(updateable: boolean)</code></p>
</div>
<div class="paragraph">
<p>Useful in general where you don&#8217;t want to update a value (or include the column in the generated SQL) during a <code>save()</code>.</p>
</div>
<div class="paragraph">
<p>In particular this is useful for one-to-many relationships. For example when you store the foreign key in the <em>child</em> table, it&#8217;s often efficient to save the child using only the foreign key of the parent. You do this by setting the parent object (and the parent foreign key) in the <em>child</em> entity. Setting the attributes insertable:false and updateable:false for the <em>belongsTo</em> parent object lets you insert and update using only the foreign key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    author updateable: false
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-version">version</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version映射">version映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_34">目的</h3>
<div class="paragraph">
<p>用于禁用乐观锁定或更改保持版本的列.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_33">示例</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">class Book {
    ...
    static mapping = {
        version false
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_31">描述</h3>
<div class="paragraph">
<p>Usage: <code>version(string/boolean)</code></p>
</div>
<div class="paragraph">
<p>默认情况下，GORM配置 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#locking">optimistic locking</a> 启用. 可以通过设置 <code>version</code> 方法的 `false`参数来禁用:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    version false
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>可以将名称传递到 `version`方法以更改数据库列的名称:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-groovy" data-lang="groovy">static mapping = {
    version 'revision_number'
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>