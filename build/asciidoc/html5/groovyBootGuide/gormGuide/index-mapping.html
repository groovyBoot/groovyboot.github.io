<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="author" content="作者： Graeme Rocher, Peter Ledbrook, Marc Palmer, Jeff Brown, Luke Daley, Burt Beckwith, Lari Hotari">
<title>The GORM mapping的数据库映射dsl介绍</title>

<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>The GORM mapping的数据库映射dsl介绍</h1>
<div class="details">
<span id="author" class="author">作者： Graeme Rocher, Peter Ledbrook, Marc Palmer, Jeff Brown, Luke Daley, Burt Beckwith, Lari Hotari</span><br>
<span id="revdate">翻译： 肖鹏 孙鹏飞 于雷 梁宏艺 马飚</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#_database_mapping_用法">1. Database Mapping 用法</a></li>
<li><a href="#_autoimport映射">2. autoImport映射</a>
<ul class="sectlevel2">
<li><a href="#_目的">2.1. 目的</a></li>
<li><a href="#_示例">2.2. 示例</a></li>
<li><a href="#_描述">2.3. 描述</a></li>
</ul>
</li>
<li><a href="#_autotimestamp映射">3. autoTimestamp映射</a>
<ul class="sectlevel2">
<li><a href="#_目的_2">3.1. 目的</a></li>
<li><a href="#_示例_2">3.2. 示例</a></li>
<li><a href="#_描述_2">3.3. 描述</a></li>
</ul>
</li>
<li><a href="#_batchsize映射">4. batchSize映射</a>
<ul class="sectlevel2">
<li><a href="#_目的_3">4.1. 目的</a></li>
<li><a href="#_示例_3">4.2. 示例</a></li>
<li><a href="#_描述_3">4.3. 描述</a></li>
</ul>
</li>
<li><a href="#_cache映射">5. cache映射</a>
<ul class="sectlevel2">
<li><a href="#_目的_4">5.1. 目的</a></li>
<li><a href="#_示例_4">5.2. 示例</a></li>
<li><a href="#_示例_5">5.3. 示例</a></li>
</ul>
</li>
<li><a href="#_cascade映射">6. cascade映射</a>
<ul class="sectlevel2">
<li><a href="#_目的_5">6.1. 目的</a></li>
<li><a href="#_示例_6">6.2. 示例</a></li>
<li><a href="#_描述_4">6.3. 描述</a></li>
</ul>
</li>
<li><a href="#_column映射">7. column映射</a>
<ul class="sectlevel2">
<li><a href="#_目的_6">7.1. 目的</a></li>
<li><a href="#_示例_7">7.2. 示例</a></li>
<li><a href="#_描述_5">7.3. 描述</a></li>
</ul>
</li>
<li><a href="#_comment映射">8. comment映射</a>
<ul class="sectlevel2">
<li><a href="#_目的_7">8.1. 目的</a></li>
<li><a href="#_示例_8">8.2. 示例</a></li>
<li><a href="#_描述_6">8.3. 描述</a></li>
</ul>
</li>
<li><a href="#_discriminator">9. discriminator</a>
<ul class="sectlevel2">
<li><a href="#_purpose">9.1. Purpose</a></li>
<li><a href="#_examples">9.2. Examples</a></li>
<li><a href="#_description">9.3. Description</a></li>
</ul>
</li>
<li><a href="#_dynamicinsert">10. dynamicInsert</a>
<ul class="sectlevel2">
<li><a href="#_purpose_2">10.1. Purpose</a></li>
<li><a href="#_examples_2">10.2. Examples</a></li>
<li><a href="#_description_2">10.3. Description</a></li>
</ul>
</li>
<li><a href="#_dynamicupdate">11. dynamicUpdate</a>
<ul class="sectlevel2">
<li><a href="#_purpose_3">11.1. Purpose</a></li>
<li><a href="#_examples_3">11.2. Examples</a></li>
<li><a href="#_description_3">11.3. Description</a></li>
</ul>
</li>
<li><a href="#_fetch">12. fetch</a>
<ul class="sectlevel2">
<li><a href="#_purpose_4">12.1. Purpose</a></li>
<li><a href="#_examples_4">12.2. Examples</a></li>
<li><a href="#_description_4">12.3. Description</a></li>
</ul>
</li>
<li><a href="#_id">13. id</a>
<ul class="sectlevel2">
<li><a href="#_purpose_5">13.1. Purpose</a></li>
<li><a href="#_examples_5">13.2. Examples</a></li>
<li><a href="#_description_5">13.3. Description</a></li>
</ul>
</li>
<li><a href="#_ignorenotfound">14. ignoreNotFound</a>
<ul class="sectlevel2">
<li><a href="#_purpose_6">14.1. Purpose</a></li>
<li><a href="#_examples_6">14.2. Examples</a></li>
<li><a href="#_description_6">14.3. Description</a></li>
</ul>
</li>
<li><a href="#_indexcolumn">15. indexColumn</a>
<ul class="sectlevel2">
<li><a href="#_purpose_7">15.1. Purpose</a></li>
<li><a href="#_examples_7">15.2. Examples</a></li>
<li><a href="#_description_7">15.3. Description</a></li>
</ul>
</li>
<li><a href="#_insertable">16. insertable</a>
<ul class="sectlevel2">
<li><a href="#_purpose_8">16.1. Purpose</a></li>
<li><a href="#_examples_8">16.2. Examples</a></li>
<li><a href="#_description_8">16.3. Description</a></li>
</ul>
</li>
<li><a href="#_jointable">17. joinTable</a>
<ul class="sectlevel2">
<li><a href="#_purpose_9">17.1. Purpose</a></li>
<li><a href="#_examples_9">17.2. Examples</a></li>
<li><a href="#_description_9">17.3. Description</a></li>
</ul>
</li>
<li><a href="#_lazy">18. lazy</a>
<ul class="sectlevel2">
<li><a href="#_purpose_10">18.1. Purpose</a></li>
<li><a href="#_examples_10">18.2. Examples</a></li>
<li><a href="#_description_10">18.3. Description</a></li>
</ul>
</li>
<li><a href="#_order">19. order</a>
<ul class="sectlevel2">
<li><a href="#_purpose_11">19.1. Purpose</a></li>
<li><a href="#_examples_11">19.2. Examples</a></li>
<li><a href="#_description_11">19.3. Description</a></li>
</ul>
</li>
<li><a href="#_sort">20. sort</a>
<ul class="sectlevel2">
<li><a href="#_purpose_12">20.1. Purpose</a></li>
<li><a href="#_examples_12">20.2. Examples</a></li>
<li><a href="#_description_12">20.3. Description</a></li>
</ul>
</li>
<li><a href="#_table映射">21. table映射</a>
<ul class="sectlevel2">
<li><a href="#_目的_8">21.1. 目的</a></li>
<li><a href="#_示例_9">21.2. 示例</a></li>
<li><a href="#_描述_7">21.3. 描述</a></li>
</ul>
</li>
<li><a href="#_type">22. type</a>
<ul class="sectlevel2">
<li><a href="#_purpose_13">22.1. Purpose</a></li>
<li><a href="#_examples_13">22.2. Examples</a></li>
<li><a href="#_description_13">22.3. Description</a></li>
</ul>
</li>
<li><a href="#_updateable映射">23. updateable映射</a>
<ul class="sectlevel2">
<li><a href="#_purpose_14">23.1. Purpose</a></li>
<li><a href="#_examples_14">23.2. Examples</a></li>
<li><a href="#_description_14">23.3. Description</a></li>
</ul>
</li>
<li><a href="#_version映射">24. version映射</a>
<ul class="sectlevel2">
<li><a href="#_目的_9">24.1. 目的</a></li>
<li><a href="#_示例_10">24.2. 示例</a></li>
<li><a href="#_描述_8">24.3. 描述</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>注:本文档只针对spring boot工程使用的情况有针对性的翻译,完整版本请登录GORM的github官网浏览</p>
</div>
<div class="paragraph">
<p>[[Database Mapping介绍]]
== 数据库映射mapping介绍</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_database_mapping_用法">1. Database Mapping 用法</h3>
<div class="paragraph">
<p>默认情况下domain类映射到数据库的方式，使用合理的默认值.可以使用ORM Mapping DSL来定制.例如下面的`Book` domain:</p>
</div>
<div class="paragraph">
<p>And then you can use the <code>mapping</code> block to customize the ORM mapping behavior.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">grails.persistence.Entity</span>;
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>
<span class="annotation">@Entity</span>
<span class="type">class</span> <span class="class">Book</span> <span class="directive">implements</span> GormEntity&lt;<span class="predefined-type">Book</span>&gt;{
    <span class="predefined-type">String</span> title;
    <span class="predefined-type">Date</span> releaseDate;
    Author author;
    <span class="directive">static</span> mapping = {
        table (<span class="key">name</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">book_table</span><span class="delimiter">&quot;</span></span>)
        comment <span class="string"><span class="delimiter">&quot;</span><span class="content">图书表</span><span class="delimiter">&quot;</span></span>
        author <span class="key">column</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">auth_id</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>参看 <a href="../GORM.html">GORM</a> 了解更多.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-autoImport">1.1. autoImport</h4>

</div>
</div>
<div class="sect1">
<h2 id="_autoimport映射">2. autoImport映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的">2.1. 目的</h3>
<div class="paragraph">
<p>在当前domain类的 HQL 查询中 Enable/disable auto import .</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例">2.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    ...
    static mapping = {
        autoImport <span class="predefined-constant">false</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述">2.3. 描述</h3>
<div class="paragraph">
<p>Usage: <code>autoImport(boolean)</code></p>
</div>
<div class="paragraph">
<p>默认情况下，domain类在HQL查询是auto-imported，因此，您不需要指定整个类名（包括包），但是，如果在不同的包中有重复的domain类名，则名称不再是唯一的，会造成`org.hibernate.DuplicateMappingException`错误。禁用其中一个或两个domain类的自动导入来修复此错误，设置`autoImport` 为 <code>false</code>。记住，你需要在HQL的查询中使用完全的domain类名引用。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    autoImport <span class="predefined-constant">false</span>
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-autoTimestamp">2.3.1. autoTimestamp</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_autotimestamp映射">3. autoTimestamp映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_2">3.1. 目的</h3>
<div class="paragraph">
<p>设置为false时，关闭自动时间戳功能</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_2">3.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    ...
    static mapping = {
        autoTimestamp <span class="predefined-constant">false</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_2">3.3. 描述</h3>
<div class="paragraph">
<p>Usage: <code>autoTimestamp(boolean)</code></p>
</div>
<div class="paragraph">
<p>缺省当domain类中的属性名为 <code>dateCreated</code> 和 <code>lastUpdated</code> , GORM会在数据库自定维护这两个字段。可以通过设置为false关闭此功能:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    autoTimestamp <span class="predefined-constant">false</span>
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-batchSize">3.3.1. batchSize</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_batchsize映射">4. batchSize映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_3">4.1. 目的</h3>
<div class="paragraph">
<p>定制多少结果获取在懒加载执行时.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_3">4.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    ...
    static mapping = {
        batchSize <span class="integer">10</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_3">4.3. 描述</h3>
<div class="paragraph">
<p>Usage: <code>batchSize(integer)</code></p>
</div>
<div class="paragraph">
<p>针对`Author` 类拥有多个 <code>Book`实例的延迟加载关联。GORM将执行一条查询`Author`和附加查询多条关联`Book`实例。
这就是著名的N+1问题，通常使用表连接处理，然而，关联表会消耗性能。
批量加载是针对延迟加载的一个优化方案，例如设置`batchSize`为10，并且当前作者拥有30本书.
系统将执行四次获取（一次`Author</code>，3次批量10对象的获取），替换之前的31此获取:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    batchSize <span class="integer">10</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>也可以在关联端设置 <code>batchSize</code> :</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {

    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]

    <span class="directive">static</span> mapping = {
        books <span class="key">batchSize</span>: <span class="integer">10</span>
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-cache">4.3.1. cache</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cache映射">5. cache映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_4">5.1. 目的</h3>
<div class="paragraph">
<p>配置domain类支持Hibernate二级缓存.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_4">5.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    ...
    static mapping = {
        cache <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_示例_5">5.3. 示例</h3>
<div class="paragraph">
<p>Usage: <code>cache(boolean/string/map)</code></p>
</div>
<div class="paragraph">
<p>参数:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cache</code> - 缓存使用. 可被设置为 <code>read-only</code>, <code>read-write</code>, <code>nonstrict-read-write</code> 或 <code>transactional</code></p>
</li>
<li>
<p><code>include</code> (optional) - 是否包含非延迟加载关联项。可被设置为 <code>all</code> 或 <code>non-lazy</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>示例:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    cache <span class="predefined-constant">true</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>这将配置domain类使用&#8217;read-write' 缓存，需要提前确认配置的缓存政策被允许使用（缓存引擎提供支持）:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    cache <span class="string"><span class="delimiter">'</span><span class="content">transactional</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    cache <span class="key">usage</span>: <span class="string"><span class="delimiter">'</span><span class="content">read-only</span><span class="delimiter">'</span></span>, <span class="key">include</span>: <span class="string"><span class="delimiter">'</span><span class="content">non-lazy</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>也可以在关联端设置缓存:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {

    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]

    <span class="directive">static</span> mapping = {
        books <span class="key">cache</span>: <span class="predefined-constant">true</span> <span class="comment">// or 'read-write' etc.</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>参照文档获取更多信息 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#caching">Caching</a> .</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-cascade">5.3.1. cascade</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cascade映射">6. cascade映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_5">6.1. 目的</h3>
<div class="paragraph">
<p>配置关联项的级联操作</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_6">6.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {

    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]

    <span class="directive">static</span> mapping = {
        books <span class="key">cascade</span>: <span class="string"><span class="delimiter">'</span><span class="content">all-delete-orphan</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_4">6.3. 描述</h3>
<div class="paragraph">
<p>Usage: <code>association_name(cascade:string)</code></p>
</div>
<div class="paragraph">
<p>参数:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cascade</code> - 定义级联行为. 可被设置为一个或多个 (comma-separated逗号分隔) of <code>all</code>, <code>merge</code>, <code>save-update</code>, <code>delete</code>, <code>lock</code>, <code>refresh</code>, <code>evict</code>, <code>replicate</code> or <code>all-delete-orphan</code> (one-to-many只支持一对多关系).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>默认GORM会配置"belongs to"属性对象的级联操作为"all"，示例如下:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="directive">static</span> belongsTo = [<span class="key">author</span>: Author]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {
    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>所以的持久化操作都会从`Author` 类传递到 <code>Book</code> 类。作者对象删除将导致关联的图书全部删除。</p>
</div>
<div class="paragraph">
<p>如果关联没有设置所有者("belongs to" 关联关系):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {
    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>GORM默认使用"save-update"级联策略. 作者对象删除时，不会级联删除关联的图书。
使用`cascade`参数自定义级联行为:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {

    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]

    <span class="directive">static</span> mapping = {
        books <span class="key">cascade</span>: <span class="string"><span class="delimiter">'</span><span class="content">all-delete-orphan</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>以上配置，`Book`当成为孤儿(orphaned) 时会被删除。.</p>
</div>
<div class="paragraph">
<p>参看文档获取更多信息 <a href="http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/objectstate.html#objectstate-transitive">transitive persistence</a> .</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-column">6.3.1. column</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_column映射">7. column映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_6">7.1. 目的</h3>
<div class="paragraph">
<p>自定义数据列的设置</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_7">7.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
        currency <span class="key">column</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">currency</span><span class="delimiter">&quot;</span></span>, <span class="key">sqlType</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">char</span><span class="delimiter">&quot;</span></span>, <span class="key">length</span>: <span class="integer">3</span>
    }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_5">7.3. 描述</h3>
<div class="paragraph">
<p>Usage: <code>property_name(map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>column</code> - The name of the column as a String</p>
</li>
<li>
<p><code>sqlType</code> (optional) - The underlying SQL type</p>
</li>
<li>
<p><code>enumType</code> (optional) - The enum type in for type-safe Enum properties. Either <code>ordinal</code> or <code>string</code>.</p>
</li>
<li>
<p><code>index</code> (optional) - The index name</p>
</li>
<li>
<p><code>unique</code> (optional) - Whether it is unique</p>
</li>
<li>
<p><code>length</code> (optional) - The length of the column</p>
</li>
<li>
<p><code>precision</code> (optional) - The precision of the column</p>
</li>
<li>
<p><code>scale</code> (optional) - The scale of the column</p>
</li>
<li>
<p><code>comment</code> (optional) - The comment for the column (used to create the table DDL)</p>
</li>
<li>
<p><code>defaultValue</code> (optional) - The database default value</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default GORM uses the property name and type to determine how to map a property in the database. For example a <code>String</code> property is typically mapped as a <code>varchar(255)</code> column. You can customize these with column configuration arguments:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    currency <span class="key">column</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">currency</span><span class="delimiter">&quot;</span></span>, <span class="key">sqlType</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">char</span><span class="delimiter">&quot;</span></span>, <span class="key">length</span>: <span class="integer">3</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you use a Hibernate <a href="type.html">type</a> that requires multiple column definitions you can use the <code>column</code> method to define each column:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    amount <span class="key">type</span>: MonetaryUserType, {
        column <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>
        column <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">currency</span><span class="delimiter">&quot;</span></span>, <span class="key">sqlType</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">char</span><span class="delimiter">&quot;</span></span>, <span class="key">length</span>: <span class="integer">3</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that if you have a static method that is the same name as one of your properties you are trying to configure or you use the same property name as one of the static GORM methods this can lead to conflicts. To avoid this scenario scope the mapping configuration using the <code>delegate</code> property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    delegate.currency <span class="key">column</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">currency</span><span class="delimiter">&quot;</span></span>, <span class="key">sqlType</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">char</span><span class="delimiter">&quot;</span></span>, <span class="key">length</span>: <span class="integer">3</span>
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-comment">7.3.1. comment</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comment映射">8. comment映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_7">8.1. 目的</h3>
<div class="paragraph">
<p>设置生成表创建sql(DDL)时使用的注释.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_8">8.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
   <span class="directive">static</span> mapping = {
      comment <span class="string"><span class="delimiter">&quot;</span><span class="content">your comment here</span><span class="delimiter">&quot;</span></span>
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_6">8.3. 描述</h3>
<div class="paragraph">
<p>Usage: <code>comment(string)</code></p>
</div>
<div class="paragraph">
<p>参数:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>comment</code> - 具体注释</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-discriminator">8.3.1. discriminator</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_discriminator">9. discriminator</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose">9.1. Purpose</h3>
<div class="paragraph">
<p>Customizes the discriminator column used in table-per-hierarchy inheritance mapping. Has no effect when using table-per-subclass inheritance mapping.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples">9.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Content</span> {
    ...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">PodCast</span> <span class="directive">extends</span> Content {
    ...
    static mapping = {
        discriminator <span class="string"><span class="delimiter">&quot;</span><span class="content">audio</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description">9.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>discriminator(string/map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>column</code> (optional) - The column name to store the discriminator</p>
</li>
<li>
<p><code>value</code> - The value to use for the discriminator</p>
</li>
<li>
<p><code>formula</code> (optional) - an SQL expression that is executed to evaluate the type of class. Use this or <code>column</code> but not both</p>
</li>
<li>
<p><code>type</code> (optional defaults to string) - the Hibernate type, used for the where clause condition to know if it needs to wrap it with '</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default when mapping inheritance Grails uses a single-table model where all classes share the same table. A discriminator column is used to determine the type for each row, by default the full class name. You can use the <code>discriminator</code> method to customize what&#8217;s stored:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Content</span> {
    ...
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">PodCast</span> <span class="directive">extends</span> Content {
    ...
    static mapping = {
        discriminator <span class="string"><span class="delimiter">&quot;</span><span class="content">audio</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also customize the discriminator column name:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Content</span> {
    ...
    static mapping = {
        discriminator <span class="key">column</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">content_type</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">PodCast</span> <span class="directive">extends</span> Content {
    ...
    static mapping = {
        discriminator <span class="key">value</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">audio</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or you can use a formula:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Content</span> {
    ...
    static mapping = {
        discriminator <span class="key">value</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">integer</span><span class="delimiter">&quot;</span></span>,
            <span class="key">formula</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">case when CLASS_TYPE in ('a', 'b', 'c') then 0 else 1 end</span><span class="delimiter">&quot;</span></span>,
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">PodCast</span> <span class="directive">extends</span> Content {
    ...
    static mapping = {
        discriminator <span class="key">value</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">0</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-dynamicInsert">9.3.1. dynamicInsert</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dynamicinsert">10. dynamicInsert</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_2">10.1. Purpose</h3>
<div class="paragraph">
<p>Whether to dynamically build <code>INSERT</code> queries</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_2">10.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

    ...
    static mapping = {
        dynamicInsert <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_2">10.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>dynamicInsert(boolean)</code></p>
</div>
<div class="paragraph">
<p>By default Hibernate generates all queries at startup and caches them. This helps performance since insert, update, and delete queries don&#8217;t have to be dynamically generated at runtime. However, there are certain circumstances where dynamic queries are useful.</p>
</div>
<div class="paragraph">
<p>For example if you were using custom <code>UserType</code> to hash passwords, every time an UPDATE occurred, the password would get re-hashed. The <code>dynamicInsert</code> method lets you turn off the dynamic creation of queries that uses only the properties that are needed to perform the insert.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-dynamicUpdate">10.3.1. dynamicUpdate</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dynamicupdate">11. dynamicUpdate</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_3">11.1. Purpose</h3>
<div class="paragraph">
<p>Whether to dynamically build <code>UPDATE</code> queries</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_3">11.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

    ...

    static mapping = {
        dynamicUpdate <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_3">11.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>dynamicUpdate(boolean)</code></p>
</div>
<div class="paragraph">
<p>By default Hibernate generates all queries at startup and caches them. This helps performance since insert, update, and delete queries don&#8217;t have to be dynamically generated at runtime. However, there are certain circumstances where dynamic queries are useful.</p>
</div>
<div class="paragraph">
<p>For example if you were using custom <code>UserType</code> to hash passwords, every time an UPDATE occurred, the password would get re-hashed. The <code>dynamicUpdate</code> method lets you turn off the dynamic creation of queries that uses only the properties that are needed to perform the update.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-fetch">11.3.1. fetch</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fetch">12. fetch</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_4">12.1. Purpose</h3>
<div class="paragraph">
<p>Configures the fetching behavior of an association.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_4">12.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {

    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]

    <span class="directive">static</span> mapping = {
        books <span class="key">fetch</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_4">12.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(fetch:string)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fetchStrategy</code> - The fetching strategy to use. Either <code>join</code> or <code>select</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default GORM assumes fetching of associations is done using a <code>SELECT</code> when the association is accessed. If you prefer that the association be fetched eagerly at the same time then you can override the behavior:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {

    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]

    <span class="directive">static</span> mapping = {
        books <span class="key">fetch</span>: <span class="string"><span class="delimiter">'</span><span class="content">join</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here the <code>books</code> association will be fetched using a join at the same time the author is retrieved, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> author = Author.get(<span class="integer">1</span>)
<span class="comment">// the books collection is pre-initialized - no risk of lazy loading exceptions</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Note that excessive use of joins can be a performance bottleneck. See the section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#fetching">Eager vs Lazing Fetching</a> in the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-id">12.3.1. id</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_id">13. id</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_5">13.1. Purpose</h3>
<div class="paragraph">
<p>Customizes the way the identifier for a domain class is generated</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_5">13.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="directive">static</span> mapping = {
        id <span class="key">generator</span>: <span class="string"><span class="delimiter">'</span><span class="content">hilo</span><span class="delimiter">'</span></span>,
           <span class="key">params</span>: [<span class="key">table</span>: <span class="string"><span class="delimiter">'</span><span class="content">hi_value</span><span class="delimiter">'</span></span>, <span class="key">column</span>: <span class="string"><span class="delimiter">'</span><span class="content">next_value</span><span class="delimiter">'</span></span>, <span class="key">max_lo</span>: <span class="integer">100</span>]
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_5">13.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>id(map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>generator</code> (optional) - The name of the generator to use. Can be <code>increment</code>, <code>identity</code>, <code>sequence</code>, <code>hilo</code>, <code>seqhilo</code>, <code>uuid</code>, <code>guid</code>, <code>native</code>, <code>assigned</code>, <code>select</code>, <code>foreign</code> or <code>sequence-identity</code>. See <a href="http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#mapping-declaration-id-generator">Hibernate reference documentation</a> for more information.</p>
</li>
<li>
<p><code>composite</code> (optional) - Takes a list of property names to use that form the composite identifier</p>
</li>
<li>
<p><code>name</code> (optional) - The property name to use as the identifier</p>
</li>
<li>
<p><code>params</code> (optional) - Any parameters to pass to the defined identity generator</p>
</li>
<li>
<p><code>column</code> (optional) - The column name to map the identifier to. The remaining <a href="column.html">column</a> definition properties are also available.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default GORM uses the native strategy to generate a database identifier for each entity (typically an auto-incrementing column or a sequence). You can alter this with the <code>id</code> methods <code>generator</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    id <span class="key">generator</span>: <span class="string"><span class="delimiter">'</span><span class="content">hilo</span><span class="delimiter">'</span></span>,
       <span class="key">params</span>: [<span class="key">table</span>: <span class="string"><span class="delimiter">'</span><span class="content">hi_value</span><span class="delimiter">'</span></span>, <span class="key">column</span>: <span class="string"><span class="delimiter">'</span><span class="content">next_value</span><span class="delimiter">'</span></span>, <span class="key">max_lo</span>: <span class="integer">100</span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the method to define a composite identifier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    id <span class="key">composite</span>: [<span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or change the name of the property that defines the identifier:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    id <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also alter the column definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    id <span class="key">column</span>: <span class="string"><span class="delimiter">'</span><span class="content">book_id</span><span class="delimiter">'</span></span>, <span class="key">type</span>: <span class="string"><span class="delimiter">'</span><span class="content">integer</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#identity">Custom Database Identity</a> in the user guide for more information.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-ignoreNotFound">13.3.1. ignoreNotFound</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ignorenotfound">14. ignoreNotFound</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_6">14.1. Purpose</h3>
<div class="paragraph">
<p>Specifies how foreign keys that reference missing rows are handled in many-to-one relationships.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_6">14.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">LegacyCdDomain</span> {

    <span class="predefined-type">String</span> title
    Thumbnail thumbnail

    <span class="directive">static</span> mapping = {
        thumbnail <span class="key">ignoreNotFound</span>: <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Thumbnail</span> {
    <span class="type">byte</span><span class="type">[]</span> data
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_6">14.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(ignoreNotFound: boolean)</code></p>
</div>
<div class="paragraph">
<p>When the data in the database is corrupt and a foreign key references a non existent record, Hibernate will complain with a "No row with the given identifier exists" message. For example, a <code>LegacyCdDomain</code> record may have a reference to a <code>Thumbnail</code> record with an ID of 1234, but the database may no longer contain a <code>Thumbnail</code> with that ID.</p>
</div>
<div class="paragraph">
<p>One possible way to load such corrupt data is to use the <code>ignoreNotFound</code> mapping option. If you set it to <code>true</code>, Hibernate will treat a missing row as a <code>null</code> association. So in the above example, our <code>LegacyCdDomain</code> instance would load but its <code>thumbnail</code> property would be <code>null</code>. Specifying a value of <code>false</code> for <code>ignoreNotFound</code> will result in Hibernate throwing an <code>org.hibernate.ObjectNotFoundException</code>.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
A dataset loaded with <code>ignoreNotFound: true</code> may throw an exception during <code>save()</code> because of the missing reference!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The default value for this setting is <code>false</code>. It maps to Hibernate&#8217;s <code>not-found</code> property.</p>
</div>
<div class="paragraph">
<p>This settings can be useful if you have a legacy database with unusual behaviour when it comes to referential integrity.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-indexColumn">14.3.1. indexColumn</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_indexcolumn">15. indexColumn</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_7">15.1. Purpose</h3>
<div class="paragraph">
<p>Customizes the index column definition of an indexed collection such as a <code>List</code> or <code>Map</code></p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_7">15.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Neo</span> {

    <span class="directive">static</span> hasMany = [<span class="key">matrix</span>: <span class="predefined-type">Integer</span>]

    <span class="directive">static</span> mapping = {
        matrix <span class="key">indexColumn</span>: [<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">the_matrix</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>: <span class="predefined-type">Integer</span>]
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> neo = <span class="keyword">new</span> Neo()
neo.matrix = [(<span class="integer">1</span>): <span class="integer">30</span>, (<span class="integer">2</span>): <span class="integer">42</span>, (<span class="integer">3</span>): <span class="integer">23</span>]
neo.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_7">15.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(indexColumn:map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name</code> - The name of the column as a String</p>
</li>
<li>
<p><code>type</code> (optional) - The Hibernate <a href="type.html">type</a>.</p>
</li>
<li>
<p><code>sqlType</code> (optional) - The underlying SQL type</p>
</li>
<li>
<p><code>enumType</code> (optional) - The enum type in for type-safe Enum properties. Either <code>ordinal</code> or <code>string</code>.</p>
</li>
<li>
<p><code>index</code> (optional) - The index name</p>
</li>
<li>
<p><code>unique</code> (optional) - Whether it is unique</p>
</li>
<li>
<p><code>length</code> (optional) - The length of the column</p>
</li>
<li>
<p><code>precision</code> (optional) - The precision of the column</p>
</li>
<li>
<p><code>scale</code> (optional) - The scale of the column</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default when mapping an indexed collection such as a <code>Map</code> or <code>List</code> the index is stored in a column called <code>association_name_idx</code> which is an <code>integer</code> type in the case of lists and a String in the case of maps. You can alter how the index column is mapped using the <code>indexColumn</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    matrix <span class="key">indexColumn</span>: [<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">the_matrix</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>: <span class="predefined-type">Integer</span>]
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-insertable">15.3.1. insertable</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_insertable">16. insertable</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_8">16.1. Purpose</h3>
<div class="paragraph">
<p>Determines whether a property&#8217;s database column is set when a new instance is persisted.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_8">16.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

    <span class="predefined-type">String</span> title

    <span class="directive">static</span> belongsTo = [<span class="key">author</span>: Author]

    <span class="directive">static</span> mapping = {
        author <span class="key">insertable</span>: <span class="predefined-constant">false</span>
        author <span class="key">updateable</span>: <span class="predefined-constant">false</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_8">16.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(insertable: boolean)</code></p>
</div>
<div class="paragraph">
<p>Useful in general where you don&#8217;t want to set an initial value (or include the column in the generated SQL) during an initial <code>save()</code>.</p>
</div>
<div class="paragraph">
<p>In particular this is useful for one-to-many relationships. For example when you store the foreign key in the <em>child</em> table, it&#8217;s often efficient to save the child using only the foreign key of the parent. You do this by setting the parent object (and the parent foreign key) in the <em>child</em> entity. Setting the attributes insertable:false and updateable:false for the <em>belongsTo</em> parent object lets you insert and update using only the foreign key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    author <span class="key">insertable</span>: <span class="predefined-constant">false</span>
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-joinTable">16.3.1. joinTable</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_jointable">17. joinTable</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_9">17.1. Purpose</h3>
<div class="paragraph">
<p>Customizes the join table used for undirectional one-to-many, many-to-many and primitive collection types.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_9">17.2. Examples</h3>
<div class="paragraph">
<p>Basic collection type:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

    <span class="directive">static</span> hasMany = [<span class="key">chapterPageCounts</span>: <span class="predefined-type">Integer</span>]

    <span class="directive">static</span> mapping = {
        chapterPageCounts <span class="key">indexColumn</span>: [<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">chapter_number</span><span class="delimiter">&quot;</span></span>, <span class="key">type</span>: <span class="predefined-type">Integer</span>],
                          <span class="key">joinTable</span>: [<span class="key">column</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">page_count</span><span class="delimiter">&quot;</span></span>]

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Enum collection types:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">enum</span> VehicleStatus { OFF, IDLING, ACCELERATING, DECELERATING }</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Truck</span> {

    <span class="directive">static</span> hasMany = [<span class="key">states</span>: VehicleStatus]

    <span class="directive">static</span> mapping = {
        states <span class="key">joinTable</span>: [<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">VEHICLE_STATUS_LOG</span><span class="delimiter">'</span></span>,
                           <span class="key">key</span>: <span class="string"><span class="delimiter">'</span><span class="content">TRUCK_ID</span><span class="delimiter">'</span></span>, <span class="key">column</span>: <span class="string"><span class="delimiter">'</span><span class="content">STATUS</span><span class="delimiter">'</span></span>]
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Many-to-many:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

    <span class="predefined-type">String</span> title

    <span class="directive">static</span> belongsTo = Author

    <span class="directive">static</span> hasMany = [<span class="key">authors</span>: Author]

    <span class="directive">static</span> mapping = {
        authors <span class="key">joinTable</span>: [<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">mm_author_books</span><span class="delimiter">&quot;</span></span>, <span class="key">key</span>: <span class="string"><span class="delimiter">'</span><span class="content">mm_book_id</span><span class="delimiter">'</span></span> ]
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {

    <span class="predefined-type">String</span> name

    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]

    <span class="directive">static</span> mapping = {
        books <span class="key">joinTable</span>: [<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">mm_author_books</span><span class="delimiter">&quot;</span></span>, <span class="key">key</span>: <span class="string"><span class="delimiter">'</span><span class="content">mm_author_id</span><span class="delimiter">'</span></span>]
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Unidirectional One-to-many:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Employee</span> {

    <span class="directive">static</span> hasMany = [<span class="key">projects</span>: Project]

    <span class="directive">static</span> mapping = {
        projects <span class="key">joinTable</span>: [<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">EMP_PROJ</span><span class="delimiter">'</span></span>,
                             <span class="key">column</span>: <span class="string"><span class="delimiter">'</span><span class="content">PROJECT_ID</span><span class="delimiter">'</span></span>,
                             <span class="key">key</span>: <span class="string"><span class="delimiter">'</span><span class="content">EMPLOYEE_ID</span><span class="delimiter">'</span></span>]
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Project</span> {  }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_9">17.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(joinTable:map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name</code> - The table name</p>
</li>
<li>
<p><code>key</code> (optional) - The foreign key</p>
</li>
<li>
<p><code>column</code> (optional) - The inverse column</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>GORM has various strategies for mapping association types. Some of them, such as basic collection types and many-to-many associations, use a join table. You can customize how this join table is created using the <code>joinTable</code> argument.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-lazy">17.3.1. lazy</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lazy">18. lazy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_10">18.1. Purpose</h3>
<div class="paragraph">
<p>Configures whether to use proxies and lazy loading for one-to-one and many-to-one associations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_10">18.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

    <span class="directive">static</span> belongsTo = [<span class="key">author</span>: Author]

    <span class="directive">static</span> mapping = {
        author <span class="key">lazy</span>: <span class="predefined-constant">false</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_10">18.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(lazy: boolean)</code></p>
</div>
<div class="paragraph">
<p>By default GORM single-ended associations are lazy in that when you load a domain instance, an associated domain is not loaded until accessed. Hibernate creates a dynamic proxy by subclassing the domain class and proxying all methods and property access.</p>
</div>
<div class="paragraph">
<p>This can have some strange side effects (see <a href="http://www.hibernate.org/280.html">this page</a> on proxies at the Hibernate site) particularly in relation to inheritance. You can tell Hibernate not use proxies for single-ended associations by using the <code>lazy</code> argument:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    author <span class="key">lazy</span>: <span class="predefined-constant">false</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#fetching">Eager vs Lazing Fetching</a> in the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-order">18.3.1. order</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_order">19. order</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_11">19.1. Purpose</h3>
<div class="paragraph">
<p>Customizes the default sort order of query results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_11">19.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    ...
    static mapping = {
        order <span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_11">19.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>order(string)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>direction</code> - Either "desc" or "asc" for descending and ascending respectively.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By defaults results are sorted in ascending order. With the <code>order</code> method you can alter results to be sorted in descending order. See also the <a href="sort.html">sort</a> method.</p>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-sort">19.3.1. sort</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_sort">20. sort</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_12">20.1. Purpose</h3>
<div class="paragraph">
<p>Customizes the default property to sort by for query results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_12">20.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    ...
    static mapping = {
        sort <span class="string"><span class="delimiter">&quot;</span><span class="content">releaseDate</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_12">20.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>sort(string/map)</code></p>
</div>
<div class="paragraph">
<p>By default results are sorted by creation date, and you can specify the column to order by in a query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> results = <span class="predefined-type">Book</span>.list(<span class="key">sort</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, you can also configure the default sort property:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    sort <span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>in which case the <code>sort</code> argument is no longer needed. You can also control the sort order:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    sort <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span> <span class="comment">// or &quot;asc&quot;</span>
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-table">20.3.1. table</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_table映射">21. table映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_8">21.1. 目的</h3>
<div class="paragraph">
<p>自定义的domain类关联的数据库表的名称</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_9">21.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="directive">static</span> mapping = {
        table <span class="string"><span class="delimiter">&quot;</span><span class="content">book_catalog</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_7">21.3. 描述</h3>
<div class="paragraph">
<p>Usage: <code>table(string/map)</code></p>
</div>
<div class="paragraph">
<p>Arguments:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name</code> - 表的名称</p>
</li>
<li>
<p><code>schema</code> (可选) - 表的schema</p>
</li>
<li>
<p><code>catalog</code> (可选) - 表的catalog</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>默认情况下，domain类的表的映射名字是基于类的名字。GORM将类名的java风格驼峰格式映射为表名时，使用下划线隔离。例如` productreview <code>成为</code> product_review `。你可以用`table`方法重写表名:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    table <span class="string"><span class="delimiter">&quot;</span><span class="content">book_catalog</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>也可以指定 schema 和 catalog名称:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    table <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">book_catalog</span><span class="delimiter">&quot;</span></span>, <span class="key">schema</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">dbo</span><span class="delimiter">&quot;</span></span>, <span class="key">catalog</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">CRM</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-type">21.3.1. type</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_type">22. type</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_13">22.1. Purpose</h3>
<div class="paragraph">
<p>Configures the Hibernate type for a particular property.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_13">22.2. Examples</h3>
<div class="paragraph">
<p>Changing to a text type (CLOB or TEXT depending on database dialect):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

    <span class="predefined-type">String</span> title

    <span class="directive">static</span> mapping = {
        title <span class="key">type</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>User types with multiple columns:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    ...
    MonetaryAmount amount

    <span class="directive">static</span> mapping = {
        amount <span class="key">type</span>: MonetaryUserType, {
            column <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>
            column <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">currency</span><span class="delimiter">&quot;</span></span>, <span class="key">sqlType</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">char</span><span class="delimiter">&quot;</span></span>, <span class="key">length</span>: <span class="integer">3</span>
        }
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_13">22.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(type:string/class)</code></p>
</div>
<div class="paragraph">
<p>Hibernate will attempt to automatically select the appropriate database type from the field typed based on configuration in the <code>Dialect</code> class that is being used. But you can override the defaults if necessary. For example <code>String</code> values are mapped by default to <code>varchar(255)</code> columns. To store larger <code>String</code> values you can use a <code>text</code> type instead:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    title <span class="key">type</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">text</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Hibernate also has the concept of custom <code>UserType</code> implementations. In this case you specify the <code>UserType</code> class. If the <code>UserType</code> maps to multiple columns you may need to specify a mapping for each column:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    amount <span class="key">type</span>: MonetaryUserType, {
        column <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">value</span><span class="delimiter">&quot;</span></span>
        column <span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">currency</span><span class="delimiter">&quot;</span></span>, <span class="key">sqlType</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">char</span><span class="delimiter">&quot;</span></span>, <span class="key">length</span>: <span class="integer">3</span>
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-updateable">22.3.1. updateable</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_updateable映射">23. updateable映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_14">23.1. Purpose</h3>
<div class="paragraph">
<p>Determines whether a property&#8217;s database column is updated when persistent instances are updated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_14">23.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

    <span class="predefined-type">String</span> title

    <span class="directive">static</span> belongsTo = [<span class="key">author</span>: Author]

    <span class="directive">static</span> mapping = {
        author <span class="key">insertable</span>: <span class="predefined-constant">false</span>
        author <span class="key">updateable</span>: <span class="predefined-constant">false</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_14">23.3. Description</h3>
<div class="paragraph">
<p>Usage: <code>association_name(updateable: boolean)</code></p>
</div>
<div class="paragraph">
<p>Useful in general where you don&#8217;t want to update a value (or include the column in the generated SQL) during a <code>save()</code>.</p>
</div>
<div class="paragraph">
<p>In particular this is useful for one-to-many relationships. For example when you store the foreign key in the <em>child</em> table, it&#8217;s often efficient to save the child using only the foreign key of the parent. You do this by setting the parent object (and the parent foreign key) in the <em>child</em> entity. Setting the attributes insertable:false and updateable:false for the <em>belongsTo</em> parent object lets you insert and update using only the foreign key.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    author <span class="key">updateable</span>: <span class="predefined-constant">false</span>
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-database-mapping-version">23.3.1. version</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version映射">24. version映射</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_9">24.1. 目的</h3>
<div class="paragraph">
<p>用于禁用乐观锁定或更改保持版本的列.</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_10">24.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    ...
    static mapping = {
        version <span class="predefined-constant">false</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_8">24.3. 描述</h3>
<div class="paragraph">
<p>Usage: <code>version(string/boolean)</code></p>
</div>
<div class="paragraph">
<p>默认情况下，GORM配置 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#locking">optimistic locking</a> 启用. 可以通过设置 <code>version</code> 方法的 `false`参数来禁用:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    version <span class="predefined-constant">false</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>可以将名称传递到 `version`方法以更改数据库列的名称:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> mapping = {
    version <span class="string"><span class="delimiter">'</span><span class="content">revision_number</span><span class="delimiter">'</span></span>
}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>