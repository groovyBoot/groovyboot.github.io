<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.4">
<meta name="author" content="作者： Graeme Rocher, Peter Ledbrook, Marc Palmer, Jeff Brown, Luke Daley, Burt Beckwith, Lari Hotari">
<title>The GORM domain类 方法属性介绍</title>

<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
body{margin:0}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
body{-webkit-font-smoothing:antialiased}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol,ul.no-bullet,ol.no-bullet{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.no-bullet{list-style:none}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
body{tab-size:4}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menu{color:rgba(0,0,0,.8)}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all th.tableblock,table.grid-all td.tableblock{border-width:0 1px 1px 0}
table.grid-all tfoot>tr>th.tableblock,table.grid-all tfoot>tr>td.tableblock{border-width:1px 1px 0 0}
table.grid-cols th.tableblock,table.grid-cols td.tableblock{border-width:0 1px 0 0}
table.grid-all *>tr>.tableblock:last-child,table.grid-cols *>tr>.tableblock:last-child{border-right-width:0}
table.grid-rows th.tableblock,table.grid-rows td.tableblock{border-width:0 0 1px 0}
table.grid-all tbody>tr:last-child>th.tableblock,table.grid-all tbody>tr:last-child>td.tableblock,table.grid-all thead:last-child>tr>th.tableblock,table.grid-rows tbody>tr:last-child>th.tableblock,table.grid-rows tbody>tr:last-child>td.tableblock,table.grid-rows thead:last-child>tr>th.tableblock{border-bottom-width:0}
table.grid-rows tfoot>tr>th.tableblock,table.grid-rows tfoot>tr>td.tableblock{border-width:1px 0 0 0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.unstyled,ol.unnumbered,ul.checklist,ul.none{list-style-type:none}
ul.unstyled,ol.unnumbered,ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1em;font-size:.85em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{width:1em;position:relative;top:1px}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:0 .75em;line-height:1}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.5.0/css/font-awesome.min.css">
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
/*pre.CodeRay {background-color:#f7f7f8;}*/
.CodeRay .line-numbers{border-right:1px solid #d8d8d8;padding:0 0.5em 0 .25em}
.CodeRay span.line-numbers{display:inline-block;margin-right:.5em;color:rgba(0,0,0,.3)}
.CodeRay .line-numbers strong{color:rgba(0,0,0,.4)}
table.CodeRay{border-collapse:separate;border-spacing:0;margin-bottom:0;border:0;background:none}
table.CodeRay td{vertical-align: top;line-height:1.45}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.line-numbers>pre{padding:0;color:rgba(0,0,0,.3)}
table.CodeRay td.code{padding:0 0 0 .5em}
table.CodeRay td.code>pre{padding:0}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>The GORM domain类 方法属性介绍</h1>
<div class="details">
<span id="author" class="author">作者： Graeme Rocher, Peter Ledbrook, Marc Palmer, Jeff Brown, Luke Daley, Burt Beckwith, Lari Hotari</span><br>
<span id="revdate">翻译：  肖鹏 孙鹏飞 于雷 梁宏艺 马飚</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel2">
<li><a href="#_domain_类的简介">1. Domain 类的简介</a></li>
<li><a href="#ref-domain-classes">2. Domain类的方法列表</a></li>
<li><a href="#_addto_方法">3. addTo* 方法</a>
<ul class="sectlevel2">
<li><a href="#_目的">3.1. 目的</a></li>
<li><a href="#_示例">3.2. 示例</a></li>
<li><a href="#_描述">3.3. 描述</a></li>
</ul>
</li>
<li><a href="#_attach方法">4. attach方法</a>
<ul class="sectlevel2">
<li><a href="#_目的_2">4.1. 目的</a></li>
<li><a href="#_示例_2">4.2. 示例</a></li>
<li><a href="#_描述_2">4.3. 描述</a></li>
</ul>
</li>
<li><a href="#_belongsto_静态属性">5. belongsTo 静态属性</a>
<ul class="sectlevel2">
<li><a href="#_目的_3">5.1. 目的</a></li>
<li><a href="#_示例_3">5.2. 示例</a></li>
<li><a href="#_描述_3">5.3. 描述</a></li>
</ul>
</li>
<li><a href="#_clearerrors方法">6. clearErrors方法</a>
<ul class="sectlevel2">
<li><a href="#_目的_4">6.1. 目的</a></li>
<li><a href="#_示例_4">6.2. 示例</a></li>
</ul>
</li>
<li><a href="#_constraints">7. constraints</a>
<ul class="sectlevel2">
<li><a href="#_purpose">7.1. Purpose</a></li>
<li><a href="#_examples">7.2. Examples</a></li>
<li><a href="#_description">7.3. Description</a></li>
</ul>
</li>
<li><a href="#_count方法">8. count方法</a>
<ul class="sectlevel2">
<li><a href="#_目的_5">8.1. 目的</a></li>
<li><a href="#_示例_5">8.2. 示例</a></li>
</ul>
</li>
<li><a href="#_countby_方法">9. countBy*方法</a>
<ul class="sectlevel2">
<li><a href="#_目的_6">9.1. 目的</a></li>
<li><a href="#_示例_6">9.2. 示例</a></li>
<li><a href="#_描述_4">9.3. 描述</a></li>
</ul>
</li>
<li><a href="#_createcriteria方法">10. createCriteria方法</a>
<ul class="sectlevel2">
<li><a href="#_目的_7">10.1. 目的</a></li>
<li><a href="#_示例_7">10.2. 示例</a></li>
<li><a href="#_描述_5">10.3. 描述</a></li>
</ul>
</li>
<li><a href="#_delete">11. delete</a>
<ul class="sectlevel2">
<li><a href="#_purpose_2">11.1. Purpose</a></li>
<li><a href="#_examples_2">11.2. Examples</a></li>
<li><a href="#_description_2">11.3. Description</a></li>
</ul>
</li>
<li><a href="#_discard">12. discard</a>
<ul class="sectlevel2">
<li><a href="#_purpose_3">12.1. Purpose</a></li>
<li><a href="#_examples_3">12.2. Examples</a></li>
<li><a href="#_description_3">12.3. Description</a></li>
</ul>
</li>
<li><a href="#_embedded">13. embedded</a>
<ul class="sectlevel2">
<li><a href="#_purpose_4">13.1. Purpose</a></li>
<li><a href="#_examples_4">13.2. Examples</a></li>
<li><a href="#_description_4">13.3. Description</a></li>
</ul>
</li>
<li><a href="#_errors">14. errors</a>
<ul class="sectlevel2">
<li><a href="#_purpose_5">14.1. Purpose</a></li>
<li><a href="#_examples_5">14.2. Examples</a></li>
<li><a href="#_description_5">14.3. Description</a></li>
</ul>
</li>
<li><a href="#_executequery">15. executeQuery</a>
<ul class="sectlevel2">
<li><a href="#_purpose_6">15.1. Purpose</a></li>
<li><a href="#_examples_6">15.2. Examples</a></li>
<li><a href="#_description_6">15.3. Description</a></li>
</ul>
</li>
<li><a href="#_executeupdate">16. executeUpdate</a>
<ul class="sectlevel2">
<li><a href="#_purpose_7">16.1. Purpose</a></li>
<li><a href="#_examples_7">16.2. Examples</a></li>
<li><a href="#_description_7">16.3. Description</a></li>
</ul>
</li>
<li><a href="#_exists">17. exists</a>
<ul class="sectlevel2">
<li><a href="#_purpose_8">17.1. Purpose</a></li>
<li><a href="#_examples_8">17.2. Examples</a></li>
<li><a href="#_description_8">17.3. Description</a></li>
</ul>
</li>
<li><a href="#_fetchmode">18. fetchMode</a>
<ul class="sectlevel2">
<li><a href="#_purpose_9">18.1. Purpose</a></li>
<li><a href="#_examples_9">18.2. Examples</a></li>
<li><a href="#_description_9">18.3. Description</a></li>
</ul>
</li>
<li><a href="#_find">19. find</a>
<ul class="sectlevel2">
<li><a href="#_purpose_10">19.1. Purpose</a></li>
<li><a href="#_examples_10">19.2. Examples</a></li>
<li><a href="#_description_10">19.3. Description</a></li>
</ul>
</li>
<li><a href="#_findall">20. findAll</a>
<ul class="sectlevel2">
<li><a href="#_purpose_11">20.1. Purpose</a></li>
<li><a href="#_examples_11">20.2. Examples</a></li>
<li><a href="#_description_11">20.3. Description</a></li>
</ul>
</li>
<li><a href="#_findallby">21. findAllBy*</a>
<ul class="sectlevel2">
<li><a href="#_purpose_12">21.1. Purpose</a></li>
<li><a href="#_examples_12">21.2. Examples</a></li>
<li><a href="#_description_12">21.3. Description</a></li>
</ul>
</li>
<li><a href="#_findallwhere">22. findAllWhere</a>
<ul class="sectlevel2">
<li><a href="#_purpose_13">22.1. Purpose</a></li>
<li><a href="#_examples_13">22.2. Examples</a></li>
<li><a href="#_description_13">22.3. Description</a></li>
</ul>
</li>
<li><a href="#_findby">23. findBy*</a>
<ul class="sectlevel2">
<li><a href="#_purpose_14">23.1. Purpose</a></li>
<li><a href="#_examples_14">23.2. Examples</a></li>
<li><a href="#_description_14">23.3. Description</a></li>
</ul>
</li>
<li><a href="#_findorcreateby">24. findOrCreateBy*</a>
<ul class="sectlevel2">
<li><a href="#_purpose_15">24.1. Purpose</a></li>
<li><a href="#_examples_15">24.2. Examples</a></li>
<li><a href="#_description_15">24.3. Description</a></li>
</ul>
</li>
<li><a href="#_findorcreatewhere">25. findOrCreateWhere</a>
<ul class="sectlevel2">
<li><a href="#_purpose_16">25.1. Purpose</a></li>
<li><a href="#_examples_16">25.2. Examples</a></li>
<li><a href="#_description_16">25.3. Description</a></li>
</ul>
</li>
<li><a href="#_findorsaveby">26. findOrSaveBy*</a>
<ul class="sectlevel2">
<li><a href="#_purpose_17">26.1. Purpose</a></li>
<li><a href="#_examples_17">26.2. Examples</a></li>
<li><a href="#_description_17">26.3. Description</a></li>
</ul>
</li>
<li><a href="#_findorsavewhere">27. findOrSaveWhere</a>
<ul class="sectlevel2">
<li><a href="#_purpose_18">27.1. Purpose</a></li>
<li><a href="#_examples_18">27.2. Examples</a></li>
<li><a href="#_description_18">27.3. Description</a></li>
</ul>
</li>
<li><a href="#_findwhere">28. findWhere</a>
<ul class="sectlevel2">
<li><a href="#_purpose_19">28.1. Purpose</a></li>
<li><a href="#_examples_19">28.2. Examples</a></li>
<li><a href="#_description_19">28.3. Description</a></li>
</ul>
</li>
<li><a href="#_first">29. first</a>
<ul class="sectlevel2">
<li><a href="#_purpose_20">29.1. Purpose</a></li>
<li><a href="#_examples_20">29.2. Examples</a></li>
</ul>
</li>
<li><a href="#_get">30. get</a>
<ul class="sectlevel2">
<li><a href="#_purpose_21">30.1. Purpose</a></li>
<li><a href="#_examples_21">30.2. Examples</a></li>
<li><a href="#_description_20">30.3. Description</a></li>
</ul>
</li>
<li><a href="#_getall">31. getAll</a>
<ul class="sectlevel2">
<li><a href="#_purpose_22">31.1. Purpose</a></li>
<li><a href="#_examples_22">31.2. Examples</a></li>
<li><a href="#_description_21">31.3. Description</a></li>
</ul>
</li>
<li><a href="#_getdirtypropertynames">32. getDirtyPropertyNames</a>
<ul class="sectlevel2">
<li><a href="#_purpose_23">32.1. Purpose</a></li>
<li><a href="#_examples_23">32.2. Examples</a></li>
<li><a href="#_description_22">32.3. Description</a></li>
</ul>
</li>
<li><a href="#_getpersistentvalue">33. getPersistentValue</a>
<ul class="sectlevel2">
<li><a href="#_purpose_24">33.1. Purpose</a></li>
<li><a href="#_examples_24">33.2. Examples</a></li>
<li><a href="#_description_23">33.3. Description</a></li>
</ul>
</li>
<li><a href="#_haserrors">34. hasErrors</a>
<ul class="sectlevel2">
<li><a href="#_purpose_25">34.1. Purpose</a></li>
<li><a href="#_examples_25">34.2. Examples</a></li>
</ul>
</li>
<li><a href="#_hasmany">35. hasMany</a>
<ul class="sectlevel2">
<li><a href="#_purpose_26">35.1. Purpose</a></li>
<li><a href="#_examples_26">35.2. Examples</a></li>
<li><a href="#_description_24">35.3. Description</a></li>
</ul>
</li>
<li><a href="#_hasone">36. hasOne</a>
<ul class="sectlevel2">
<li><a href="#_purpose_27">36.1. Purpose</a></li>
<li><a href="#_examples_27">36.2. Examples</a></li>
<li><a href="#_description_25">36.3. Description</a></li>
</ul>
</li>
<li><a href="#_ident">37. ident</a>
<ul class="sectlevel2">
<li><a href="#_purpose_28">37.1. Purpose</a></li>
<li><a href="#_examples_28">37.2. Examples</a></li>
</ul>
</li>
<li><a href="#_instanceof">38. instanceOf</a>
<ul class="sectlevel2">
<li><a href="#_purpose_29">38.1. Purpose</a></li>
<li><a href="#_examples_29">38.2. Examples</a></li>
<li><a href="#_description_26">38.3. Description</a></li>
</ul>
</li>
<li><a href="#_isattached">39. isAttached</a>
<ul class="sectlevel2">
<li><a href="#_purpose_30">39.1. Purpose</a></li>
<li><a href="#_examples_30">39.2. Examples</a></li>
<li><a href="#_description_27">39.3. Description</a></li>
</ul>
</li>
<li><a href="#_isdirty">40. isDirty</a>
<ul class="sectlevel2">
<li><a href="#_purpose_31">40.1. Purpose</a></li>
<li><a href="#_examples_31">40.2. Examples</a></li>
<li><a href="#_description_28">40.3. Description</a></li>
</ul>
</li>
<li><a href="#_last">41. last</a>
<ul class="sectlevel2">
<li><a href="#_purpose_32">41.1. Purpose</a></li>
<li><a href="#_examples_32">41.2. Examples</a></li>
</ul>
</li>
<li><a href="#_list">42. list</a>
<ul class="sectlevel2">
<li><a href="#_purpose_33">42.1. Purpose</a></li>
<li><a href="#_examples_33">42.2. Examples</a></li>
<li><a href="#_description_29">42.3. Description</a></li>
</ul>
</li>
<li><a href="#_listorderby">43. listOrderBy*</a>
<ul class="sectlevel2">
<li><a href="#_purpose_34">43.1. Purpose</a></li>
<li><a href="#_examples_34">43.2. Examples</a></li>
<li><a href="#_description_30">43.3. Description</a></li>
</ul>
</li>
<li><a href="#_load">44. load</a>
<ul class="sectlevel2">
<li><a href="#_purpose_35">44.1. Purpose</a></li>
<li><a href="#_examples_35">44.2. Examples</a></li>
<li><a href="#_description_31">44.3. Description</a></li>
</ul>
</li>
<li><a href="#_lock">45. lock</a>
<ul class="sectlevel2">
<li><a href="#_purpose_36">45.1. Purpose</a></li>
<li><a href="#_examples_36">45.2. Examples</a></li>
<li><a href="#_description_32">45.3. Description</a></li>
</ul>
</li>
<li><a href="#_mappedby">46. mappedBy</a>
<ul class="sectlevel2">
<li><a href="#_purpose_37">46.1. Purpose</a></li>
<li><a href="#_examples_37">46.2. Examples</a></li>
<li><a href="#_description_33">46.3. Description</a></li>
</ul>
</li>
<li><a href="#_mapping">47. mapping</a>
<ul class="sectlevel2">
<li><a href="#_purpose_38">47.1. Purpose</a></li>
<li><a href="#_examples_38">47.2. Examples</a></li>
</ul>
</li>
<li><a href="#_mapwith">48. mapWith</a>
<ul class="sectlevel2">
<li><a href="#_purpose_39">48.1. Purpose</a></li>
<li><a href="#_examples_39">48.2. Examples</a></li>
</ul>
</li>
<li><a href="#_merge">49. merge</a>
<ul class="sectlevel2">
<li><a href="#_purpose_40">49.1. Purpose</a></li>
<li><a href="#_examples_40">49.2. Examples</a></li>
<li><a href="#_description_34">49.3. Description</a></li>
</ul>
</li>
<li><a href="#_namedqueries">50. namedQueries</a>
<ul class="sectlevel2">
<li><a href="#_purpose_41">50.1. Purpose</a></li>
<li><a href="#_examples_41">50.2. Examples</a></li>
</ul>
</li>
<li><a href="#_properties">51. properties</a>
<ul class="sectlevel2">
<li><a href="#_purpose_42">51.1. Purpose</a></li>
<li><a href="#_examples_42">51.2. Examples</a></li>
</ul>
</li>
<li><a href="#_read">52. read</a>
<ul class="sectlevel2">
<li><a href="#_purpose_43">52.1. Purpose</a></li>
<li><a href="#_examples_43">52.2. Examples</a></li>
<li><a href="#_description_35">52.3. Description</a></li>
</ul>
</li>
<li><a href="#_refresh">53. refresh</a>
<ul class="sectlevel2">
<li><a href="#_purpose_44">53.1. Purpose</a></li>
<li><a href="#_examples_44">53.2. Examples</a></li>
<li><a href="#_description_36">53.3. Description</a></li>
</ul>
</li>
<li><a href="#_removefrom">54. removeFrom*</a>
<ul class="sectlevel2">
<li><a href="#_purpose_45">54.1. Purpose</a></li>
<li><a href="#_examples_45">54.2. Examples</a></li>
</ul>
</li>
<li><a href="#_save">55. save</a>
<ul class="sectlevel2">
<li><a href="#_purpose_46">55.1. Purpose</a></li>
<li><a href="#_examples_46">55.2. Examples</a></li>
<li><a href="#_description_37">55.3. Description</a></li>
</ul>
</li>
<li><a href="#_transients">56. transients</a>
<ul class="sectlevel2">
<li><a href="#_purpose_47">56.1. Purpose</a></li>
<li><a href="#_examples_47">56.2. Examples</a></li>
</ul>
</li>
<li><a href="#_validate">57. validate</a>
<ul class="sectlevel2">
<li><a href="#_purpose_48">57.1. Purpose</a></li>
<li><a href="#_description_38">57.2. Description</a></li>
<li><a href="#_examples_48">57.3. Examples</a></li>
</ul>
</li>
<li><a href="#_where">58. where</a>
<ul class="sectlevel2">
<li><a href="#_purpose_49">58.1. Purpose</a></li>
<li><a href="#_examples_49">58.2. Examples</a></li>
<li><a href="#_description_39">58.3. Description</a></li>
</ul>
</li>
<li><a href="#_where_2">59. where</a>
<ul class="sectlevel2">
<li><a href="#_purpose_50">59.1. Purpose</a></li>
<li><a href="#_examples_50">59.2. Examples</a></li>
<li><a href="#_description_40">59.3. Description</a></li>
</ul>
</li>
<li><a href="#_withcriteria">60. withCriteria</a>
<ul class="sectlevel2">
<li><a href="#_purpose_51">60.1. Purpose</a></li>
<li><a href="#_return_value">60.2. Return value</a></li>
<li><a href="#_examples_51">60.3. Examples</a></li>
<li><a href="#_description_41">60.4. Description</a></li>
</ul>
</li>
<li><a href="#_withnewsession">61. withNewSession</a>
<ul class="sectlevel2">
<li><a href="#_purpose_52">61.1. Purpose</a></li>
<li><a href="#_examples_52">61.2. Examples</a></li>
<li><a href="#_description_42">61.3. Description</a></li>
</ul>
</li>
<li><a href="#_withsession方法">62. withSession方法</a>
<ul class="sectlevel2">
<li><a href="#_目的_8">62.1. 目的</a></li>
<li><a href="#_示例_8">62.2. 示例</a></li>
<li><a href="#_描述_6">62.3. 描述</a></li>
</ul>
</li>
<li><a href="#_withtransaction方法">63. withTransaction方法</a>
<ul class="sectlevel2">
<li><a href="#_目的_9">63.1. 目的</a></li>
<li><a href="#_示例_9">63.2. 示例</a></li>
<li><a href="#_描述_7">63.3. 描述</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>注:本文档只针对spring boot工程使用的情况有针对性的翻译,完整版本请登录GORM的github官网浏览</p>
</div>
<div class="paragraph">
<p>[[Domain Class介绍]]
== Domain类介绍</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_domain_类的简介">1. Domain 类的简介</h3>
<div class="paragraph">
<p>在MVC模式(Model View Controller)中domain类履行M的职责,表示映射到基础数据库表上的持久性实体. 按照约定所有的domain类都存放在 <code>domain</code> 目录下.:</p>
</div>
<div class="paragraph">
<p>使用IDE或文本编译器书写以下代码.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">grails.persistence.Entity</span>;
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>
<span class="annotation">@Entity</span>
<span class="type">class</span> <span class="class">Book</span> <span class="directive">implements</span> GormEntity&lt;<span class="predefined-type">Book</span>&gt;{
    <span class="predefined-type">String</span> title;
    <span class="predefined-type">Date</span> releaseDate;
    Author author;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>domain类需要实现GormEntity接口和增加Entity注解.</p>
</div>
<div class="paragraph">
<p>默认情况下，类名称，映射到表名小写，若domain类使用驼峰表示法则使用下划线分隔.例如若类名是 <code>BookStore`则默认映射的表名为 `book_store</code>. 每个属性映射到单个数据表列.</p>
</div>
<div class="paragraph">
<p>默认表命名方案的一个限制是，具有相同名称的2个域类是有问题的，即使它们被定义为不同的的包内.例如`com.bookstore.Book` and <code>org.yunchen.utility.Book</code> 都映射到一个表名 <code>book</code>.应用中碰过这类问题，可以给不同的类名称或在mapping中提供具体的表名来解决,如:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">import</span> <span class="include">grails.persistence.Entity</span>;
<span class="keyword">import</span> <span class="include">org.grails.datastore.gorm.GormEntity</span>
<span class="annotation">@Entity</span>
<span class="type">class</span> <span class="class">Book</span> <span class="directive">implements</span> GormEntity&lt;<span class="predefined-type">Book</span>&gt;{
    <span class="predefined-type">String</span> title;
    <span class="predefined-type">Date</span> releaseDate;
    Author author;
    <span class="directive">static</span> mapping = {
        table (<span class="key">name</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">book_table</span><span class="delimiter">&quot;</span></span>)
        comment <span class="string"><span class="delimiter">&quot;</span><span class="content">图书表</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>全部方法: <a href="../ref/Domain%20Classes/addTo.html">addTo方法</a> , <a href="../ref/Domain%20Classes/attach.html">attach方法</a>  &#8230;&#8203;..</p>
</div>
<div class="paragraph">
<p>参看 <a href="../reference.html">reference</a> 部分查看更多domain类的方法和使用.</p>
</div>
<div class="paragraph">
<p>参看 <a href="../GORM.html">GORM</a> 了解更多.</p>
</div>
</div>
<div class="sect2">
<h3 id="ref-domain-classes">2. Domain类的方法列表</h3>
<div class="sect3">
<h4 id="ref-domain-classes-addTo">2.1. addTo方法</h4>

</div>
</div>
<div class="sect1">
<h2 id="_addto_方法">3. addTo* 方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的">3.1. 目的</h3>
<div class="paragraph">
<p>为一对多或多对多关系添加域类关系，其中以该方法的后缀的属性名称表示关系的映射属性</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例">3.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> fictBook = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">IT</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">def</span> nonFictBook = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">On Writing: A Memoir of the Craft</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">def</span> a = <span class="keyword">new</span> Author(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Stephen King</span><span class="delimiter">&quot;</span></span>)
             .addToFiction(fictBook)
             .addToNonFiction(nonFictBook)
             .save()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述">3.3. 描述</h3>
<div class="paragraph">
<p>`addTo*`方法是一种动态的方法，使用一个会自动添加实例的关联。它还自动配置双向关系，使双方都设置。</p>
</div>
<div class="paragraph">
<p>考虑上面例子中使用的这些domain类:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="annotation">@Entity</span>
<span class="type">class</span> <span class="class">Author</span> <span class="directive">implements</span> GormEntity&lt;Author&gt;{
    <span class="predefined-type">String</span> name
    <span class="directive">static</span> hasMany = [<span class="key">fiction</span>: <span class="predefined-type">Book</span>, <span class="key">nonFiction</span>: <span class="predefined-type">Book</span>]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="annotation">@Entity</span>
<span class="type">class</span> <span class="class">Book</span> <span class="directive">implements</span> GormEntity&lt;<span class="predefined-type">Book</span>&gt;{
    <span class="predefined-type">String</span> title
    <span class="directive">static</span> belongsTo = [<span class="key">author</span>: Author]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>这个例子创造了一本新的小说类书籍和一本新的非小说类书籍，归属于一个作者。
<code>addToFiction`是一个动态方法,因为 `Fiction</code> 部分表示的`fiction`集合定义在domain类的`hasMany`属性中,同样的关系也表现在 `NonFiction`和`nonFiction`上.
通过调用 `Author`对象的`save()`方法,关联的 `Book`示例也保存入库, 尽管我们没有显示的调用它们的`save()`方法.</p>
</div>
<div class="paragraph">
<p>此外，调用addTo*方法会初始化关联的集合，并且会设置`Book`的`author`的引用关系。</p>
</div>
<div class="paragraph">
<p>还有一种更紧凑的方法，该方法接受一个“map”而不是一个域类实例，如下调用，则自动初始化`Book`对象:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> a = <span class="keyword">new</span> Author(<span class="key">name</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Stephen King</span><span class="delimiter">&quot;</span></span>)
             .addToFiction(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">IT</span><span class="delimiter">&quot;</span></span>)
             .addToNonFiction(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">On Writing: A Memoir of the Craft</span><span class="delimiter">&quot;</span></span>)
             .save()</code></pre>
</div>
</div>
<div class="paragraph">
<p>以上代码可以运行，是因为GORM知道addTo被添加类型，可以使用标准的`Map`构造函数来创建实例.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-attach">3.3.1. attach方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_attach方法">4. attach方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_2">4.1. 目的</h3>
<div class="paragraph">
<p>将“detached”状态的domain类实例与当前Hibernate会话关联在一起</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_2">4.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.get(<span class="integer">1</span>)
b.title = <span class="string"><span class="delimiter">&quot;</span><span class="content">Blah</span><span class="delimiter">&quot;</span></span>
b.save(<span class="key">flush</span>:<span class="predefined-constant">true</span>)

b.discard()

...
if (!b.isAttached()) {
    b.attach()
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_2">4.3. 描述</h3>
<div class="paragraph">
<p>Hibernate在持久会话session中管理持久实例。每个请求创建新会话，并在请求结束时关闭。如果一个对象是从会话中获取并放置到一个Web范围如HttpSession，状态将变为“detached”，一旦Hibernate会话session关闭和废弃。你可以使用` attach() `方法重新附加现有的持久化实例对当前请求的Hibernate session。</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-belongsTo">4.3.1. belongsTo静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_belongsto_静态属性">5. belongsTo 静态属性</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_3">5.1. 目的</h3>
<div class="paragraph">
<p>Defines a "belongs to" relationship where the class specified by <code>belongsTo</code> assumes ownership of the relationship. This has the effect of controlling how saves and deletes cascade. The exact behaviour depends on the type of relationship:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Many-to-one/one-to-one: saves and deletes cascade from the owner to the dependant (the class with the <code>belongsTo</code>).</p>
</li>
<li>
<p>One-to-many: saves always cascade from the one side to the many side, but if the many side has <code>belongsTo</code>, then deletes also cascade in that direction.</p>
</li>
<li>
<p>Many-to-many: only saves cascade from the "owner" to the "dependant", not deletes.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_示例_3">5.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
   <span class="predefined-type">String</span> title

   <span class="directive">static</span> belongsTo = [<span class="key">author</span>: Author]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the <code>Book</code> class specifies that it belongs to the <code>Author</code> class, hence when an <code>Author</code> instance is deleted so are all its associated <code>Book</code> instances.</p>
</div>
</div>
<div class="sect2">
<h3 id="_描述_3">5.3. 描述</h3>
<div class="paragraph">
<p>The <code>belongsTo</code> property abstracts the nature of the cascading behaviour in Hibernate. If you want one class to belong to another but not have a back reference, then you can specify a class or a list of classes as the value:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="directive">static</span> belongsTo = Author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="directive">static</span> belongsTo = [Author, Library]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Back references, i.e. properties linking back to the owner, can be added in one of two ways:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    Author author

    <span class="directive">static</span> belongsTo = Author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>or:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="directive">static</span> belongsTo = [<span class="key">author</span>: Author]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In these examples, both techniques create an <code>Author</code> property named <code>author</code>. Also, the Map property can specify multiple properties and types if the class belongs to more than one owner.</p>
</div>
<div class="paragraph">
<p>The <code>belongsTo</code> property is simple and means you don&#8217;t have to worry about the Hibernate cascading strategies, but if you need more control over cascading you can use the <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#ormdsl">ORM DSL</a>. This allows fine grained control of cascading updates and deletes.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-clearErrors">5.3.1. clearErrors方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_clearerrors方法">6. clearErrors方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_4">6.1. 目的</h3>
<div class="paragraph">
<p>重装domain类的errors列表 . 如果domain类包含绑定或验证的错误时，将非常有用。这些错误可以通过程序纠正。如果不清除错误，验证将继续失败。</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_4">6.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
b.validate()
<span class="keyword">if</span> (b.hasErrors()) {

    <span class="comment">// clear the list of errors</span>
    b.clearErrors()

    <span class="comment">// fix the validation issues</span>
    b.author = <span class="string"><span class="delimiter">&quot;</span><span class="content">Stephen King</span><span class="delimiter">&quot;</span></span>

    <span class="comment">// re-validate</span>
    b.validate()
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-constraints">6.2.1. constraints静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_constraints">7. constraints</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose">7.1. Purpose</h3>
<div class="paragraph">
<p>Allows the definition of declarative validation constraints. See <a href="{guidePath}/validation.html">validation</a> in the user guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples">7.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

    <span class="predefined-type">String</span> title
    Author author

    <span class="directive">static</span> constraints = {
        title <span class="key">blank</span>: <span class="predefined-constant">false</span>, <span class="key">size</span>: <span class="integer">5</span>..<span class="integer">150</span>
        author <span class="key">nullable</span>: <span class="predefined-constant">true</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description">7.3. Description</h3>
<div class="paragraph">
<p>Constraints are defined using the declarative constraints DSL as described in the <a href="{guidePath}/validation.html">validation</a> section of the user guide. Once evaluated, validation can be applied through the use of the <a href="../Domain%20Classes/validate.html">validate</a> method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="keyword">new</span> <span class="predefined-type">Book</span>()
<span class="keyword">assert</span> !b.validate()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The static <code>constrainedProperties</code> property is a Map such that the keys in the Map are property names and the values associated with the keys are instances of {apiDocs}grails/validation/ConstrainedProperty.html[ConstrainedProperty]:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> constraintsMap = <span class="predefined-type">Book</span>.constrainedProperties
<span class="keyword">for</span>(entry <span class="keyword">in</span> constraintsMap) {
    <span class="comment">// propertyName is a String</span>
    <span class="keyword">def</span> propertyName = entry.key

    <span class="comment">// constrainedProperty is a ConstrainedProperty</span>
    <span class="keyword">def</span> constrainedProperty = entry.value

    <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-count">7.3.1. count方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_count方法">8. count方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_5">8.1. 目的</h3>
<div class="paragraph">
<p>返回domain类对应的表的记录总数</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_5">8.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">int</span> bookCount = <span class="predefined-type">Book</span>.count()</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-countBy">8.2.1. countBy方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_countby_方法">9. countBy*方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_6">9.1. 目的</h3>
<div class="paragraph">
<p>使用domain类中的属性来查询相应记录的数目的动态方法</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_6">9.2. 示例</h3>
<div class="paragraph">
<p>这是`Book`的domain类:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="predefined-type">String</span> title
    <span class="predefined-type">Date</span> releaseDate
    <span class="predefined-type">String</span> author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>下面的用法都是可以的:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> c = <span class="predefined-type">Book</span>.countByTitle(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
c = <span class="predefined-type">Book</span>.countByTitleAndAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Sum of All Fears</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Tom Clancy</span><span class="delimiter">&quot;</span></span>)
c = <span class="predefined-type">Book</span>.countByReleaseDateBetween(firstDate, <span class="keyword">new</span> <span class="predefined-type">Date</span>())
c = <span class="predefined-type">Book</span>.countByReleaseDateGreaterThanEquals(firstDate)
c = <span class="predefined-type">Book</span>.countByTitleLike(<span class="string"><span class="delimiter">&quot;</span><span class="content">%Hobbit%</span><span class="delimiter">&quot;</span></span>)
c = <span class="predefined-type">Book</span>.countByTitleNotEqual(<span class="string"><span class="delimiter">&quot;</span><span class="content">Harry Potter</span><span class="delimiter">&quot;</span></span>)
c = <span class="predefined-type">Book</span>.countByReleaseDateIsNull()
c = <span class="predefined-type">Book</span>.countByReleaseDateIsNotNull()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_4">9.3. 描述</h3>
<div class="paragraph">
<p>GORM 支持 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">Dynamic Finders</a> 的概念. `countBy*`方法对符合给定的表达的记录进行计数</p>
</div>
<div class="paragraph">
<p>下面的操作名称可以被用在各自的动态方法中:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LessThan</code></p>
</li>
<li>
<p><code>LessThanEquals</code></p>
</li>
<li>
<p><code>GreaterThan</code></p>
</li>
<li>
<p><code>GreaterThanEquals</code></p>
</li>
<li>
<p><code>Between</code></p>
</li>
<li>
<p><code>Like</code></p>
</li>
<li>
<p><code>Ilike</code> (i.e. ignorecase like)</p>
</li>
<li>
<p><code>IsNotNull</code></p>
</li>
<li>
<p><code>IsNull</code></p>
</li>
<li>
<p><code>Not</code></p>
</li>
<li>
<p><code>Equal</code></p>
</li>
<li>
<p><code>NotEqual</code></p>
</li>
<li>
<p><code>And</code></p>
</li>
<li>
<p><code>Or</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>这些操作名称可以被看作关键字, 当您使用这些操作名称作为属性对domain类进行查询时可能会产生困惑. 更多信息请查看 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">dynamic finders</a> 的用户向导.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-createCriteria">9.3.1. createCriteria方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_createcriteria方法">10. createCriteria方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_7">10.1. 目的</h3>
<div class="paragraph">
<p>创建并返回一个 Grails' <a href="http://grails.github.io/grails-data-mapping/latest/api/grails/orm/HibernateCriteriaBuilder.html">HibernateCriteriaBuilder</a> 的实例, 用作构建标准化查询.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
单元测试时在内存中实现的并不是GORM Hibernate, 如`createCriteria()` 返回的是 <a href="http://grails.github.io/grails-data-mapping/latest/api/grails/gorm/CriteriaBuilder.html">CriteriaBuilder</a> 的实例，而不是HibernateCriteriaBuilder的实例.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_示例_7">10.2. 示例</h3>
<div class="paragraph">
<p>用作构建criteria的方法 (like, and, or, between 等) 可以从HibernateCriteriaBuilder静态导入 (就像这篇文档下面的例子), 或者写为 "c.like(&#8230;&#8203;)", "c.between(&#8230;&#8203;)" 等.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> c = Account.createCriteria()
<span class="keyword">def</span> results = c.list {
    like(<span class="string"><span class="delimiter">&quot;</span><span class="content">holderFirstName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Fred%</span><span class="delimiter">&quot;</span></span>)
    and {
        between(<span class="string"><span class="delimiter">&quot;</span><span class="content">balance</span><span class="delimiter">&quot;</span></span>, <span class="integer">500</span>, <span class="integer">1000</span>)
        eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">branch</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">London</span><span class="delimiter">&quot;</span></span>)
    }
    maxResults(<span class="integer">10</span>)
    order(<span class="string"><span class="delimiter">&quot;</span><span class="content">holderLastName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>要想使用分页, 你还需使用另一个查询来检索匹配结果的总数. 一个较好的方法是将分页值作为criteria方法的参数, 就像下面:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> c = Account.createCriteria()
<span class="keyword">def</span> results = c.list (<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">10</span>) {
    like(<span class="string"><span class="delimiter">&quot;</span><span class="content">holderFirstName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Fred%</span><span class="delimiter">&quot;</span></span>)
    and {
        between(<span class="string"><span class="delimiter">&quot;</span><span class="content">balance</span><span class="delimiter">&quot;</span></span>, <span class="integer">500</span>, <span class="integer">1000</span>)
        eq(<span class="string"><span class="delimiter">&quot;</span><span class="content">branch</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">London</span><span class="delimiter">&quot;</span></span>)
    }
    order(<span class="string"><span class="delimiter">&quot;</span><span class="content">holderLastName</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>因为这个查询包括了分页参数 (max and offset), 它会返回一个含有`getTotalCount()`方法、可以得到分页数据总数的 <a href="http://grails.github.io/grails-data-mapping/latest/api/grails/orm/PagedResultList.html">PagedResultList</a>. 两个查询依然执行，但执行得到的结果集和总数组合在`PagedResultList`中.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">println <span class="string"><span class="delimiter">&quot;</span><span class="content">Rendering </span><span class="inline"><span class="inline-delimiter">${</span>results.size()<span class="inline-delimiter">}</span></span><span class="content"> Accounts of </span><span class="inline"><span class="inline-delimiter">${</span>results.totalCount<span class="inline-delimiter">}</span></span><span class="delimiter">&quot;</span></span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_5">10.3. 描述</h3>
<div class="paragraph">
<p>Criteria queries are a type-safe, advanced way to query that uses a Groovy builder to construct potentially complex queries. It is a much better alternative to using a StringBuilder to dynamically construct an HQL query. Refer to the user guide section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#criteria">Criteria</a> for usage instructions.</p>
</div>
<div class="paragraph">
<p>方法相关:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">方法</th>
<th class="tableblock halign-left valign-top">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>list</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The default method; returns all matching rows.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>get</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a unique result, i.e. just one row. The criteria has to be formed that way, that it only queries one row. This method is not to be confused with a limit to just the first row.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>scroll</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns a scrollable result set</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>listDistinct</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If subqueries or associations are used, one may end up with the same row multiple times in the result set. In Hibernate one would do a "CriteriaSpecification.DISTINCT_ROOT_ENTITY". In Grails one can do it by just using this method.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
The <code>listDistinct()</code> method does not work well with the pagination options <code>maxResult</code> and <code>firstResult</code>. If you need distinct results with pagination, we currently recommend that you use HQL. You can find out more information from <a href="http://floledermann.blogspot.com/2007/10/solving-hibernate-criterias-distinct.html">this blog post</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If you invoke the builder with no method name</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>the <code>list()</code> method will be invoked automatically. In other words, it&#8217;s the equivalent of</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">c.list { ... }</code></pre>
</div>
</div>
<div class="paragraph">
<p>Below is a node reference for each criterion method:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Node</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>between</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where the property value is between two distinct values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>between("balance", 500, 1000)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eq</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property equals a particular value.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eq("branch", "London")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eq</strong> (case-insensitive)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A version of <strong>eq</strong> that supports an optional 3rd Map parameter to specify that the query be case-insensitive.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eq("branch", "london", [ignoreCase: true])</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eqProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property must equal another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>eqProperty("lastTx", "firstTx")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>gt</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is greater than a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gt("balance",1000)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>gtProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property must be greater than another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gtProperty("balance", "overdraft")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ge</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is greater than or equal to a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ge("balance", 1000)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>geProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property must be greater than or equal to another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>geProperty("balance", "overdraft")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>idEq</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where an objects id equals the specified value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>idEq(1)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ilike</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A case-insensitive <em>like</em> expression</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ilike("holderFirstName", "Steph%")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>in</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is contained within the specified list of values. Can also be chained with the <code>not</code> method where a property is not contained within the specified list of values. Note: <em>in</em> is a Groovy reserve word, so it must be escaped by quotes.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>'in'("age",[18..65]) or not {'in'("age",[18..65])}</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>isEmpty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property is empty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isEmpty("transactions")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>isNotEmpty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property is not empty</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isNotEmpty("transactions")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>isNull</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is <code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isNull("holderGender")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>isNotNull</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is not <code>null</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>isNotNull("holderGender")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>lt</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is less than a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>lt("balance", 1000)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ltProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property must be less than another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ltProperty("balance", "overdraft")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>le</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property is less than or equal to a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>le("balance", 1000)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>leProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property must be less than or equal to another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>leProperty("balance", "overdraft")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>like</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Equivalent to SQL like expression</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>like("holderFirstName", "Steph%")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ne</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a property does not equal a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>ne("branch", "London")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>neProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where one property does not equal another</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>neProperty("lastTx", "firstTx")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>order</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Order the results by a particular property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>order("holderLastName", "desc")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rlike</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Similar to like, but uses a regex. Only supported on Oracle and MySQL.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rlike("holderFirstName", /Steph.+/)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeEq</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size equals a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeEq("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeGt</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size is greater than a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeGt("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeGe</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size is greater than or equal to a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeGe("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeLt</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size is less than a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeLt("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeLe</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size is less than or equal to a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeLe("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sizeNe</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Where a collection property&#8217;s size is not equal to a particular value</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sizeNe("transactions", 10)</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sqlRestriction</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use arbitrary SQL to modify the resultset</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sqlRestriction "char_length(first_name) = 4"</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>With dynamic finders, you have access to options such as <code>max</code>, <code>sort</code>, etc. These are available to criteria queries as well, but they have different names:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>order</strong>(String, String)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies both the sort column (the first argument) and the sort order (either <em>asc</em> or <em>desc</em>).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>order "age", "desc"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>firstResult</strong>(int)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the offset for the results. A value of 0 will return all records up to the maximum specified.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>firstResult 20</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>maxResults</strong>(int)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the maximum number of records to return.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>maxResults 10</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>cache</strong>(boolean)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Indicates if the query should be cached (if the query cache is enabled).</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cache 'true'</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Criteria also support the notion of projections. A projection is used to change the nature of the results. For example the following query uses a projection to count the number of distinct <code>branch</code> names that exist for each <code>Account</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> c = Account.createCriteria()
<span class="keyword">def</span> branchCount = c.get {
    projections {
        countDistinct <span class="string"><span class="delimiter">&quot;</span><span class="content">branch</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following table summarizes the different projections and what they do:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top">Example</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>property</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the given property in the returned results</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>property("firstName")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>distinct</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns results using a single or collection of distinct property names</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>distinct("fn") or distinct(['fn', 'ln'])</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>avg</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the average value of the given property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>avg("age")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>count</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the count of the given property name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>count("branch")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>countDistinct</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the count of the given property name for distinct rows</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>countDistinct("branch")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>groupProperty</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Groups the results by the given property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupProperty("lastName")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>max</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the maximum value of the given property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>max("age")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>min</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the minimum value of the given property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>min("age")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>sum</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns the sum of the given property</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>sum("balance")</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>rowCount</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Returns count of the number of rows returned</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>rowCount()</code></p></td>
</tr>
</tbody>
</table>
<div class="sect3">
<h4 id="ref-domain-classes-delete">10.3.1. delete方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_delete">11. delete</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_2">11.1. Purpose</h3>
<div class="paragraph">
<p>Deletes a persistent instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_2">11.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> book = <span class="predefined-type">Book</span>.get(<span class="integer">1</span>)
book.delete()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_2">11.3. Description</h3>
<div class="paragraph">
<p>The <code>delete</code> method informs the persistence context that a persistent instance should be deleted. Equivalent to the Hibernate <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#delete(java/lang/Object).html">delete</a> method.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Calling <code>delete</code> on a transient instance will result in an error
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>flush</code> - If set to <code>true</code> the persistent context will be flushed resulting in the instance being deleted immediately. For example:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> book = <span class="predefined-type">Book</span>.get(<span class="integer">1</span>)
book.delete(<span class="key">flush</span>: <span class="predefined-constant">true</span>)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-discard">11.3.1. discard方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_discard">12. discard</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_3">12.1. Purpose</h3>
<div class="paragraph">
<p>Discards any changes that have been made to a persistent instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_3">12.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.get(<span class="integer">1</span>)
b.title = <span class="string"><span class="delimiter">&quot;</span><span class="content">Blah</span><span class="delimiter">&quot;</span></span>
b.discard() <span class="comment">// changes won't be applied now</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_3">12.3. Description</h3>
<div class="paragraph">
<p>The <code>discard</code> method informs the persistence context that the instance should not be saved. The <code>discard</code> method is equivalent to using Hibernate&#8217;s <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#evict(java/lang/Object).html">evict</a> method.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that this method will not clean or reset the object with the original values; it will just prevent it from being automatically saved by Grails.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-embedded">12.3.1. embedded静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_embedded">13. embedded</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_4">13.1. Purpose</h3>
<div class="paragraph">
<p>Supports embedding domain components into domain classes - otherwise known as <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#gormComposition">composition</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_4">13.2. Examples</h3>
<div class="paragraph">
<p>Given these domain classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Person</span> {

    <span class="predefined-type">String</span> name
    Country bornInCountry
    Country livesInCountry

    <span class="directive">static</span> embedded = [<span class="string"><span class="delimiter">'</span><span class="content">bornInCountry</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">livesInCountry</span><span class="delimiter">'</span></span>]
}

<span class="comment">// If you don't want an associated table created for this class, either</span>
<span class="comment">// define it in the same file as Person or put Country.groovy under the</span>
<span class="comment">// src/main/groovy directory.</span>
<span class="type">class</span> <span class="class">Country</span> {
    <span class="predefined-type">String</span> iso3
    <span class="predefined-type">String</span> name
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Grails will generate a <code>person</code> database table that looks like:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top"><strong>Column</strong></th>
<th class="tableblock halign-left valign-top"><strong>Type</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">NAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR(255)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BORN_IN_COUNTRY_ISO3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR(255)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BORN_IN_COUNTRY_NAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR(255)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LIVES_IN_COUNTRY_ISO3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR(255)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">LIVES_IN_COUNTRY_NAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">VARCHAR(255)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_description_4">13.3. Description</h3>
<div class="paragraph">
<p>An embedded component does not store its data in its own table as a regular domain class relationship does. Instead, the data is included in the owner&#8217;s table. So in the above example, the <code>Country</code> fields appear in the <code>person</code> table. This means that queries are faster because there is no join required, but you may end up with duplicate data across tables.</p>
</div>
<div class="paragraph">
<p>The embedded component class is typically declared in the same source file as the owning class or in its own file under <code>src/main/groovy</code>. You <em>can</em> put the component class under <code>grails-app/domain</code>, but if you do so Grails will automatically create a dedicated table for it. Putting the class under <code>src/main/groovy</code> is usually the best option because you can then share the component across multiple domain classes.</p>
</div>
<div class="paragraph">
<p>Querying on embedded properties is no different from querying on regular relationships, so you can for example still do:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Person.findAllByBornInCountry(brazil)
Person.findAllByLivesInCountry(france)</code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>brazil</code> and <code>france</code> are instances of <code>Country</code>.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-errors">13.3.1. errors属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_errors">14. errors</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_5">14.1. Purpose</h3>
<div class="paragraph">
<p>An instance of the Spring {springapi}org/springframework/validation/Errors.html[Errors] interface containing data binding and/or validation errors.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_5">14.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> user = <span class="keyword">new</span> User(params)

<span class="keyword">if</span> (user.validate()) {
    <span class="comment">// do something with user</span>
}
<span class="keyword">else</span> {
    user.errors.allErrors.each {
        println <span class="local-variable">it</span>
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_5">14.3. Description</h3>
<div class="paragraph">
<p>The <code>errors</code> property is used by Grails during <a href="{guidePath}/theWebLayer.html#dataBinding">data binding</a> to store type conversion errors and during <a href="{guidePath}validation.html">validation</a> when calling the <a href="validate.html">validate</a> or <a href="save.html">save</a> methods.</p>
</div>
<div class="paragraph">
<p>You can also add your own errors using the {springapi}org/springframework/validation/Errors#reject(java/lang/String).html[reject] and {springapi}org/springframework/validation/Errors#rejectValue(java/lang/String,%20java/lang/String).html[rejectValue] methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">if</span> (params.password != params.confirm_password) {

    user.errors.reject(
        <span class="string"><span class="delimiter">'</span><span class="content">user.password.doesnotmatch</span><span class="delimiter">'</span></span>,
        [<span class="string"><span class="delimiter">'</span><span class="content">password</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">class User</span><span class="delimiter">'</span></span>] <span class="keyword">as</span> <span class="predefined-type">Object</span><span class="type">[]</span>,
        <span class="string"><span class="delimiter">'</span><span class="content">[Property [{0}] of class [{1}] does not match confirmation]</span><span class="delimiter">'</span></span>)

    <span class="comment">// The following helps with field highlighting in your view</span>
    user.errors.rejectValue(
        <span class="string"><span class="delimiter">'</span><span class="content">password</span><span class="delimiter">'</span></span>,
        <span class="string"><span class="delimiter">'</span><span class="content">user.password.doesnotmatch</span><span class="delimiter">'</span></span>)

    render(<span class="key">view</span>: <span class="string"><span class="delimiter">'</span><span class="content">signup</span><span class="delimiter">'</span></span>, <span class="key">model</span>: [<span class="key">user</span>: user])
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the example of <code>reject</code> above, <code>'user.password.doesnotmatch'</code>, is the error code corresponding to a value in <code>grails-app/i18n/message.properties</code>, <code>\['password', 'class User'\] as Object\[\]</code> is a Groovy cast from a <code>List</code> to an <code>Object</code> array to match the expected signature, and <code>'\[Property \[{0}\] of class \[{1}\] does not match confirmation\]'</code> is the default mapping string.</p>
</div>
<div class="paragraph">
<p>In the <code>rejectValue</code> example, <code>'password'</code> is the field in the view to highlight using a <code>&lt;g:hasErrors&gt;</code> tag and <code>'user.password.doesnotmatch'</code> is the i18n error code.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-executeQuery">14.3.1. executeQuery方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_executequery">15. executeQuery</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_6">15.1. Purpose</h3>
<div class="paragraph">
<p>Executes <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#hql">HQL queries</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_6">15.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// simple query</span>
Account.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">select distinct a.number from Account a</span><span class="delimiter">&quot;</span></span>)

<span class="comment">// using with list of parameters</span>
Account.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">select distinct a.number from Account a </span><span class="delimiter">&quot;</span></span> +
                     <span class="string"><span class="delimiter">&quot;</span><span class="content">where a.branch = ? and a.created &gt; ?</span><span class="delimiter">&quot;</span></span>,
                     [<span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span>, lastMonth])

<span class="comment">// using with a single parameter and pagination params</span>
Account.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">select distinct a.number from Account a </span><span class="delimiter">&quot;</span></span> +
                     <span class="string"><span class="delimiter">&quot;</span><span class="content">where a.branch = ?</span><span class="delimiter">&quot;</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span>],
                     [<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">5</span>])

<span class="comment">// using with Map of named parameters</span>
Account.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">select distinct a.number from Account a </span><span class="delimiter">&quot;</span></span> +
                     <span class="string"><span class="delimiter">&quot;</span><span class="content">where a.branch = :branch</span><span class="delimiter">&quot;</span></span>,
                     [<span class="key">branch</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span>])

<span class="comment">// using with Map of named parameters and pagination params</span>
Account.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">select distinct a.number from Account a </span><span class="delimiter">&quot;</span></span> +
                     <span class="string"><span class="delimiter">&quot;</span><span class="content">where a.branch = :branch</span><span class="delimiter">&quot;</span></span>,
                     [<span class="key">branch</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span>, <span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">5</span>])

<span class="comment">// same as previous</span>
Account.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">select distinct a.number from Account a </span><span class="delimiter">&quot;</span></span> +
                     <span class="string"><span class="delimiter">&quot;</span><span class="content">where a.branch = :branch</span><span class="delimiter">&quot;</span></span>,
                     [<span class="key">branch</span>: <span class="string"><span class="delimiter">'</span><span class="content">London</span><span class="delimiter">'</span></span>], [<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">5</span>])

<span class="comment">// tell underlying Hibernate Query object to not attach newly retrieved</span>
<span class="comment">// objects to the session, will only save with explicit `save`</span>
Account.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">select distinct a.number from Account a</span><span class="delimiter">&quot;</span></span>,
                     <span class="predefined-constant">null</span>, [<span class="key">readOnly</span>: <span class="predefined-constant">true</span>])

<span class="comment">// time request out after 18 seconds</span>
Account.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">select distinct a.number from Account a</span><span class="delimiter">&quot;</span></span>,
                     <span class="predefined-constant">null</span>, [<span class="key">timeout</span>: <span class="integer">18</span>])

<span class="comment">// have Hibernate Query object return 30 rows at a time</span>
Account.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">select distinct a.number from Account a</span><span class="delimiter">&quot;</span></span>,
                     <span class="predefined-constant">null</span>, [<span class="key">fetchSize</span>: <span class="integer">30</span>])

<span class="comment">// modify the FlushMode of the Query (default is `FlushMode.AUTO`)</span>
Account.executeQuery(<span class="string"><span class="delimiter">&quot;</span><span class="content">select distinct a.number from Account a</span><span class="delimiter">&quot;</span></span>,
                     <span class="predefined-constant">null</span>, [<span class="key">flushMode</span>: FlushMode.MANUAL])</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_6">15.3. Description</h3>
<div class="paragraph">
<p>The <code>executeQuery</code> method allows the execution of arbitrary HQL queries. HQL queries can return domain class instances, or `Array`s of specified data when the query selects individual fields or calculated values. The basic syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Book</span>.executeQuery(<span class="predefined-type">String</span> query)
<span class="predefined-type">Book</span>.executeQuery(<span class="predefined-type">String</span> query, <span class="predefined-type">List</span> positionalParams)
<span class="predefined-type">Book</span>.executeQuery(<span class="predefined-type">String</span> query, <span class="predefined-type">List</span> positionalParams, <span class="predefined-type">Map</span> metaParams)
<span class="predefined-type">Book</span>.executeQuery(<span class="predefined-type">String</span> query, <span class="predefined-type">Map</span> namedParams)
<span class="predefined-type">Book</span>.executeQuery(<span class="predefined-type">String</span> query, <span class="predefined-type">Map</span> namedParams, <span class="predefined-type">Map</span> metaParams)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query</code> - An HQL query</p>
</li>
<li>
<p><code>positionalParams</code> - A <code>List</code> of parameters for a positional parameterized query</p>
</li>
<li>
<p><code>namedParams</code> - A <code>Map</code> of named parameters for a named parameterized query</p>
</li>
<li>
<p><code>metaParams</code> - A <code>Map</code> of pagination parameters <code>max</code> or/and <code>offset</code>, as well as Hibernate query parameters <code>readOnly</code>, <code>fetchSize</code>, <code>timeout</code>, and <code>flushMode</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-executeUpdate">15.3.1. executeUpdate方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_executeupdate">16. executeUpdate</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_7">16.1. Purpose</h3>
<div class="paragraph">
<p>Updates the database with <a href="http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/batch.html#batch-direct">DML-style operations</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_7">16.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Account.executeUpdate(<span class="string"><span class="delimiter">&quot;</span><span class="content">delete Book b where b.pages &gt; 100</span><span class="delimiter">&quot;</span></span>)

Account.executeUpdate(<span class="string"><span class="delimiter">&quot;</span><span class="content">delete Book b where b.title like ?</span><span class="delimiter">&quot;</span></span>,
                      [<span class="string"><span class="delimiter">'</span><span class="content">Groovy In Action</span><span class="delimiter">'</span></span>])

Account.executeUpdate(<span class="string"><span class="delimiter">&quot;</span><span class="content">delete Book b where b.author=?</span><span class="delimiter">&quot;</span></span>,
                      [Author.load(<span class="integer">1</span>)])

Account.executeUpdate(<span class="string"><span class="delimiter">&quot;</span><span class="content">update Book b set b.title='Groovy In Action'</span><span class="delimiter">&quot;</span></span> +
                      <span class="string"><span class="delimiter">&quot;</span><span class="content">where b.title='GINA'</span><span class="delimiter">&quot;</span></span>)

Account.executeUpdate(<span class="string"><span class="delimiter">&quot;</span><span class="content">update Book b set b.title=:newTitle </span><span class="delimiter">&quot;</span></span> +
                      <span class="string"><span class="delimiter">&quot;</span><span class="content">where b.title=:oldTitle</span><span class="delimiter">&quot;</span></span>,
                      [<span class="key">newTitle</span>: <span class="string"><span class="delimiter">'</span><span class="content">Groovy In Action</span><span class="delimiter">'</span></span>, <span class="key">oldTitle</span>: <span class="string"><span class="delimiter">'</span><span class="content">GINA</span><span class="delimiter">'</span></span>])</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_7">16.3. Description</h3>
<div class="paragraph">
<p><a href="GORM.html">GORM</a> does not provide a <code>deleteAll</code> method as deleting data must be done with caution. To delete data you can use <code>executeUpdate</code>. The basic syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Book</span>.executeUpdate(<span class="predefined-type">String</span> query)
<span class="predefined-type">Book</span>.executeUpdate(<span class="predefined-type">String</span> query, <span class="predefined-type">List</span> positionalParams)
<span class="predefined-type">Book</span>.executeUpdate(<span class="predefined-type">String</span> query, <span class="predefined-type">Map</span> namedParams)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query</code> - An HQL query with DML-style operations</p>
</li>
<li>
<p><code>positionalParams</code> - A <code>List</code> of parameters for a positional parameterized HQL query</p>
</li>
<li>
<p><code>namedParams</code> - A <code>Map</code> of parameters for a named parameterized HQL query</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-exists">16.3.1. exists方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_exists">17. exists</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_8">17.1. Purpose</h3>
<div class="paragraph">
<p>Checks whether an instance exists for the specified id</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_8">17.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> accountId = ...
if (Account.exists(accountId)) {
    <span class="comment">// do something</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_8">17.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code> - The id of the object</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-fetchMode">17.3.1. fetchMode静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fetchmode">18. fetchMode</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_9">18.1. Purpose</h3>
<div class="paragraph">
<p>Allows the configuration of an associations fetch strategy (<em>eager</em> or <em>lazy</em>)</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_9">18.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {

    <span class="predefined-type">String</span> name

    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]

    <span class="directive">static</span> fetchMode = [<span class="key">books</span>: <span class="string"><span class="delimiter">'</span><span class="content">eager</span><span class="delimiter">'</span></span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the <code>fetchMode</code> static property specifies that the <code>book</code> association should be fetching eagerly</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_9">18.3. Description</h3>
<div class="paragraph">
<p>By default associations in Grails are fetched lazily (each record is read from the database only when it is first accessed from the collection). This makes sense for most cases, however in the case where you have a small number of records to fetch and/or are repeatedly required to load lazy associations (resulting in N+1 queries) it makes sense to use eager fetching.</p>
</div>
<div class="paragraph">
<p>In the case of eager fetching and a one-to-many association, the instance as well as the association will be initialized when they are loaded (eagerly). However, caution should be observed when using eager fetching, since being too eager can result in your entire database being loaded into memory!</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-find">18.3.1. find方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_find">19. find</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_10">19.1. Purpose</h3>
<div class="paragraph">
<p>Finds the first matching result for the given query or <code>null</code> if no instance is found</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_10">19.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// Dan brown's first book</span>
<span class="predefined-type">Book</span>.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author='Dan Brown'</span><span class="delimiter">&quot;</span></span>)

<span class="comment">// with a positional parameter</span>
<span class="predefined-type">Book</span>.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author=?</span><span class="delimiter">&quot;</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">Dan Brown</span><span class="delimiter">'</span></span>])

<span class="comment">// with a named parameter</span>
<span class="predefined-type">Book</span>.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author=:author</span><span class="delimiter">&quot;</span></span>, [<span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Dan Brown</span><span class="delimiter">'</span></span>])

<span class="comment">// use the query cache</span>
<span class="predefined-type">Book</span>.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author='Dan Brown'</span><span class="delimiter">&quot;</span></span>, [<span class="key">cache</span>: <span class="predefined-constant">true</span>])
<span class="predefined-type">Book</span>.find(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author=:author</span><span class="delimiter">&quot;</span></span>,
          [<span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Dan Brown</span><span class="delimiter">'</span></span>],
          [<span class="key">cache</span>: <span class="predefined-constant">true</span>])

<span class="comment">// query by example</span>
<span class="keyword">def</span> example = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">author</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Dan Brown</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">Book</span>.find(example)

<span class="comment">// Using where criteria (since Grails 2.0)</span>
Person p = Person.find { firstName == <span class="string"><span class="delimiter">&quot;</span><span class="content">Bart</span><span class="delimiter">&quot;</span></span> }</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_10">19.3. Description</h3>
<div class="paragraph">
<p>The <code>find</code> method allows querying with Hibernate&#8217;s query language <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#hql">HQL</a> and querying by example. The basic syntax is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Book</span>.find(<span class="predefined-type">String</span> query)
<span class="predefined-type">Book</span>.find(<span class="predefined-type">String</span> query, <span class="predefined-type">Collection</span> positionalParams)
<span class="predefined-type">Book</span>.find(<span class="predefined-type">String</span> query, <span class="predefined-type">Collection</span> positionalParams, <span class="predefined-type">Map</span> queryParams)
<span class="predefined-type">Book</span>.find(<span class="predefined-type">String</span> query, <span class="predefined-type">Map</span> namedParams)
<span class="predefined-type">Book</span>.find(<span class="predefined-type">String</span> query, <span class="predefined-type">Map</span> namedParams, <span class="predefined-type">Map</span> queryParams)
<span class="predefined-type">Book</span>.find(<span class="predefined-type">Book</span> example)
<span class="predefined-type">Book</span>.find(Closure whereCriteria)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query</code> - An HQL query</p>
</li>
<li>
<p><code>positionalParams</code> - A <code>List</code> of parameters for a positional parametrized HQL query</p>
</li>
<li>
<p><code>namedParams</code> - A <code>Map</code> of named parameters a HQL query</p>
</li>
<li>
<p><code>queryParams</code> - A <code>Map</code> of query parameters. Currently, only <code>cache</code> is supported</p>
</li>
<li>
<p><code>example</code> - An instance of the domain class for query by example</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findAll">19.3.1. findAll方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findall">20. findAll</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_11">20.1. Purpose</h3>
<div class="paragraph">
<p>Finds all of domain class instances matching the specified query</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_11">20.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// everything</span>
<span class="predefined-type">Book</span>.findAll()

<span class="comment">// with a positional parameter</span>
<span class="predefined-type">Book</span>.findAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author=?</span><span class="delimiter">&quot;</span></span>, [<span class="string"><span class="delimiter">'</span><span class="content">Dan Brown</span><span class="delimiter">'</span></span>])

<span class="comment">// 10 books from Dan Brown staring from 5th book ordered by release date</span>
<span class="predefined-type">Book</span>.findAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author=? order by b.releaseDate</span><span class="delimiter">&quot;</span></span>,
             [<span class="string"><span class="delimiter">'</span><span class="content">Dan Brown</span><span class="delimiter">'</span></span>], [<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">5</span>])

<span class="comment">// examples with max/offset usage</span>
<span class="keyword">def</span> query = <span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author='Dan Brown' order by b.releaseDate</span><span class="delimiter">&quot;</span></span>

<span class="comment">// first 10 books</span>
<span class="predefined-type">Book</span>.findAll(query, [<span class="key">max</span>: <span class="integer">10</span>])

<span class="comment">// 10 books starting from 5th</span>
<span class="predefined-type">Book</span>.findAll(query, [<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">5</span>])

<span class="comment">// examples with named parameters</span>
<span class="predefined-type">Book</span>.findAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author=:author</span><span class="delimiter">&quot;</span></span>,
             [<span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Dan Brown</span><span class="delimiter">'</span></span>])
<span class="predefined-type">Book</span>.findAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author=:author</span><span class="delimiter">&quot;</span></span>,
             [<span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Dan Brown</span><span class="delimiter">'</span></span>], [<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">5</span>])
<span class="predefined-type">Book</span>.findAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author in (:authors)</span><span class="delimiter">&quot;</span></span>,
             [<span class="key">authors</span>: [<span class="string"><span class="delimiter">'</span><span class="content">Dan Brown</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Jack London</span><span class="delimiter">'</span></span>]])

<span class="comment">// examples with tables join</span>
<span class="predefined-type">Book</span>.findAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where not exists </span><span class="delimiter">&quot;</span></span> +
                <span class="string"><span class="delimiter">&quot;</span><span class="content">(from Borrow as br where br.book = b)</span><span class="delimiter">&quot;</span></span>)

<span class="comment">// query by example</span>
<span class="keyword">def</span> example = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">author</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Dan Brown</span><span class="delimiter">&quot;</span></span>)
<span class="predefined-type">Book</span>.findAll(example)

<span class="comment">// Use where criteria (since Grails 2.0)</span>
<span class="keyword">def</span> results = Person.findAll {
     lastName == <span class="string"><span class="delimiter">&quot;</span><span class="content">Simpson</span><span class="delimiter">&quot;</span></span>
}
<span class="keyword">def</span> results = Person.findAll(<span class="key">sort</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>) {
     lastName == <span class="string"><span class="delimiter">&quot;</span><span class="content">Simpson</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_11">20.3. Description</h3>
<div class="paragraph">
<p>The <code>findAll</code> method allows querying with Hibernate&#8217;s query language <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#hql">HQL</a> and querying by example, returning all matching instances. Pagination can be controlled using the <code>max</code> and <code>offset</code> parameters:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Book</span>.findAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author=:author</span><span class="delimiter">&quot;</span></span>,
             [<span class="key">author</span>: <span class="string"><span class="delimiter">'</span><span class="content">Dan Brown</span><span class="delimiter">'</span></span>], [<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">5</span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>findAll</code> method supports the 2nd level cache:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Book</span>.findAll(<span class="string"><span class="delimiter">&quot;</span><span class="content">from Book as b where b.author=:author</span><span class="delimiter">&quot;</span></span>,
             [<span class="key">author</span>:<span class="string"><span class="delimiter">'</span><span class="content">Dan Brown</span><span class="delimiter">'</span></span>], [<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">5</span>, <span class="key">cache</span>: <span class="predefined-constant">true</span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The basic syntax for the method is:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Book</span>.findAll()
<span class="predefined-type">Book</span>.findAll(<span class="predefined-type">String</span> query)
<span class="predefined-type">Book</span>.findAll(<span class="predefined-type">String</span> query, <span class="predefined-type">Collection</span> positionalParams)
<span class="predefined-type">Book</span>.findAll(<span class="predefined-type">String</span> query, <span class="predefined-type">Collection</span> positionalParams, <span class="predefined-type">Map</span> queryParams)
<span class="predefined-type">Book</span>.findAll(<span class="predefined-type">String</span> query, <span class="predefined-type">Map</span> namedParams)
<span class="predefined-type">Book</span>.findAll(<span class="predefined-type">String</span> query, <span class="predefined-type">Map</span> namedParams, <span class="predefined-type">Map</span> queryParams)
<span class="predefined-type">Book</span>.findAll(<span class="predefined-type">Book</span> example)
<span class="predefined-type">Book</span>.findAll(Closure whereCriteria)
<span class="predefined-type">Book</span>.findAll(<span class="predefined-type">Map</span> queryParams, Closure whereCriteria)</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If you have a join in your HQL, the method will return a <code>List</code> of `Array`s containing domain class instances. You may wish to use <a href="executeQuery.html">executeQuery</a> in this case so you have more flexibility in specifying what gets returned.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>query</code> - An HQL query</p>
</li>
<li>
<p><code>positionalParams</code> - A <code>List</code> of parameters for a positional parametrized HQL query</p>
</li>
<li>
<p><code>namedParams</code> - A <code>Map</code> of named parameters a HQL query</p>
</li>
<li>
<p><code>queryParams</code> - A <code>Map</code> containing parameters <em>max</em>, and/or <em>offset</em> and/or <em>cache</em></p>
</li>
<li>
<p><code>example</code> - An instance of the domain class for query by example</p>
</li>
<li>
<p><code>readOnly</code> - <code>true</code> if returned objects should not be automatically dirty-checked (simlar to <code>read()</code>)</p>
</li>
<li>
<p><code>fetchSize</code> - number of rows fetched by the underlying JDBC driver per round trip</p>
</li>
<li>
<p><code>flushMode</code> - Hibernate <code>FlushMode</code> override, defaults to <code>FlushMode.AUTO</code></p>
</li>
<li>
<p><code>timeout</code> - query timeout in seconds</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findAllBy">20.3.1. findAllBy方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findallby">21. findAllBy*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_12">21.1. Purpose</h3>
<div class="paragraph">
<p>Dynamic method that uses the properties of the domain class to create query method expressions that return all matching instances of the domain class</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_12">21.2. Examples</h3>
<div class="paragraph">
<p>Given this domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="predefined-type">String</span> title
    <span class="predefined-type">Date</span> releaseDate
    <span class="predefined-type">String</span> author
    <span class="predefined-type">Boolean</span> paperback
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are all possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> results = <span class="predefined-type">Book</span>.findAllByTitle(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>,
                  [<span class="key">max</span>: <span class="integer">10</span>, <span class="key">sort</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>, <span class="key">order</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span>, <span class="key">offset</span>: <span class="integer">100</span>])

results = <span class="predefined-type">Book</span>.findAllByTitleAndAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Sum of All Fears</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Tom Clancy</span><span class="delimiter">&quot;</span></span>)

results = <span class="predefined-type">Book</span>.findAllByReleaseDateBetween(firstDate, <span class="keyword">new</span> <span class="predefined-type">Date</span>())

results = <span class="predefined-type">Book</span>.findAllByReleaseDateGreaterThanEquals(firstDate)

results = <span class="predefined-type">Book</span>.findAllByTitleLike(<span class="string"><span class="delimiter">&quot;</span><span class="content">%Hobbit%</span><span class="delimiter">&quot;</span></span>)

results = <span class="predefined-type">Book</span>.findAllByTitleIlike(<span class="string"><span class="delimiter">&quot;</span><span class="content">%Hobbit%</span><span class="delimiter">&quot;</span></span>) <span class="comment">// ignore case</span>

results = <span class="predefined-type">Book</span>.findAllByTitleNotEqual(<span class="string"><span class="delimiter">&quot;</span><span class="content">Harry Potter</span><span class="delimiter">&quot;</span></span>)

results = <span class="predefined-type">Book</span>.findAllByReleaseDateIsNull()

results = <span class="predefined-type">Book</span>.findAllByReleaseDateIsNotNull()

results = <span class="predefined-type">Book</span>.findAllPaperbackByAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">Douglas Adams</span><span class="delimiter">&quot;</span></span>)

results = <span class="predefined-type">Book</span>.findAllNotPaperbackByAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">Douglas Adams</span><span class="delimiter">&quot;</span></span>)

results = <span class="predefined-type">Book</span>.findAllByAuthorInList([<span class="string"><span class="delimiter">&quot;</span><span class="content">Douglas Adams</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Hunter S. Thompson</span><span class="delimiter">&quot;</span></span>])</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_12">21.3. Description</h3>
<div class="paragraph">
<p>GORM supports the notion of <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">Dynamic Finders</a>. The <code>findAllBy*</code> method finds all the results for the given method expression.</p>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>metaParams</code> - A <code>M`ap containing pagination parameters `max</code>, <code>order</code>, <code>offset</code> and <code>sort</code> and metaParameters <code>readOnly</code>, <code>timeout</code>, <code>fetchSize</code>, and <code>flushMode</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Pagination and sorting parameters can be used as the last argument to a dynamic method:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> results = <span class="predefined-type">Book</span>.findAllByTitle(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>,
                 [<span class="key">max</span>: <span class="integer">10</span>, <span class="key">sort</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>, <span class="key">order</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span>, <span class="key">offset</span>: <span class="integer">100</span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>If no items meet the supplied criteria an empty list is returned.</p>
</div>
<div class="paragraph">
<p>The following operator names can be used within the respective dynamic methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LessThan</code></p>
</li>
<li>
<p><code>LessThanEquals</code></p>
</li>
<li>
<p><code>GreaterThan</code></p>
</li>
<li>
<p><code>GreaterThanEquals</code></p>
</li>
<li>
<p><code>Between</code></p>
</li>
<li>
<p><code>Like</code></p>
</li>
<li>
<p><code>Ilike</code> (i.e. ignorecase like)</p>
</li>
<li>
<p><code>IsNotNull</code></p>
</li>
<li>
<p><code>IsNull</code></p>
</li>
<li>
<p><code>Not</code></p>
</li>
<li>
<p><code>NotEqual</code></p>
</li>
<li>
<p><code>And</code></p>
</li>
<li>
<p><code>Or</code></p>
</li>
<li>
<p><code>InList</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These operator names can be considered keywords, and you will run into problems when querying domain classes that have one of these names as property names. For more information on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">dynamic finders</a> refer to the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findAllWhere">21.3.1. findAllWhere方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findallwhere">22. findAllWhere</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_13">22.1. Purpose</h3>
<div class="paragraph">
<p>Uses named arguments corresponding to property names of the domain class to execute a query returning all matching results.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_13">22.2. Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

   <span class="predefined-type">String</span> title
   <span class="predefined-type">Date</span> releaseDate
   <span class="predefined-type">String</span> author

   <span class="directive">static</span> constraints = {
      releaseDate <span class="key">nullable</span>: <span class="predefined-constant">true</span>
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can query in the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> books = <span class="predefined-type">Book</span>.findAllWhere(<span class="key">author</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Stephen King</span><span class="delimiter">&quot;</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Stand</span><span class="delimiter">&quot;</span></span>)

<span class="keyword">def</span> unreleasedBooks = <span class="predefined-type">Book</span>.findAllWhere(<span class="key">releaseDate</span>: <span class="predefined-constant">null</span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_13">22.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queryParams</code> - A Map of key/value pairs to be used in the query</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findBy">22.3.1. findBy方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findby">23. findBy*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_14">23.1. Purpose</h3>
<div class="paragraph">
<p>Dynamic method that uses the properties of the domain class to execute a query returning the first matching result.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_14">23.2. Examples</h3>
<div class="paragraph">
<p>Given the domain class <code>Book</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
    <span class="predefined-type">String</span> title
    <span class="predefined-type">Date</span> releaseDate
    <span class="predefined-type">String</span> author
    <span class="predefined-type">Boolean</span> paperback
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are all possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.findByTitle(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
b = <span class="predefined-type">Book</span>.findByTitleAndAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Sum of All Fears</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Tom Clancy</span><span class="delimiter">&quot;</span></span>)
b = <span class="predefined-type">Book</span>.findByReleaseDateBetween(firstDate, <span class="keyword">new</span> <span class="predefined-type">Date</span>())
b = <span class="predefined-type">Book</span>.findByReleaseDateGreaterThanEquals(firstDate)
b = <span class="predefined-type">Book</span>.findByReleaseDateLessThanEquals(firstDate)
b = <span class="predefined-type">Book</span>.findByTitleLike(<span class="string"><span class="delimiter">&quot;</span><span class="content">%Hobbit%</span><span class="delimiter">&quot;</span></span>)
b = <span class="predefined-type">Book</span>.findByTitleIlike(<span class="string"><span class="delimiter">&quot;</span><span class="content">%Hobbit%</span><span class="delimiter">&quot;</span></span>) <span class="comment">// ignores case</span>
b = <span class="predefined-type">Book</span>.findByTitleNotEqual(<span class="string"><span class="delimiter">&quot;</span><span class="content">Harry Potter</span><span class="delimiter">&quot;</span></span>)
b = <span class="predefined-type">Book</span>.findByReleaseDateIsNull()
b = <span class="predefined-type">Book</span>.findByReleaseDateIsNotNull()
b = <span class="predefined-type">Book</span>.findPaperbackByAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">Douglas Adams</span><span class="delimiter">&quot;</span></span>)
b = <span class="predefined-type">Book</span>.findNotPaperbackByAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">Douglas Adams</span><span class="delimiter">&quot;</span></span>)
b = <span class="predefined-type">Book</span>.findByAuthorInList([<span class="string"><span class="delimiter">&quot;</span><span class="content">Douglas Adams</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Hunter S. Thompson</span><span class="delimiter">&quot;</span></span>])</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_14">23.3. Description</h3>
<div class="paragraph">
<p>GORM supports the notion of <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">Dynamic Finders</a>. The <code>findBy*</code> method finds the first result for the given method expression.</p>
</div>
<div class="paragraph">
<p>The following operator names can be used within the respective dynamic methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>LessThan</code></p>
</li>
<li>
<p><code>LessThanEquals</code></p>
</li>
<li>
<p><code>GreaterThan</code></p>
</li>
<li>
<p><code>GreaterThanEquals</code></p>
</li>
<li>
<p><code>Between</code></p>
</li>
<li>
<p><code>Like</code></p>
</li>
<li>
<p><code>Ilike</code> (i.e. ignorecase like)</p>
</li>
<li>
<p><code>IsNotNull</code></p>
</li>
<li>
<p><code>IsNull</code></p>
</li>
<li>
<p><code>Not</code></p>
</li>
<li>
<p><code>NotEqual</code></p>
</li>
<li>
<p><code>And</code></p>
</li>
<li>
<p><code>Or</code></p>
</li>
<li>
<p><code>InList</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The above operator names can be considered keywords, and you will run into problems when querying domain classes that have one of these names used as property names. For more information on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">dynamic finders</a> refer to the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findOrCreateBy">23.3.1. findOrCreateBy方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findorcreateby">24. findOrCreateBy*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_15">24.1. Purpose</h3>
<div class="paragraph">
<p>Dynamic method that uses the properties of the domain class to create query method expressions that return the first result of the query. This method behaves like <a href="../Domain%20Classes/findBy.html">findBy</a> except that it will never return <code>null</code>.  If a matching instance cannot be found then a new instance will be created and returned, populated with values represented in the query parameters. The difference between this method and <a href="../Domain%20Classes/findOrSaveBy.html">findOrSaveBy</a> is that this method will not save a newly created instance where <a href="../Domain%20Classes/findOrSaveBy.html">findOrSaveBy</a> does.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_15">24.2. Examples</h3>
<div class="paragraph">
<p>Given the domain class <code>Book</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
   <span class="predefined-type">String</span> title
   <span class="predefined-type">String</span> author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are all possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.findOrCreateByTitle(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
b = <span class="predefined-type">Book</span>.findOrCreateByTitleAndAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Sum of All Fears</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Tom Clancy</span><span class="delimiter">&quot;</span></span>)
b = <span class="predefined-type">Book</span>.findByAuthorInList([<span class="string"><span class="delimiter">&quot;</span><span class="content">Douglas Adams</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Hunter S. Thompson</span><span class="delimiter">&quot;</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are roughly equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.findOrCreateByTitle(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.findByTitle(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">if</span> (!b) {
    b = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_15">24.3. Description</h3>
<div class="paragraph">
<p>GORM supports the notion of <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">Dynamic Finders</a>. The <code>findOrCreateBy*</code> method finds the first result for the given method expression.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because this method potentially creates a new instance and populates properties on that instance, only exact match criteria are allowed.  For example, <code>Book.findOrCreateByDate(dateValue)</code> is valid but <code>Book.findOrCreateByDateGreaterThan(dateValue)</code> is not.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findOrCreateWhere">24.3.1. findOrCreateWhere方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findorcreatewhere">25. findOrCreateWhere</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_16">25.1. Purpose</h3>
<div class="paragraph">
<p>Uses named arguments that match the property names of the domain class to produce a query that returns the first result.  This method behaves just like <a href="../Domain%20Classes/findWhere.html">findWhere</a> except that it will never return <code>null</code>.  If a matching instance cannot be found then a new instance will be created, populated with values from the query parameters and returned.  The difference between this method and <a href="../Domain%20Classes/findOrSaveWhere.html">findOrSaveWhere</a> is that this method will not save a newly created instance where <a href="../Domain%20Classes/findOrSaveWhere.html">findOrSaveWhere</a> does.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_16">25.2. Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

   <span class="predefined-type">String</span> title
   <span class="predefined-type">Date</span> releaseDate
   <span class="predefined-type">String</span> author

   <span class="directive">static</span> constraints = {
      releaseDate <span class="key">nullable</span>: <span class="predefined-constant">true</span>
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can query in the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> book = <span class="predefined-type">Book</span>.findOrCreateWhere(<span class="key">author</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Stephen King</span><span class="delimiter">&quot;</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Stand</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_16">25.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queryParams</code> - A <code>Map</code> of key/value pairs to be used in the query. If no matching instance is found then this data is used to initialize a new instance.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findOrSaveBy">25.3.1. findOrSaveBy方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findorsaveby">26. findOrSaveBy*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_17">26.1. Purpose</h3>
<div class="paragraph">
<p>Dynamic method that uses the properties of the domain class to create query method expressions that return the first result of the query. This method behaves like <a href="../Domain%20Classes/findBy.html">findBy</a> except that it will never return <code>null</code>.  If a matching instance cannot be found then a new instance will be created, populated with values represented in the query parameters, saved and returned. The difference between this method and <a href="../Domain%20Classes/findOrCreateBy.html">findOrCreateBy</a> is that this method will save any newly created instance where <a href="../Domain%20Classes/findOrCreateBy.html">findOrCreateBy</a> does not.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_17">26.2. Examples</h3>
<div class="paragraph">
<p>Given the domain class <code>Book</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {
   <span class="predefined-type">String</span> title
   <span class="predefined-type">String</span> author
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are all possible:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.findOrSaveByTitleAndAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Sum of All Fears</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Tom Clancy</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following are roughly equivalent:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.findOrSaveByTitleAndAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Sum of All Fears</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Tom Clancy</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.findByTitleAndAuthor(<span class="string"><span class="delimiter">&quot;</span><span class="content">The Sum of All Fears</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">Tom Clancy</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">if</span> (!b) {
    b = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Sum of All Fears</span><span class="delimiter">&quot;</span></span>, <span class="key">author</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Tom Clancy</span><span class="delimiter">&quot;</span></span>)
    b.save()
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_17">26.3. Description</h3>
<div class="paragraph">
<p>GORM supports the notion of <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#finders">Dynamic Finders</a>. The <code>findOrSaveBy*</code> method finds the first result for the given method expression.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Because this method potentially creates a new instance and populates properties on that instance, only exact match criteria are allowed.  For example, <code>Book.findOrSaveByTitle(authorValue)</code> is valid but <code>Book.findOrSaveByAuthorInList(listOfNames)</code> is not.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findOrSaveWhere">26.3.1. findOrSaveWhere方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findorsavewhere">27. findOrSaveWhere</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_18">27.1. Purpose</h3>
<div class="paragraph">
<p>Uses named arguments corresponding to property names of the domain class to execute a query returning the first matching result. This method behaves just like <a href="../Domain%20Classes/findWhere.html">findWhere</a> except that it will never return <code>null</code>. If a matching instance cannot be found in the database then a new instance is created, populated with values from the query parameters, saved and returned.  The difference between this method and <a href="../Domain%20Classes/findOrCreateWhere.html">findOrCreateWhere</a> is that this method will save a newly created instance where <a href="../Domain%20Classes/findOrCreateWhere.html">findOrCreateWhere</a> does not.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_18">27.2. Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

   <span class="predefined-type">String</span> title
   <span class="predefined-type">Date</span> releaseDate
   <span class="predefined-type">String</span> author

   <span class="directive">static</span> constraints = {
      releaseDate <span class="key">nullable</span>: <span class="predefined-constant">true</span>
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can query in the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> book = <span class="predefined-type">Book</span>.findOrSaveWhere(<span class="key">author</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Stephen King</span><span class="delimiter">&quot;</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Stand</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_18">27.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queryParams</code> - A Map of key/value pairs to be used in the query. If no matching instance is found then this data is used to initialize a new instance.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-findWhere">27.3.1. findWhere方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_findwhere">28. findWhere</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_19">28.1. Purpose</h3>
<div class="paragraph">
<p>Uses named arguments corresponding to domain class property names to execute a query returning the first matching result.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_19">28.2. Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Book</span> {

   <span class="predefined-type">String</span> title
   <span class="predefined-type">Date</span> releaseDate
   <span class="predefined-type">String</span> author

   <span class="directive">static</span> constraints = {
      releaseDate <span class="key">nullable</span>: <span class="predefined-constant">true</span>
   }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can query in the form:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> book = <span class="predefined-type">Book</span>.findWhere(<span class="key">author</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Stephen King</span><span class="delimiter">&quot;</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Stand</span><span class="delimiter">&quot;</span></span>)

<span class="type">boolean</span> isReleased = <span class="predefined-type">Book</span>.findWhere(<span class="key">author</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Stephen King</span><span class="delimiter">&quot;</span></span>,
                                    <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Stand</span><span class="delimiter">&quot;</span></span>,
                                    <span class="key">releaseDate</span>: <span class="predefined-constant">null</span>) != <span class="predefined-constant">null</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_19">28.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>queryParams</code> - A <code>Map</code> of key/value pairs to be used in the query</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-first">28.3.1. first方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_first">29. first</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_20">29.1. Purpose</h3>
<div class="paragraph">
<p>Retrieves the first instance of the domain class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_20">29.2. Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Person</span> {
    <span class="predefined-type">String</span> firstName
    <span class="predefined-type">String</span> lastName
    <span class="predefined-type">Integer</span> age
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// retrieve the first person ordered by the identifier</span>
<span class="keyword">def</span> p = Person.first()

<span class="comment">// retrieve the first person ordered by the lastName property</span>
p = Person.first(<span class="key">sort</span>: <span class="string"><span class="delimiter">'</span><span class="content">lastName</span><span class="delimiter">'</span></span>)

<span class="comment">// retrieve the first person ordered by the lastName property</span>
p = Person.first(<span class="string"><span class="delimiter">'</span><span class="content">lastName</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sort</code> (optional) - The name of the property to sort by</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See also:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="last.html">last</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the first() and last() methods are not supported on domain classes which use a composite primary key.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-get">29.2.1. get方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_get">30. get</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_21">30.1. Purpose</h3>
<div class="paragraph">
<p>Retrieves an instance of the domain class for the specified id. <code>null</code> is returned if the row with the specified id doesn&#8217;t exist.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_21">30.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.get(<span class="integer">1</span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_20">30.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code> - The id of the object to retrieve</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-getAll">30.3.1. getAll方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getall">31. getAll</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_22">31.1. Purpose</h3>
<div class="paragraph">
<p>Retrieves a <code>List</code> of instances of the domain class for the specified ids, ordered by the original ids list. If some of the provided ids are <code>null</code> or there are no instances with these ids, the resulting <code>List</code> will have <code>null</code> values in those positions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_22">31.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// get a list which contains Book instances with ids 2, 1, 3 respectively</span>
<span class="keyword">def</span> bookList = <span class="predefined-type">Book</span>.getAll(<span class="integer">2</span>, <span class="integer">1</span>, <span class="integer">3</span>)

<span class="comment">// can take a list of ids as only argument, very</span>
<span class="comment">// useful when the ids list is calculated in code</span>
<span class="keyword">def</span> bookList = <span class="predefined-type">Book</span>.getAll([<span class="integer">1</span>, <span class="integer">2</span>, <span class="integer">3</span>])

<span class="comment">// when called without arguments returns list of all objects</span>
<span class="keyword">def</span> bookList = <span class="predefined-type">Book</span>.getAll()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_21">31.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>varargs</code>* - A variable argument list of ids</p>
</li>
<li>
<p><code>ids</code>* - A list of ids</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-getDirtyPropertyNames">31.3.1. getDirtyPropertyNames方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getdirtypropertynames">32. getDirtyPropertyNames</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_23">32.1. Purpose</h3>
<div class="paragraph">
<p>Retrieve the names of modified fields in a domain class instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_23">32.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.get(<span class="integer">1</span>)
someMethodThatMightModifyTheInstance(b)

<span class="keyword">def</span> names = b.dirtyPropertyNames
<span class="keyword">for</span> (name <span class="keyword">in</span> names) {
    <span class="keyword">def</span> originalValue = b.getPersistentValue(name)
    ...
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_22">32.3. Description</h3>
<div class="paragraph">
<p>This method is useful mostly for audit logging or other work done in a <strong>beforeUpdate</strong> event callback. Hibernate caches the original state of all loaded instances for dirty checking during a flush and this method exposes the names of modified fields so you can compare them with the current state.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-getPersistentValue">32.3.1. getPersistentValue方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getpersistentvalue">33. getPersistentValue</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_24">33.1. Purpose</h3>
<div class="paragraph">
<p>Retrieve the original value of a field for a domain class instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_24">33.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.get(<span class="integer">1</span>)
someMethodThatMightModifyTheInstance(b)

<span class="keyword">if</span> (b.isDirty(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>)) {
    <span class="keyword">def</span> currentName = b.name
    <span class="keyword">def</span> originalName = b.getPersistentValue(<span class="string"><span class="delimiter">'</span><span class="content">name</span><span class="delimiter">'</span></span>)
    <span class="keyword">if</span> (currentName != originalName) {
        ...
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_23">33.3. Description</h3>
<div class="paragraph">
<p>This method is useful mostly for audit logging or other work done in a <strong>beforeUpdate</strong> event callback. Hibernate caches the original state of all loaded instances for dirty checking during a flush and this method exposes that data so you can compare it with the current state.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-hasErrors">33.3.1. hasErrors方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_haserrors">34. hasErrors</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_25">34.1. Purpose</h3>
<div class="paragraph">
<p>Check if a domain class instance has validation errors following a call to <a href="validate.html">validate</a> or <a href=".save.html">save</a>, or following <a href="{guidePath}/theWebLayer.html#dataBinding">data binding</a></p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_25">34.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
b.validate()
<span class="keyword">if</span> (b.hasErrors()) {
    b.errors.allErrors.each {
        println <span class="local-variable">it</span>
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-hasMany">34.2.1. hasMany静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hasmany">35. hasMany</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_26">35.1. Purpose</h3>
<div class="paragraph">
<p>Defines a one-to-many association between two classes.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_26">35.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {

    <span class="predefined-type">String</span> name

    <span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example we define a one-to-many relationship between the <code>Author</code> and <code>Book</code> classes (one <code>Author</code> has many `Book`s)</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_24">35.3. Description</h3>
<div class="paragraph">
<p>By default GORM will create a property of type <code>java.util.Set</code> using the key inside the definition of the <code>hasMany</code> map. For example consider this definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">static</span> hasMany = [<span class="key">books</span>: <span class="predefined-type">Book</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here a property of type <code>java.util.Set</code> called <code>books</code> will be created within the defining class. These can then be iterated over and manipulated:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> a = Author.get(<span class="integer">1</span>)
<span class="keyword">for</span> (book <span class="keyword">in</span> a.books) { println book.title }</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-hasOne">35.3.1. hasOne静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_hasone">36. hasOne</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_27">36.1. Purpose</h3>
<div class="paragraph">
<p>Defines a bidirectional one-to-one association between two classes where the foreign key is in the child.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_27">36.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Face</span> {
    ..
    <span class="directive">static</span> hasOne = [<span class="key">nose</span>: Nose]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Nose</span> {
    Face face
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example we define a one-to-one relationship between the <code>Face</code> class and the <code>Nose</code> class</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_25">36.3. Description</h3>
<div class="paragraph">
<p>Use a <code>hasOne</code> association to store the foreign key reference in child table instead of the parent in a bidirectional one-to-one. The example presented above will generate the following table structure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">create table face (id bigint generated by <span class="keyword">default</span> <span class="keyword">as</span> identity (start with <span class="integer">1</span>),
                   version bigint not <span class="predefined-constant">null</span>,
                   primary key (id))
create table nose (id bigint generated by <span class="keyword">default</span> <span class="keyword">as</span> identity (start with <span class="integer">1</span>),
                   version bigint not <span class="predefined-constant">null</span>,
                   face_id bigint not <span class="predefined-constant">null</span>,
                   primary key (id))</code></pre>
</div>
</div>
<div class="paragraph">
<p>Notice that the foreign key <code>face_id</code> is stored in the <code>nose</code> table instead of the <code>face</code> table as with a normal one-to-one definition without <code>belongsTo</code>.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-ident">36.3.1. ident方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ident">37. ident</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_28">37.1. Purpose</h3>
<div class="paragraph">
<p>Returns the value of the identity property of the domain class regardless of the name of the identity property itself</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_28">37.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
b.save()

println b.ident()</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-instanceOf">37.2.1. instanceOf方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instanceof">38. instanceOf</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_29">38.1. Purpose</h3>
<div class="paragraph">
<p>Determines if a domain class instance is an instance of the specified class, resolving the actual class if the instance is a proxy.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_29">38.2. Examples</h3>
<div class="paragraph">
<p>Given the domain classes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Container</span> {
   <span class="directive">static</span> hasMany = [<span class="key">children</span>: Child]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Child</span> {
   <span class="predefined-type">String</span> name
   <span class="directive">static</span> belongsTo = [<span class="key">container</span>: <span class="predefined-type">Container</span>]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Thing</span> <span class="directive">extends</span> Child {}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Other</span> <span class="directive">extends</span> Child {}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then you can determine the type of the elements in a <code>Container</code>'s <code>children</code> collection using</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> container = <span class="predefined-type">Container</span>.get(id)
<span class="keyword">for</span> (child <span class="keyword">in</span> container.children) {
   <span class="keyword">if</span> (child.instanceOf(Thing)) {
      <span class="comment">// process Thing</span>
   }
   <span class="keyword">else</span> <span class="keyword">if</span> (child.instanceOf(Other)) {
      <span class="comment">// process Other</span>
   }
   <span class="keyword">else</span> {
      <span class="comment">// handle unexpected type</span>
   }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_26">38.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>clazz</code> - the type to check</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-isAttached">38.3.1. isAttached方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_isattached">39. isAttached</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_30">39.1. Purpose</h3>
<div class="paragraph">
<p>Returns whether the domain instance is attached to a currently active Hibernate session. This method is often used on conjunction with the <a href="merge.html">merge</a> or <a href="attach.html">attach</a> methods.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_30">39.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Book</span> b = session.book
...
if (!b.isAttached()) {
    b.attach()
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_27">39.3. Description</h3>
<div class="paragraph">
<p>Persistent instances are associated with a persistence Session. A new Session is created for each request and is closed at the end of the request. If an object is read from the session and placed into a web scope such as the HttpSession it is seen as detached, since the persistence session has been closed. You can use the <a href="attach.html">attach</a> method to re-attach an existing persistent instance to the persistence session of the current request.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-isDirty">39.3.1. isDirty方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_isdirty">40. isDirty</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_31">40.1. Purpose</h3>
<div class="paragraph">
<p>Checks to see if a domain class instance has been modified.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_31">40.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.get(<span class="integer">1</span>)
someMethodThatMightModifyTheInstance(b)

<span class="comment">// when called without arguments returns true if any field was changed</span>
<span class="keyword">if</span> (b.isDirty()) {
    <span class="comment">// can also check if one field has changed</span>
    <span class="keyword">if</span> (b.isDirty(<span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>)) {
        ...
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_28">40.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fieldName</code> - The name of a field to check</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-last">40.3.1. last方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_last">41. last</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_32">41.1. Purpose</h3>
<div class="paragraph">
<p>Retrieves the last instance of the domain class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_32">41.2. Examples</h3>
<div class="paragraph">
<p>Given the domain class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Person</span> {
    <span class="predefined-type">String</span> firstName
    <span class="predefined-type">String</span> lastName
    <span class="predefined-type">Integer</span> age
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// retrieve the last person ordered by the identifier</span>
<span class="keyword">def</span> p = Person.last()

<span class="comment">// retrieve the last person ordered by the lastName property</span>
p = Person.last(<span class="key">sort</span>: <span class="string"><span class="delimiter">'</span><span class="content">lastName</span><span class="delimiter">'</span></span>)

<span class="comment">// retrieve the last person ordered by the lastName property</span>
p = Person.last(<span class="string"><span class="delimiter">'</span><span class="content">lastName</span><span class="delimiter">'</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>sort</code> (optional) - The name of the property to sort by</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See also:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="first.html">first</a></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that the first() and last() methods are not supported on domain classes which use a composite primary key.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-list">41.2.1. list方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_list">42. list</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_33">42.1. Purpose</h3>
<div class="paragraph">
<p>Lists instances of the domain class.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_33">42.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// list everything</span>
<span class="keyword">def</span> results = <span class="predefined-type">Book</span>.list()

<span class="comment">// list 10 results</span>
<span class="keyword">def</span> results = <span class="predefined-type">Book</span>.list(<span class="key">max</span>: <span class="integer">10</span>)

<span class="comment">// list 10 results, offset by 100</span>
<span class="keyword">def</span> results = <span class="predefined-type">Book</span>.list(<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">100</span>)

<span class="comment">// list 10 results, offset by 100, orderd by title in descending order</span>
<span class="keyword">def</span> results = <span class="predefined-type">Book</span>.list(<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">100</span>, <span class="key">sort</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>, <span class="key">order</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span>)

<span class="comment">// list all books, eagerly fetching the authors association</span>
<span class="keyword">def</span> results = <span class="predefined-type">Book</span>.list(<span class="key">fetch</span>: [<span class="key">authors</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">eager</span><span class="delimiter">&quot;</span></span>])</code></pre>
</div>
</div>
<div class="paragraph">
<p>When <code>max</code> is specified as a named argument this will return a <a href="http://grails.github.io/grails-data-mapping/latest/api/grails/orm/PagedResultList.html">PagedResultList</a> which has a getTotalCount() method to return the total number of matching records for pagination. Two queries are still run, but they&#8217;re run for you and the results and total count are combined in the <code>PagedResultList</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_29">42.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>max</code> - The maximum number to list</p>
</li>
<li>
<p><code>offset</code> - The offset from the first result to list from</p>
</li>
<li>
<p><code>order</code> - How to order the list, either <code>"desc"</code> or <code>"asc"</code></p>
</li>
<li>
<p><code>sort</code> - The property name to sort by</p>
</li>
<li>
<p><code>ignoreCase</code> - Whether to ignore the case when sorting. Default is <code>true</code>.</p>
</li>
<li>
<p><code>fetch</code> - The fetch policy for the object&#8217;s associations as a <code>Map</code></p>
</li>
<li>
<p><code>readOnly</code> - true if returned objects should not be automatically dirty-checked (simlar to <code>read()</code>)</p>
</li>
<li>
<p><code>fetchSize</code> - number of rows fetched by the underlying JDBC driver per round trip</p>
</li>
<li>
<p><code>flushMode</code> - Hibernate <code>FlushMode</code> override, defaults to <code>FlushMode.AUTO</code></p>
</li>
<li>
<p><code>timeout</code> - query timeout in seconds</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-listOrderBy">42.3.1. listOrderBy方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_listorderby">43. listOrderBy*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_34">43.1. Purpose</h3>
<div class="paragraph">
<p>Lists all of the instances of the domain class ordered by the property in the method expression</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_34">43.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// everything</span>
<span class="keyword">def</span> results = <span class="predefined-type">Book</span>.listOrderByAuthor()

<span class="comment">// 10 results</span>
<span class="keyword">def</span> results = <span class="predefined-type">Book</span>.listOrderByTitle(<span class="key">max</span>: <span class="integer">10</span>)

<span class="comment">// 10 results, offset from 100</span>
<span class="keyword">def</span> results = <span class="predefined-type">Book</span>.listOrderByTitle(<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">100</span>, <span class="key">order</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">desc</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_30">43.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>max</code> - The maximum number to list</p>
</li>
<li>
<p><code>offset</code> - The offset from the first result to list from</p>
</li>
<li>
<p><code>order</code> - The order to list by, either <code>"desc"</code> or <code>"asc"</code></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-load">43.3.1. load方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_load">44. load</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_35">44.1. Purpose</h3>
<div class="paragraph">
<p>Returns a proxy instance of the domain class for the given identifier.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_35">44.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// load a single instance</span>
<span class="keyword">def</span> b = <span class="predefined-type">Book</span>.load(<span class="integer">1</span>)
<span class="predefined-type">String</span> title = b.title
...

<span class="comment">// delete an instance without retrieving it</span>
<span class="predefined-type">Book</span>.load(<span class="integer">1</span>).delete()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_31">44.3. Description</h3>
<div class="paragraph">
<p><code>load</code> usually returns a proxy for the instance which is initialized on-demand, when a method other than <code>getId()</code> is invoked. <code>load()</code> only returns <code>null</code> if the provided id is <code>null</code>, so you cannot use it to test for existence. If you provide an id for an instance that doesn&#8217;t exist, a proxy will be returned and an exception will be thrown only when you call any instance method other than <code>getId()</code>.</p>
</div>
<div class="paragraph">
<p>If there is an existing instance with the same id in the Hibernate session or 2nd-level cache, load() will return that non-proxy instance instead of a proxy.</p>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code> - The id of the object to retrieve</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-lock">44.3.1. lock方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_lock">45. lock</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_36">45.1. Purpose</h3>
<div class="paragraph">
<p>The <code>lock</code> method obtains a pessimistic lock using an SQL <code>select ... for update</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_36">45.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> book = <span class="predefined-type">Book</span>.get(<span class="integer">1</span>)
book.lock()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_32">45.3. Description</h3>
<div class="paragraph">
<p>The <code>lock</code> method obtains a pessimistic lock on an instance, locking the row in the database with <code>select ... for update</code>. The <code>lock</code> method is equivalent to using Hibernate&#8217;s <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/LockMode#UPGRADE.html">LockMode.UPGRADE</a> in combination with the <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#lock(java/lang/Object" class="bare">http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#lock(java/lang/Object</a>, org/hibernate/LockMode).html[lock] method.</p>
</div>
<div class="paragraph">
<p>The lock is automatically released when the transaction commits. In Grails this is typically after an action has finished executing.</p>
</div>
<div class="paragraph">
<p>Refer to the section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#locking">Optimistic and Pessimistic locking</a> in the user guide for info.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-mappedBy">45.3.1. mappedBy静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mappedby">46. mappedBy</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_37">46.1. Purpose</h3>
<div class="paragraph">
<p>The <code>mappedBy</code> static property allows you to control whether an association is mapped as unidirectional or bidirectional, and which properties form the reverse direction in the case of bidirectional associations.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_37">46.2. Examples</h3>
<div class="paragraph">
<p>In this example the <code>Airport</code> class defines two bidirectional one-to-many associations. Without defining <code>mappedBy</code> this is impossible as GORM cannot differentiate which of the two properties on the other end of the association (either <code>departureAirport</code> or <code>destinationAirport</code> in the <code>Route</code> class) each one-to-many should be associated with.</p>
</div>
<div class="paragraph">
<p>The solution is to define <code>mappedBy</code> which tells the <code>Airport</code> class how each association relates to the other side.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Airport</span> {

    <span class="directive">static</span> mappedBy = [<span class="key">outgoingFlights</span>: <span class="string"><span class="delimiter">'</span><span class="content">departureAirport</span><span class="delimiter">'</span></span>,
                       <span class="key">incomingFlights</span>: <span class="string"><span class="delimiter">'</span><span class="content">destinationAirport</span><span class="delimiter">'</span></span>]

    <span class="directive">static</span> hasMany = [<span class="key">outgoingFlights</span>: Route,
                      <span class="key">incomingFlights</span>: Route]
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Route</span> {
    Airport departureAirport
    Airport destinationAirport
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Separate example for many-to-one relationships:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Person</span> {
    <span class="predefined-type">String</span> name
    Person parent

    <span class="directive">static</span> belongsTo = [ <span class="key">supervisor</span>: Person ]

    <span class="directive">static</span> mappedBy = [ <span class="key">supervisor</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>, <span class="key">parent</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span> ]

    <span class="directive">static</span> constraints = { supervisor <span class="key">nullable</span>: <span class="predefined-constant">true</span> }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_33">46.3. Description</h3>
<div class="paragraph">
<p>Grails needs to know whether associations are unidirectional or bidirectional, and in the case of the latter, which properties are involved from both sides. Normally it can infer this information, but when there are multiple properties with the same type its guess can sometimes be wrong. The <code>mappedBy</code> property is a simple map of property name pairs, where the key is the name of an association property in the current domain class and the value is the name of an association property in the domain class on the other side of the association (which may be itself). The examples above should clarify this.</p>
</div>
<div class="paragraph">
<p>You can also specify a value of "none" in the map, which indicates that the association is unidirectional. However, this won&#8217;t work if you actually have a domain property called "none" in the target class!</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-mapping">46.3.1. mapping静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mapping">47. mapping</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_38">47.1. Purpose</h3>
<div class="paragraph">
<p>The <code>mapping</code> static property configures how GORM maps the domain class to the database. See the section on the <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#ormdsl">ORM DSL</a> in the user guide for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_38">47.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Person</span> {

    <span class="predefined-type">String</span> firstName

    <span class="directive">static</span> hasMany = [<span class="key">addresses</span>: Address]

    <span class="directive">static</span> mapping = {
        table <span class="string"><span class="delimiter">'</span><span class="content">people</span><span class="delimiter">'</span></span>
        version <span class="predefined-constant">false</span>
        id <span class="key">column</span>: <span class="string"><span class="delimiter">'</span><span class="content">person_id</span><span class="delimiter">'</span></span>
        firstName <span class="key">column</span>: <span class="string"><span class="delimiter">'</span><span class="content">First_Name</span><span class="delimiter">'</span></span>
        addresses <span class="key">lazy</span>: <span class="predefined-constant">false</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example uses the <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#ormdsl">ORM DSL</a> to map the <code>Person</code> class onto a table called <code>people</code></p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-mapWith">47.2.1. mapWith静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_mapwith">48. mapWith</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_39">48.1. Purpose</h3>
<div class="paragraph">
<p>The <code>mapWith</code> static property adds the ability to control if a domain class is being persisted.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_39">48.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Airport</span> {

    <span class="directive">static</span> mapWith = <span class="string"><span class="delimiter">&quot;</span><span class="content">none</span><span class="delimiter">&quot;</span></span>

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example the <code>Airport</code> class will not be persisted to the database.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-merge">48.2.1. merge方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_merge">49. merge</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_40">49.1. Purpose</h3>
<div class="paragraph">
<p>Merges a domain class instance back into the current persistence context and returns a new merged instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_40">49.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
b = b.merge()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_34">49.3. Description</h3>
<div class="paragraph">
<p>The <code>merge</code> method is similar in function to the <a href="save.html">save</a> method, but not in behaviour. <code>merge</code> allows the merging of "detached" instances such as those stored in the HTTP <a href="../Controllers/session.html">session</a>. Each persistent instance is associated with a persistence context. A new persistence context is created for each <a href="../Controllers/request.html">request</a>. The result is that objects stored in the HTTP session lose their persistence context on subsequent requests. In this case you can&#8217;t simply call <a href="save.html">save</a> as the domain class is not associated with a current context.</p>
</div>
<div class="paragraph">
<p>The <code>merge</code> method on the other hand lets you merge a detached object&#8217;s state back into the current Hibernate session. Unlike the <code>save</code> method this method returns a new instance of the class representing the re-attached object. In other words you <strong>must</strong> write code like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">book = book.merge()</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t use the return value of the <code>merge</code> method then you still have access to the original unmodified detached instance and you will get errors such as lazy initialization exceptions.</p>
</div>
<div class="paragraph">
<p>The <code>merge</code> method is defined in the Hibernate documentation as follows:</p>
</div>
<div class="quoteblock">
<blockquote>
<div class="paragraph">
<p>Copy the state of the given object onto the persistent object with the same identifier. If there is no persistent instance currently associated with the session, it will be loaded. If the given instance is unsaved, save a copy of and return it as a newly persistent instance.</p>
</div>
</blockquote>
</div>
<div class="paragraph">
<p>The <code>merge</code> method is equivalent to the Hibernate <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#merge(java/lang/Object).html">merge</a> method.</p>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>validate</code> (optional) - Set to <code>false</code> if validation should be skipped</p>
</li>
<li>
<p><code>flush</code> (optional) - When set to <code>true</code> flushes the persistence context, hence persisting the object immediately</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-namedQueries">49.3.1. namedQueries静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_namedqueries">50. namedQueries</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_41">50.1. Purpose</h3>
<div class="paragraph">
<p>The <code>namedQueries</code> static property defines named queries.  Named queries support the criteria builder syntax.  See the section on the <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#criteria">Criteria Builder</a> in the user guide for more information.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_41">50.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Publication</span> {

   <span class="predefined-type">String</span> title
   <span class="predefined-type">String</span> author
   <span class="predefined-type">Date</span> datePublished
   <span class="predefined-type">Integer</span> numberOfPages

   <span class="directive">static</span> namedQueries = {
       recentPublications {
           <span class="keyword">def</span> now = <span class="keyword">new</span> <span class="predefined-type">Date</span>()
           gt <span class="string"><span class="delimiter">'</span><span class="content">datePublished</span><span class="delimiter">'</span></span>, now - <span class="integer">365</span>
       }

       oldPublicationsLargerThan { pageCount -&gt;
           <span class="keyword">def</span> now = <span class="keyword">new</span> <span class="predefined-type">Date</span>()
           lt <span class="string"><span class="delimiter">'</span><span class="content">datePublished</span><span class="delimiter">'</span></span>, now - <span class="integer">365</span>
           gt <span class="string"><span class="delimiter">'</span><span class="content">numberOfPages</span><span class="delimiter">'</span></span>, pageCount
       }

       publicationsWithBookInTitle {
           like <span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">%Book%</span><span class="delimiter">'</span></span>
       }

       recentPublicationsWithBookInTitle {
           <span class="comment">// calls to other named queries...</span>
           recentPublications()
           publicationsWithBookInTitle()
      }
   }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// get all recent publications...</span>
<span class="keyword">def</span> recentPubs = Publication.recentPublications.list()

<span class="comment">// get up to 10 recent publications, skip the first 5...</span>
<span class="keyword">def</span> recentPubs = Publication.recentPublications.list(<span class="key">max</span>: <span class="integer">10</span>, <span class="key">offset</span>: <span class="integer">5</span>)

<span class="comment">// get a single recent publication</span>
<span class="keyword">def</span> recentPub = Publication.recentPublications.get()

<span class="comment">// get the number of recent publications...</span>
<span class="keyword">def</span> numberOfRecentPubs = Publication.recentPublications.count()

<span class="comment">// get a recent publication with a specific id...</span>
<span class="keyword">def</span> pub = Publication.recentPublications.get(<span class="integer">42</span>)

<span class="comment">// get all recent publications where title = 'Some Title'</span>
<span class="keyword">def</span> pubs = Publication.recentPublications.findAllWhere(<span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Some Title</span><span class="delimiter">'</span></span>)

<span class="comment">// get a recent publication where title = 'Some Title'</span>
<span class="keyword">def</span> pub = Publication.recentPublications.findWhere(<span class="key">title</span>: <span class="string"><span class="delimiter">'</span><span class="content">Some Title</span><span class="delimiter">'</span></span>)

<span class="comment">// dynamic finders are supported</span>
<span class="keyword">def</span> pubs = Publication.recentPublications.findAllByTitle(<span class="string"><span class="delimiter">'</span><span class="content">Some Title</span><span class="delimiter">'</span></span>)

<span class="comment">// get all old publications with more than 350 pages</span>
<span class="keyword">def</span> pubs = Publication.oldPublicationsLargerThan(<span class="integer">350</span>).list()

<span class="comment">// get all old publications with more than 350 pages</span>
<span class="comment">// and the word 'Grails' in the title</span>
<span class="keyword">def</span> pubs = Publication.oldPublicationsLargerThan(<span class="integer">350</span>).findAllByTitleLike(<span class="string"><span class="delimiter">'</span><span class="content">%Grails%</span><span class="delimiter">'</span></span>)

<span class="comment">// get all recent publications with 'Book' in their title</span>
<span class="keyword">def</span> pubs = Publication.recentPublicationsWithBookInTitle().list()</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>list</code> method on named queries supports the same attributes as the static <code>list</code> method added to domain classes (sort, order, ignoreCase, fetch etc&#8230;&#8203;).  See the <a href="list.html">list</a> docs for details.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Note that calling something like <code>Publication.recentPublications.get(42)</code> is not the same as calling something like <code>Publication.get(42)</code>.  The former will only return a <code>Publication</code> if the <code>Publication</code> with id 42 meets all the criteria defined in the <code>recentPublications</code> named query.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Named criteria support <code>listDistinct()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">PlantCategory</span> {

    <span class="predefined-type">Set</span> plants
    <span class="predefined-type">String</span> name

    <span class="directive">static</span> hasMany = [<span class="key">plants</span>: Plant]

    <span class="directive">static</span> namedQueries = {
        withPlantsInPatch {
            plants {
                eq <span class="string"><span class="delimiter">'</span><span class="content">goesInPatch</span><span class="delimiter">'</span></span>, <span class="predefined-constant">true</span>
            }
        }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Plant</span> {
    <span class="type">boolean</span> goesInPatch
    <span class="predefined-type">String</span> name
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">PlantCategory.withPlantsInPatch.listDistinct()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Named criteria support additional criteria being supplied at invocation time in the form of a criteria closure:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// get all recent publications with author names beginning with Tony or Phil...</span>
<span class="keyword">def</span> books = Publication.recentPublications {
    or {
        like <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Tony%</span><span class="delimiter">'</span></span>
        like <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Phil%</span><span class="delimiter">'</span></span>
    }
}

<span class="comment">// get the number of recent publications with</span>
<span class="comment">// author names beginning with Tony or Phil...</span>
<span class="keyword">def</span> numberOfBooks = Publication.recentPublications.count {
    or {
        like <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Tony%</span><span class="delimiter">'</span></span>
        like <span class="string"><span class="delimiter">'</span><span class="content">author</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">Phil%</span><span class="delimiter">'</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Named criteria may be chained together.  When criteria are chained together, the query will be generated as if all of the chained criteria had been combined in a single criteria closure.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">// recent publications with 'Book' in the title</span>
<span class="keyword">def</span> books = Publication.recentPublications.publicationsWithBookInTitle.list()

<span class="comment">// old publications with more than 500 pages and with 'Book' in the title</span>
<span class="keyword">def</span> books = Publication.oldPublicationsLargerThan(<span class="integer">500</span>)
                       .publicationsWithBookInTitle
                       .list()</code></pre>
</div>
</div>
<div class="paragraph">
<p>When a named query involves a domain class relationship and the relationship class defines a named query, that named query may be accessed directly as a method call.  An example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {

    <span class="directive">static</span> hasMany = [<span class="key">publications</span>: Publication]

    <span class="directive">static</span> namedQueries = {
         authorsWithRecentPublications {
             publications {
                 <span class="comment">// invoking a named query defined in the Publication class...</span>
                 recentPublications()
             }
         }
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Publication</span> {

    Author author

    <span class="directive">static</span> namedQueries = {
        recentPublications {
            <span class="keyword">def</span> now = <span class="keyword">new</span> <span class="predefined-type">Date</span>()
            gt <span class="string"><span class="delimiter">'</span><span class="content">datePublished</span><span class="delimiter">'</span></span>, now - <span class="integer">10</span>
        }
    }
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-properties">50.2.1. properties属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_properties">51. properties</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_42">51.1. Purpose</h3>
<div class="paragraph">
<p>Allows access to the domain class properties as a Map and is typically used for <a href="{guidePath}/theWebLayer.html#dataBinding">data binding</a> to perform type conversions allowing properties to be set from request parameters or other Maps.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_42">51.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
b.properties = params
b.save()</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-read">51.2.1. read方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_read">52. read</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_43">52.1. Purpose</h3>
<div class="paragraph">
<p>Retrieves an instance of the domain class for the specified id in a read-only state. <code>null</code> is returned if the row with the specified id doesn&#8217;t exist.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_43">52.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.read(<span class="integer">1</span>)</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_35">52.3. Description</h3>
<div class="paragraph">
<p>The <code>read</code> method is similar to the <a href="get.html">get</a> method except that automatic dirty detection is disabled. The instance isn&#8217;t truly read-only - you can modify it - but if it isn&#8217;t explicitly saved but has been modified, it won&#8217;t be updated in the database during a flush. But you can explicitly call <code>save()</code> and it will be updated. There is one exception to this though - any associated collections, for example an <code>Author</code>'s <code>books</code> collection, will participate in automatic flushing and dirty detection. This is because mapped collections are treated differently than regular properties and they manage their own dirty checking indepenent of the containing domain class.</p>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>id</code> - The id of the object to retrieve</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-refresh">52.3.1. refresh方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_refresh">53. refresh</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_44">53.1. Purpose</h3>
<div class="paragraph">
<p>Refreshes a domain classes state from the database</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_44">53.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="predefined-type">Book</span>.get(<span class="integer">1</span>)
...
b.refresh()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_36">53.3. Description</h3>
<div class="paragraph">
<p>Equivalent to the Hibernate <a href="http://docs.jboss.org/hibernate/orm/current/javadocs/org/hibernate/Session#refresh(java/lang/Object).html">refresh</a> method.</p>
</div>
<div class="paragraph">
<p>Re-reads the state of the given instance from the underlying database. It is inadvisable to use this to implement long-running sessions that span many business tasks. However this method is useful in certain special circumstances. For example</p>
</div>
<div class="ulist">
<ul>
<li>
<p>where a database trigger alters the object state upon insert or update</p>
</li>
<li>
<p>after executing direct SQL (e.g. a bulk update) in the same Session</p>
</li>
<li>
<p>after inserting a Blob or Clob</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-removeFrom">53.3.1. removeFrom方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_removefrom">54. removeFrom*</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_45">54.1. Purpose</h3>
<div class="paragraph">
<p>Opposite of the <a href="addTo.html">addTo</a> method in that it removes instances from an association.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_45">54.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> author = Author.findByName(<span class="string"><span class="delimiter">&quot;</span><span class="content">Stephen King</span><span class="delimiter">&quot;</span></span>)

<span class="keyword">def</span> book = author.books.find { <span class="local-variable">it</span>.title == <span class="string"><span class="delimiter">'</span><span class="content">The Stand</span><span class="delimiter">'</span></span> }

author.removeFromBooks(book)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-save">54.2.1. save方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_save">55. save</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_46">55.1. Purpose</h3>
<div class="paragraph">
<p>Saves a new domain class instance or updates a modified persistent instance in the database, cascading updates to child instances if required.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_46">55.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
b.save()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_37">55.3. Description</h3>
<div class="paragraph">
<p>The <code>save</code> method informs the persistence context that an instance should be saved or updated. The object will not be persisted immediately unless the <code>flush</code> argument is used:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">b.save(<span class="key">flush</span>: <span class="predefined-constant">true</span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>save</code> method returns <code>null</code> if <a href="{guidePath}/validation.html">validation</a> failed and the instance was not persisted, or the instance itself if successful. This lets you use "Groovy truth" (<code>null</code> is considered <code>false</code>) to write code like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">if</span> (!b.save()) {
    b.errors.allErrors.each {
        println <span class="local-variable">it</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>validate</code> (optional) - Set to <code>false</code> if validation should be skipped</p>
</li>
<li>
<p><code>flush</code> (optional) - When set to <code>true</code> flushes the persistence context, persisting the object immediately and updating the <code>version</code> column for <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#locking">optimistic locking</a></p>
</li>
<li>
<p><code>insert</code> (optional) - When set to <code>true</code> will force Hibernate to do a SQL INSERT; this is useful in certain situations (for example when using assigned ids) and Hibernate cannot detect whether to do an INSERT or an UPDATE</p>
</li>
<li>
<p><code>failOnError</code> (optional) - When set to <code>true</code> the <code>save</code> method with throw a <code>grails.validation.ValidationException</code> if <a href="{guidePath}/validation.html">validation</a> fails. This behavior may also be triggered by setting the <code>grails.gorm.failOnError</code> property in <code>grails-app/conf/application.groovy</code>. If the Config property is set and the argument is passed to the method, the method argument will always take precedence.  For more details about the config property and other GORM config options, see the <a href="{guidePath}/conf.html#configGORM">GORM Configuration Options</a> section of The User Guide.</p>
</li>
<li>
<p><code>deepValidate</code> (optional) - Determines whether associations of the domain instance should also be validated, i.e. whether validation cascades. This is <code>true</code> by default - set to <code>false</code> to disable cascading validation.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
By default GORM classes are configured for <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#locking">optimistic locking</a>, which is a feature of Hibernate that involves storing an incrementing version in the table. This value is only updated in the database when the Hibernate session is flushed.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-transients">55.3.1. transients静态属性</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_transients">56. transients</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_47">56.1. Purpose</h3>
<div class="paragraph">
<p>Defines a list of property names that should not be persisted to the database. This is often useful if you have read-only accessor methods ("getters") that are helper methods but get confused as being persistence-related.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_47">56.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">Author</span> {
   <span class="predefined-type">String</span> name
   <span class="predefined-type">String</span> getUpperCaseName() { name.toUpperCase() }

   <span class="directive">static</span> transients = [<span class="string"><span class="delimiter">'</span><span class="content">upperCaseName</span><span class="delimiter">'</span></span>]
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here we have an accessor that takes the <code>name</code> and converts it to uppercase. It doesn&#8217;t make sense to persist this derived value, so we mark it as transient adding its JavaBean property name to the <code>transients</code> list.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
As of Grails 2.0 if there is only a getter or only a setter method, you don&#8217;t need to declare the property name of the method in the transients list. Only typed fields and get/set pairs that form a property but shouldn&#8217;t be persisted need to go in the transients list.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-validate">56.2.1. validate方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_validate">57. validate</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_48">57.1. Purpose</h3>
<div class="paragraph">
<p>Validates a domain class against the applied constraints (see <a href="{guidePath}/validation.html">validation</a>)</p>
</div>
</div>
<div class="sect2">
<h3 id="_description_38">57.2. Description</h3>
<div class="paragraph">
<p>The <code>validate</code> method validates a domain class based on its defined <a href="{guidePath}/validation.html#constraints">Constraints</a>. The errors are stored in the <a href="errors.html">errors</a> property of the domain class instance.</p>
</div>
<div class="paragraph">
<p>The <code>validate</code> method accepts an optional <code>List</code> argument which contains the names of the properties to be validated. When a <code>List</code> of names is specified, only those properties will be validated.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_48">57.3. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> b = <span class="keyword">new</span> <span class="predefined-type">Book</span>(<span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">The Shining</span><span class="delimiter">&quot;</span></span>)
<span class="keyword">if</span> (!b.validate()) {
    b.errors.allErrors.each {
        println <span class="local-variable">it</span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> a = <span class="keyword">new</span> Album(<span class="key">artist</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Genesis</span><span class="delimiter">&quot;</span></span>, <span class="key">title</span>: <span class="string"><span class="delimiter">&quot;</span><span class="content">Nursery Cryme</span><span class="delimiter">&quot;</span></span>, <span class="key">releaseDate</span>: <span class="integer">1971</span>)

<span class="comment">// only validate title and releaseDate</span>
<span class="keyword">if</span> (!a.validate([<span class="string"><span class="delimiter">&quot;</span><span class="content">title</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">releaseDate</span><span class="delimiter">&quot;</span></span>])) {
    a.errors.allErrors.each {
        println <span class="local-variable">it</span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>deepValidate</code> (optional) - Whether associations of the domain instance should also be validated, i.e. whether validation cascades. This is <code>true</code> by default; set it to <code>false</code> to disable cascading validation.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-where">57.3.1. where方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_where">58. where</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_49">58.1. Purpose</h3>
<div class="paragraph">
<p>Defines a new <code>grails.gorm.DetachedCriteria</code> instance.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_49">58.2. Examples</h3>
<div class="paragraph">
<p>Basic query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> query = Person.where {
   firstName == <span class="string"><span class="delimiter">&quot;</span><span class="content">Bart</span><span class="delimiter">&quot;</span></span>
}
Person bart = query.find()</code></pre>
</div>
</div>
<div class="paragraph">
<p>Conjunctions/Disjunctions:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> query = Person.where {
    (lastName != <span class="string"><span class="delimiter">&quot;</span><span class="content">Simpson</span><span class="delimiter">&quot;</span></span> &amp;&amp; firstName != <span class="string"><span class="delimiter">&quot;</span><span class="content">Fred</span><span class="delimiter">&quot;</span></span>) || (firstName == <span class="string"><span class="delimiter">&quot;</span><span class="content">Bart</span><span class="delimiter">&quot;</span></span> &amp;&amp; age &gt; <span class="integer">9</span>)
}
<span class="keyword">def</span> results = query.list(<span class="key">sort</span>:<span class="string"><span class="delimiter">&quot;</span><span class="content">firstName</span><span class="delimiter">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Property comparison:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> query = Person.where {
   firstName == lastName
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Querying Associations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> query = Pet.where {
    owner.firstName == <span class="string"><span class="delimiter">&quot;</span><span class="content">Joe</span><span class="delimiter">&quot;</span></span> || owner.firstName == <span class="string"><span class="delimiter">&quot;</span><span class="content">Fred</span><span class="delimiter">&quot;</span></span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Subqueries:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="directive">final</span> query = Person.where {
  age &gt; avg(age)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_39">58.3. Description</h3>
<div class="paragraph">
<p>The <code>where</code> method is a powerful new type-safe querying option introduced in Grails 2.0. For more information on using the <code>where</code> method see the dedicated section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#whereQueries">Where Queries</a> and <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#detachedCriteria">Detached Criteria</a> in the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-whereAny">58.3.1. whereAny方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_where_2">59. where</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_50">59.1. Purpose</h3>
<div class="paragraph">
<p>Defines a new <code>grails.gorm.DetachedCriteria</code> instance that uses a disjunction (logical OR).</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_50">59.2. Examples</h3>
<div class="paragraph">
<p>Basic query:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> query = Person.whereAny {
   firstName == <span class="string"><span class="delimiter">&quot;</span><span class="content">Bart</span><span class="delimiter">&quot;</span></span>
   firstName == <span class="string"><span class="delimiter">&quot;</span><span class="content">Lisa</span><span class="delimiter">&quot;</span></span>
}
Person bart = query.find()</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_40">59.3. Description</h3>
<div class="paragraph">
<p>The <code>where</code> method defaults to a conjunction (logical AND) for the created query. The <code>whereAny</code> compliments the <code>where</code> method by allowing the creation of <code>DetachedCriteria</code> using a disjunction (logical OR).</p>
</div>
<div class="paragraph">
<p>The <code>where</code> method is a powerful new type-safe querying option introduced in Grails 2.0. For more information on using the <code>where</code> method see the dedicated section on <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#whereQueries">Where Queries</a> and <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#detachedCriteria">Detached Criteria</a> in the user guide.</p>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-withCriteria">59.3.1. withCriteria方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_withcriteria">60. withCriteria</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_51">60.1. Purpose</h3>
<div class="paragraph">
<p>Allows inline execution of Criteria queries. See the <a href="createCriteria.html">createCriteria</a> method for reference.</p>
</div>
</div>
<div class="sect2">
<h3 id="_return_value">60.2. Return value</h3>
<div class="paragraph">
<p>If no matching records are found, an empty List is returned.</p>
</div>
<div class="paragraph">
<p>If a projection is specified:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>returns a single value if it only contains one field</p>
</li>
<li>
<p>a List in case there are multiple fields in the projection</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Otherwise, it will return a List of matched instances of the class calling withCriteria.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_51">60.3. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> results = <span class="predefined-type">Book</span>.withCriteria {
    <span class="keyword">def</span> now = <span class="keyword">new</span> <span class="predefined-type">Date</span>()
    between(<span class="string"><span class="delimiter">'</span><span class="content">releaseDate</span><span class="delimiter">'</span></span>, now-<span class="integer">7</span>, now)
    like(<span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">%Groovy%</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_41">60.4. Description</h3>
<div class="paragraph">
<p>The <code>withCriteria</code> method allows the inline definition of <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#criteria">Criteria</a>. Arguments to the [<a href="http://grails.github.io/grails-data-mapping/latest/api/grails/orm/HibernateCriteriaBuilder.html" class="bare">http://grails.github.io/grails-data-mapping/latest/api/grails/orm/HibernateCriteriaBuilder.html</a>] can be passed as the first parameter:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">def</span> book = <span class="predefined-type">Book</span>.withCriteria(<span class="key">uniqueResult</span>: <span class="predefined-constant">true</span>) {
    <span class="keyword">def</span> now = <span class="keyword">new</span> <span class="predefined-type">Date</span>()
    between(<span class="string"><span class="delimiter">'</span><span class="content">releaseDate</span><span class="delimiter">'</span></span>, now-<span class="integer">7</span>, now)
    like(<span class="string"><span class="delimiter">'</span><span class="content">title</span><span class="delimiter">'</span></span>, <span class="string"><span class="delimiter">'</span><span class="content">%Groovy%</span><span class="delimiter">'</span></span>)
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>arguments</code> (optional) - A map of named arguments to be set on the Criteria instance</p>
</li>
<li>
<p><code>closure</code> - A closure that defines the criteria</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-withNewSession">60.4.1. withNewSession方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_withnewsession">61. withNewSession</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_purpose_52">61.1. Purpose</h3>
<div class="paragraph">
<p>Provides a way to execute code within the context of a new Hibernate session which shares the same transactional (JDBC Connection) resource as the currently bound session.</p>
</div>
</div>
<div class="sect2">
<h3 id="_examples_52">61.2. Examples</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Book</span>.withNewSession { session -&gt;
    <span class="comment">// do work</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_description_42">61.3. Description</h3>
<div class="paragraph">
<p>Parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>closure</code> - A closure which accepts a <code>Session</code> argument</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-withSession">61.3.1. withSession方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_withsession方法">62. withSession方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_8">62.1. 目的</h3>
<div class="paragraph">
<p>提供 Hibernate <code>Session</code> 对象的底层权限</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_8">62.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="predefined-type">Book</span>.withSession { session -&gt;
    session.clear()
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_6">62.3. 描述</h3>
<div class="paragraph">
<p>参数:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>closure</code> - 接受 <code>Session</code> 参数的闭包</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="ref-domain-classes-withTransaction">62.3.1. withTransaction方法</h4>

</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_withtransaction方法">63. withTransaction方法</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_目的_9">63.1. 目的</h3>
<div class="paragraph">
<p>允许编程式事务使用Spring的事务抽象。</p>
</div>
</div>
<div class="sect2">
<h3 id="_示例_9">63.2. 示例</h3>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy">Account.withTransaction { status -&gt;

    <span class="keyword">def</span> source = Account.get(params.from)
    <span class="keyword">def</span> dest = Account.get(params.to)

    <span class="type">int</span> amount = params.amount.toInteger()
    <span class="keyword">if</span> (source.active) {
        source.balance -= amount

        <span class="keyword">if</span> (dest.active) {
            dest.amount += amount
        }
        <span class="keyword">else</span> {
            status.setRollbackOnly()
        }
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>命名参数可以根据需要作为参数传递，以控制事务的属性。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="comment">//Map的key必须与 org.springframework.transaction.support.DefaultTransactionDefinition 中的属性一致。</span>

Account.withTransaction([<span class="key">propagationBehavior</span>: TransactionDefinition.PROPAGATION_REQUIRES_NEW,
                         <span class="key">isolationLevel</span>: TransactionDefinition.ISOLATION_REPEATABLE_READ]) {
    <span class="comment">// ...</span>
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_描述_7">63.3. 描述</h3>
<div class="paragraph">
<p><code>withTransaction</code> 方法接受一个含有 <a href="http://docs.spring.io/spring/docs/current/javadoc-api/org/springframework/transaction/TransactionStatus.html">TransactionStatus</a> 参数的闭包。</p>
</div>
<div class="paragraph">
<p><code>TransactionStatus</code> 对象可以被用来以编程方式控制事务回滚。</p>
</div>
<div class="paragraph">
<p>详情请参见 <a href="http://gorm.grails.org/6.0.x/hibernate/manual/index.html#programmaticTransactions">Programmatic Transactions</a> 。</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>